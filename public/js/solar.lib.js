require=function a(b,c,d){function e(f,h){var i,j,k;if(!c[f]){if(!b[f]){if(i="function"==typeof require&&require,!h&&i)return i(f,!0);if(g)return g(f,!0);throw j=Error("Cannot find module '"+f+"'"),j.code="MODULE_NOT_FOUND",j}k=c[f]={exports:{}},b[f][0].call(k.exports,function(a){var c=b[f][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[f].exports}var f,g="function"==typeof require&&require;for(f=0;f<d.length;f++)e(d[f]);return e}({1:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){var a,b;if(!k){for(a=setTimeout(d),k=!0,b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b,c=Array(arguments.length-1);if(arguments.length>1)for(b=1;b<arguments.length;b++)c[b-1]=arguments[b];j.push(new f(a,c)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(a,b,c){"use strict";function d(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function e(){}var f="function"!=typeof Object.create?"~":!1;e.prototype._events=void 0,e.prototype.listeners=function(a,b){var c,d,e,g=f?f+a:a,h=this._events&&this._events[g];if(b)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(c=0,d=h.length,e=Array(d);d>c;c++)e[c]=h[c].fn;return e},e.prototype.emit=function(a,b,c,d,e,g){var h,i,j,k,l,m,n=f?f+a:a;if(!this._events||!this._events[n])return!1;if(h=this._events[n],i=arguments.length,"function"==typeof h.fn){switch(h.once&&this.removeListener(a,h.fn,void 0,!0),i){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,b),!0;case 3:return h.fn.call(h.context,b,c),!0;case 4:return h.fn.call(h.context,b,c,d),!0;case 5:return h.fn.call(h.context,b,c,d,e),!0;case 6:return h.fn.call(h.context,b,c,d,e,g),!0}for(k=1,j=Array(i-1);i>k;k++)j[k-1]=arguments[k];h.fn.apply(h.context,j)}else for(l=h.length,k=0;l>k;k++)switch(h[k].once&&this.removeListener(a,h[k].fn,void 0,!0),i){case 1:h[k].fn.call(h[k].context);break;case 2:h[k].fn.call(h[k].context,b);break;case 3:h[k].fn.call(h[k].context,b,c);break;default:if(!j)for(m=1,j=Array(i-1);i>m;m++)j[m-1]=arguments[m];h[k].fn.apply(h[k].context,j)}return!0},e.prototype.on=function(a,b,c){var e=new d(b,c||this),g=f?f+a:a;return this._events||(this._events=f?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],e]:this._events[g].push(e):this._events[g]=e,this},e.prototype.once=function(a,b,c){var e=new d(b,c||this,!0),g=f?f+a:a;return this._events||(this._events=f?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],e]:this._events[g].push(e):this._events[g]=e,this},e.prototype.removeListener=function(a,b,c,d){var e,g,h,i,j=f?f+a:a;if(!this._events||!this._events[j])return this;if(e=this._events[j],g=[],b)if(e.fn)(e.fn!==b||d&&!e.once||c&&e.context!==c)&&g.push(e);else for(h=0,i=e.length;i>h;h++)(e[h].fn!==b||d&&!e[h].once||c&&e[h].context!==c)&&g.push(e[h]);return g.length?this._events[j]=1===g.length?g[0]:g:delete this._events[j],this},e.prototype.removeAllListeners=function(a){return this._events?(a?delete this._events[f?f+a:a]:this._events=f?{}:Object.create(null),this):this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prototype.setMaxListeners=function(){return this},e.prefixed=f,void 0!==b&&(b.exports=e)},{}],3:[function(a,b,c){b.exports={"private":!0,name:"solarcrusaders",version:"0.1.4",description:"A multiplayer strategy game featuring 4X gameplay, sandbox universe, and simulated virtual economy.",author:"Oliver J Dyla",contributors:[],dependencies:{colors:"1.1.x",minimist:"1.2.x",nconf:"0.8.x",daemon:"1.1.x",async:"1.5.x",winston:"2.1.x","logrotate-stream":"0.2.x",validator:"4.5.x",passport:"0.3.x","passport-local":"1.0.x",bcryptjs:"2.3.0",xregexp:"3.0.x",uuid:"2.0.x",morgan:"1.6.x",express:"4.13.x","express-session":"1.13.x","cookie-parser":"1.4.x",compression:"1.6.x","serve-favicon":"2.3.x","body-parser":"1.14.x",jade:"1.11.x",redis:"2.4.x","connect-redis":"3.0.x","socket.io":"1.4.x","socket.io-express-session":"0.1.x","socket.io-events":"0.4.x",stripe:"4.3.x",brfs:"1.4.x","bundle-collapser":"1.2.x",earcut:"2.0.x","resource-loader":"1.6.x","object-assign":"4.0.x",eventemitter3:"1.1.x",xhr:"2.2.x"},devDependencies:{grunt:"0.4.x","grunt-develop":"0.4.x","grunt-browserify":"4.0.x","grunt-node-inspector":"0.4.x","grunt-contrib-concat":"0.5.x","grunt-contrib-watch":"0.6.x","grunt-contrib-uglify":"0.11.x","grunt-contrib-compress":"0.14.x"}}},{}],4:[function(a,b,c){function d(a,b,c,d,f,g,h){void 0===h&&(h=!1),this.game=a,this.name=c,this.parent=b,this._frameData=d,this._frames=[],this._frames=this._frames.concat(f),this.delay=1e3/g,this.loop=h,this.loopCount=0,this.killOnComplete=!1,this.isFinished=!1,this.isPlaying=!1,this.isPaused=!1,this._pauseStartTime=0,this._frameIndex=0,this._frameDiff=0,this._frameSkip=1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.game.on("game/pause",this.onPause,this),this.game.on("game/resume",this.onResume,this),e.call(this)}var e=a(2);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.play=function(a,b,c){return"number"==typeof a&&(this.delay=1e3/a),"boolean"==typeof b&&(this.loop=b),void 0!==c&&(this.killOnComplete=c),this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.clock.time,this._timeNextFrame=this.game.clock.time+this.delay,this._frameIndex=0,this.updateCurrentFrame(!0),this.emit("start",this.parent,this),this.parent.emit("animationStart",this),this.parent.animations.currentAnim=this,this.parent.animations.currentFrame=this.currentFrame,this},d.prototype.restart=function(){this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.clock.time,this._timeNextFrame=this.game.clock.time+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.parent.setFrame(this.currentFrame),this.emit("start",this.parent,this),this.parent.emit("animationStart",this),this.parent.animations.currentAnim=this,this.parent.animations.currentFrame=this.currentFrame},d.prototype.setFrame=function(a,b){var c,d;if(void 0===b&&(b=!1),"string"==typeof a)for(d=0;d<this._frames.length;d++)this._frameData.getFrame(this._frames[d]).name===a&&(c=d);else if("number"==typeof a)if(b)c=a;else for(d=0;d<this._frames.length;d++)this._frames[d]===c&&(c=d);c&&(this._frameIndex=c-1,this._timeNextFrame=this.game.clock.time,this.update())},d.prototype.stop=function(a,b){void 0===a&&(a=!1),void 0===b&&(b=!1),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,a&&(this.currentFrame=this._frameData.getFrame(this._frames[0]),this.parent.setFrame(this.currentFrame)),b&&(this.parent.emit("animationComplete",this),this.emit("complete",this.parent,this))},d.prototype.onPause=function(){this.isPlaying&&(this._frameDiff=this._timeNextFrame-this.game.clock.time)},d.prototype.onResume=function(){this.isPlaying&&(this._timeNextFrame=this.game.clock.time+this._frameDiff)},d.prototype.update=function(){return this.isPaused?!1:this.isPlaying&&this.game.clock.time>=this._timeNextFrame?(this._frameSkip=1,this._frameDiff=this.game.clock.time-this._timeNextFrame,this._timeLastFrame=this.game.clock.time,this._frameDiff>this.delay&&(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay),this._timeNextFrame=this.game.clock.time+(this.delay-this._frameDiff),this._frameIndex+=this._frameSkip,this._frameIndex>=this._frames.length?this.loop?(this._frameIndex%=this._frames.length,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&this.parent.setFrame(this.currentFrame),this.loopCount++,!0):(this.complete(),!1):this.updateCurrentFrame()):!1},d.prototype.updateCurrentFrame=function(a){if(void 0===a&&(a=!1),!this._frameData)return!1;var b=this.currentFrame.index;return this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(a||!a&&b!==this.currentFrame.index)&&this.parent.setFrame(this.currentFrame),!0},d.prototype.next=function(a){void 0===a&&(a=1);var b=this._frameIndex+a;b>=this._frames.length&&(this.loop?b%=this._frames.length:b=this._frames.length-1),b!==this._frameIndex&&(this._frameIndex=b,this.updateCurrentFrame())},d.prototype.previous=function(a){void 0===a&&(a=1);var b=this._frameIndex-a;0>b&&(this.loop?b=this._frames.length+b:b++),b!==this._frameIndex&&(this._frameIndex=b,this.updateCurrentFrame())},d.prototype.updateFrameData=function(a){this._frameData=a,this.currentFrame=this._frameData?this._frameData.getFrame(this._frames[this._frameIndex%this._frames.length]):null},d.prototype.destroy=function(){this._frameData&&(this.game=null,this.parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1,this.removeAllListeners())},d.prototype.complete=function(){this._frameIndex=this._frames.length-1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,this.parent.on("animationComplete",this),this.on("complete",this.parent,this),this.killOnComplete&&this.parent.kill()},Object.defineProperty(d.prototype,"paused",{get:function(){return this.isPaused},set:function(a){this.isPaused=a,a?this._pauseStartTime=this.game.clock.time:this.isPlaying&&(this._timeNextFrame=this.game.clock.time+this.delay)}}),Object.defineProperty(d.prototype,"frameTotal",{get:function(){return this._frames.length}}),Object.defineProperty(d.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(a){this.currentFrame=this._frameData.getFrame(this._frames[a]),null!==this.currentFrame&&(this._frameIndex=a,this.parent.setFrame(this.currentFrame))}}),Object.defineProperty(d.prototype,"speed",{get:function(){return Math.round(1e3/this.delay)},set:function(a){a>=1&&(this.delay=1e3/a)}}),d.generateFrameNames=function(a,b,c,d){var e,f,g;if(void 0===d&&(d=""),e=[],f="",c>b)for(g=b;c>=g;g++)f=a+(""+g)+d,e.push(f);else for(g=b;g>=c;g--)f=a+(""+g)+d,e.push(f);return e},b.exports=d},{2:2}],5:[function(a,b,c){function d(a){this.sprite=a,this.game=a.game,this.currentFrame=null,this.currentAnim=null,this.updateIfVisible=!0,this.isLoaded=!1,this._frameData=null,this._anims={},this._outputFrames=[]}var e=a(4);d.prototype={loadFrameData:function(a,b){if(void 0===a)return!1;if(this.isLoaded)for(var c in this._anims)this._anims[c].updateFrameData(a);return this._frameData=a,void 0===b||null===b?this.frame=0:"string"==typeof b?this.frameName=b:this.frame=b,this.isLoaded=!0,!0},copyFrameData:function(a,b){if(this._frameData=a.clone(),this.isLoaded)for(var c in this._anims)this._anims[c].updateFrameData(this._frameData);return void 0===b||null===b?this.frame=0:"string"==typeof b?this.frameName=b:this.frame=b,this.isLoaded=!0,!0},add:function(a,b,c,d,f){return b=b||[],c=c||60,void 0===d&&(d=!1),void 0===f&&(f=b&&"number"==typeof b[0]?!0:!1),this._outputFrames=[],this._frameData.getFrameIndexes(b,f,this._outputFrames),this._anims[a]=new e(this.game,this.sprite,a,this._frameData,this._outputFrames,c,d),this.currentAnim=this._anims[a],this.sprite.tilingTexture&&(this.sprite.refreshTexture=!0),this._anims[a]},validateFrames:function(a,b){void 0===b&&(b=!0);for(var c=0;c<a.length;c++)if(b===!0){if(a[c]>this._frameData.total)return!1}else if(this._frameData.checkFrameName(a[c])===!1)return!1;return!0},play:function(a,b,c,d){return this._anims[a]?this.currentAnim===this._anims[a]?this.currentAnim.isPlaying===!1?(this.currentAnim.paused=!1,this.currentAnim.play(b,c,d)):this.currentAnim:(this.currentAnim&&this.currentAnim.isPlaying&&this.currentAnim.stop(),this.currentAnim=this._anims[a],this.currentAnim.paused=!1,this.currentFrame=this.currentAnim.currentFrame,this.currentAnim.play(b,c,d)):void 0},stop:function(a,b){void 0===b&&(b=!1),!this.currentAnim||"string"==typeof a&&a!==this.currentAnim.name||this.currentAnim.stop(b)},update:function(){return this.updateIfVisible&&!this.sprite.visible?!1:this.currentAnim&&this.currentAnim.update()?(this.currentFrame=this.currentAnim.currentFrame,!0):!1},next:function(a){this.currentAnim&&(this.currentAnim.next(a),this.currentFrame=this.currentAnim.currentFrame)},previous:function(a){this.currentAnim&&(this.currentAnim.previous(a),this.currentFrame=this.currentAnim.currentFrame)},getAnimation:function(a){return"string"==typeof a&&this._anims[a]?this._anims[a]:null},refreshFrame:function(){console.warn("refreshFrame is not implemented, see engine/animation/AnimationManager")},destroy:function(){var a=null;for(a in this._anims)this._anims.hasOwnProperty(a)&&this._anims[a].destroy();this._anims={},this._outputFrames=[],this._frameData=null,this.currentAnim=null,this.currentFrame=null,this.sprite=null,this.game=null}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"frameData",{get:function(){return this._frameData}}),Object.defineProperty(d.prototype,"frameTotal",{get:function(){return this._frameData.total}}),Object.defineProperty(d.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(a){this.currentAnim.paused=a}}),Object.defineProperty(d.prototype,"name",{get:function(){return this.currentAnim?this.currentAnim.name:void 0}}),Object.defineProperty(d.prototype,"frame",{get:function(){return this.currentFrame?this.currentFrame.index:void 0},set:function(a){"number"==typeof a&&this._frameData&&null!==this._frameData.getFrame(a)&&(this.currentFrame=this._frameData.getFrame(a),this.currentFrame&&this.sprite.setFrame(this.currentFrame)),"string"==typeof a&&this._frameData&&null!==this._frameData.getFrame(a)&&(this.currentFrame=this._frameData.getFrameByName(a),this.currentFrame&&this.sprite.setFrame(this.currentFrame))}}),Object.defineProperty(d.prototype,"frameName",{get:function(){return this.currentFrame?this.currentFrame.name:void 0},set:function(a){"string"==typeof a&&this._frameData&&null!==this._frameData.getFrameByName(a)?(this.currentFrame=this._frameData.getFrameByName(a),this.currentFrame&&(this._frameIndex=this.currentFrame.index,this.sprite.setFrame(this.currentFrame))):console.warn("Cannot set frameName: "+a)}}),b.exports=d},{4:4}],6:[function(a,b,c){var d=a(7),e=a(8);AnimationParser={spriteSheet:function(a,b,c,f,g,h,i){var j,k,l,m,n,o,p,q,r,s=b;if("string"==typeof b&&(s=a.cache.getImage(b)),null===s)return null;if(j=s.width,k=s.height,0>=c&&(c=Math.floor(-j/Math.min(-1,c))),0>=f&&(f=Math.floor(-k/Math.min(-1,f))),l=Math.floor((j-h)/(c+i)),m=Math.floor((k-h)/(f+i)),n=l*m,-1!==g&&(n=g),0===j||0===k||c>j||f>k||0===n)return console.warn("AnimationParser.spriteSheet: '"+b+"'s width/height zero or width/height < given frameWidth/frameHeight"),null;for(o=new e,p=h,q=h,r=0;n>r;r++)o.addFrame(new d(r,p,q,c,f,"")),p+=c+i,p+c>j&&(p=h,q+=f+i);return o},JSONData:function(a,b){var c,f,g,h;if(!b.frames)return console.warn("AnimationParser.JSONData: Invalid Texture Atlas JSON given, missing 'frames' array"),void console.log(b);for(c=new e,f=b.frames,h=0;h<f.length;h++)g=c.addFrame(new d(h,f[h].frame.x,f[h].frame.y,f[h].frame.w,f[h].frame.h,f[h].filename)),f[h].trimmed&&g.setTrim(f[h].trimmed,f[h].sourceSize.w,f[h].sourceSize.h,f[h].spriteSourceSize.x,f[h].spriteSourceSize.y,f[h].spriteSourceSize.w,f[h].spriteSourceSize.h);return c},JSONDataHash:function(a,b){var c,f,g,h,i;if(!b.frames)return console.warn("AnimationParser.JSONDataHash: Invalid Texture Atlas JSON given, missing 'frames' object"),void console.log(b);c=new e,f=b.frames,h=0;for(i in f)g=c.addFrame(new d(h,f[i].frame.x,f[i].frame.y,f[i].frame.w,f[i].frame.h,i)),f[i].trimmed&&g.setTrim(f[i].trimmed,f[i].sourceSize.w,f[i].sourceSize.h,f[i].spriteSourceSize.x,f[i].spriteSourceSize.y,f[i].spriteSourceSize.w,f[i].spriteSourceSize.h),h++;return c}},b.exports=AnimationParser},{7:7,8:8}],7:[function(a,b,c){(function(c){function d(a,b,d,e,g,h){this.index=a,this.x=b,this.y=d,this.width=e,this.height=g,this.name=h,this.centerX=c.Math.floor(e/2),this.centerY=c.Math.floor(g/2),this.distance=f.distance(0,0,e,g),this.rotated=!1,this.rotationDirection="cw",this.trimmed=!1,this.sourceSizeW=e,this.sourceSizeH=g,this.spriteSourceSizeX=0,this.spriteSourceSizeY=0,this.spriteSourceSizeW=0,this.spriteSourceSizeH=0,this.right=this.x+this.width,this.bottom=this.y+this.height}var e=a(46),f=a(76);d.prototype={resize:function(a,b){this.width=a,this.height=b,this.centerX=c.Math.floor(a/2),this.centerY=c.Math.floor(b/2),this.distance=f.distance(0,0,a,b),this.sourceSizeW=a,this.sourceSizeH=b,this.right=this.x+a,this.bottom=this.y+b},setTrim:function(a,b,d,e,f,g,h){this.trimmed=a,a&&(this.sourceSizeW=b,this.sourceSizeH=d,this.centerX=c.Math.floor(b/2),this.centerY=c.Math.floor(d/2),this.spriteSourceSizeX=e,this.spriteSourceSizeY=f,this.spriteSourceSizeW=g,this.spriteSourceSizeH=h)},clone:function(){var a,b=new d(this.index,this.x,this.y,this.width,this.height,this.name);for(a in this)this.hasOwnProperty(a)&&(b[a]=this[a]);return b},getRect:function(a){return void 0===a?a=new e(this.x,this.y,this.width,this.height):a.setTo(this.x,this.y,this.width,this.height),a}},d.prototype.constructor=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{46:46,76:76}],8:[function(a,b,c){function d(){this._frames=[],this._frameNames=[]}d.prototype={addFrame:function(a){return a.index=this._frames.length,this._frames.push(a),""!==a.name&&(this._frameNames[a.name]=a.index),a},getFrame:function(a){return a>=this._frames.length&&(a=0),this._frames[a]},getFrameByName:function(a){return"number"==typeof this._frameNames[a]?this._frames[this._frameNames[a]]:null},checkFrameName:function(a){return null==this._frameNames[a]?!1:!0},clone:function(){var a,b,c=new d;for(a=0;a<this._frames.length;a++)c._frames.push(this._frames[a].clone());for(b in this._frameNames)this._frameNames.hasOwnProperty(b)&&c._frameNames.push(this._frameNames[b]);return c},getFrameRange:function(a,b,c){void 0===c&&(c=[]);for(var d=a;b>=d;d++)c.push(this._frames[d]);return c},getFrames:function(a,b,c){var d;if(void 0===b&&(b=!0),void 0===c&&(c=[]),void 0===a||0===a.length)for(d=0;d<this._frames.length;d++)c.push(this._frames[d]);else for(d=0;d<a.length;d++)b?c.push(this.getFrame(a[d])):c.push(this.getFrameByName(a[d]));return c},getFrameIndexes:function(a,b,c){var d;if(void 0===b&&(b=!0),void 0===c&&(c=[]),void 0===a||0===a.length)for(d=0;d<this._frames.length;d++)c.push(this._frames[d].index);else for(d=0;d<a.length;d++)b?c.push(this._frames[a[d]].index):this.getFrameByName(a[d])&&c.push(this.getFrameByName(a[d]).index);return c}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"total",{get:function(){return this._frames.length}}),b.exports=d},{}],9:[function(a,b,c){var d={VERSION:a(3).version,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,TILEMAPSPRITE:27,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,POINTER:19,STRIP:20,CIRCLE:21,RECTANGLE:22,LINE:23,MATRIX:24,POINT:25,ROUNDEDRECTANGLE:26,Loader:{TEXTURE_ATLAS_JSON_ARRAY:0,TEXTURE_ATLAS_JSON_HASH:1,TEXTURE_ATLAS_XML_STARLING:2},BlendMode:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16}};b.exports=d},{3:3}],10:[function(a,b,c){function d(a,b){this.parent=a,this.game=a.game,this.event=null,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1,this.value=0}d.prototype={start:function(a,b){this.isDown||(this.isDown=!0,this.isUp=!1,this.timeDown=this.game.clock.time,this.event=a,this.value=b,a&&(this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey))},stop:function(a,b){this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.event=a,this.value=b,a&&(this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey))},reset:function(){this.timeDown=this.game.clock.time,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1},destroy:function(){this.parent=null,this.game=null}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"duration",{get:function(){return this.isUp?-1:this.game.clock.time-this.timeDown}}),b.exports=d},{}],11:[function(a,b,c){function d(a){this.game=a,this.hitCanvas=null,this.hitContext=null,this.moveCallbacks=[],this.pollRate=1,this.enabled=!0,this.multiInputOverride=d.MOUSE_TOUCH_COMBINE,this.position=null,this.speed=null,this.circle=null,this.scale=null,this.maxPointers=-1,this.tapRate=200,this.doubleTapRate=300,this.holdRate=2e3,this.justPressedRate=200,this.justReleasedRate=200,this.recordPointerHistory=!1,this.recordRate=100,this.recordLimit=100,this.activePointer=null,this.mousePointer=null,this.mouse=null,this.keyboard=null,this.minPriorityID=0,this.resetLocked=!1,this.interactiveItems=new k,this._pollCounter=0,this._oldPosition=null,this._localPoint=new j,this._x=0,this._y=0,g.call(this)}var e=a("pixi"),f=a(16),g=a(2),h=a(15),i=a(14),j=a(45),k=a(72);d.MOUSE_OVERRIDES_TOUCH=0,d.TOUCH_OVERRIDES_MOUSE=1,d.MOUSE_TOUCH_COMBINE=2,d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.mousePointer=new f(this.game,0,f.MODE.CURSOR),this.mouse=new h(this.game),this.keyboard=new i(this.game),this.keyboard.addCallbacks(this,function(a,b){this.emit("keydown",a,b)},function(a,b){this.emit("keyup",a,b)},function(a,b){this.emit("keypress",a,b)}),this.scale=new j(1,1),this.speed=new j,this.position=new j,this._oldPosition=new j,this.activePointer=this.mousePointer,this.hitCanvas=document.createElement("canvas"),this.hitCanvas.width=1,this.hitCanvas.height=1,this.hitContext=this.hitCanvas.getContext("2d"),this.mouse.start(),this.mousePointer.active=!0,this.keyboard.start();var a=this;this._onClickTrampoline=function(b){a.onClickTrampoline(b)},this.game.canvas.addEventListener("click",this._onClickTrampoline,!1)},d.prototype.destroy=function(){this.mouse.stop(),this.keyboard.stop(),this.moveCallbacks=[],this.game.canvas.removeEventListener("click",this._onClickTrampoline)},d.prototype.addMoveCallback=function(a,b){this.moveCallbacks.push({callback:a,context:b})},d.prototype.deleteMoveCallback=function(a,b){for(var c=this.moveCallbacks.length;c--;)if(this.moveCallbacks[c].callback===a&&this.moveCallbacks[c].context===b)return void this.moveCallbacks.splice(c,1)},d.prototype.update=function(){return this.keyboard.update(),this.pollRate>0&&this._pollCounter<this.pollRate?void this._pollCounter++:(this.speed.x=this.position.x-this._oldPosition.x,this.speed.y=this.position.y-this._oldPosition.y,this._oldPosition.copyFrom(this.position),this.mousePointer.update(),void(this._pollCounter=0))},d.prototype.reset=function(a){this.game.isBooted&&!this.resetLocked&&(void 0===a&&(a=!1),this.mousePointer.reset(),this.keyboard.reset(a),"none"!==this.game.canvas.style.cursor&&(this.game.canvas.style.cursor="inherit"),a&&(this.removeAllListeners(),this.moveCallbacks=[]),this._pollCounter=0)},d.prototype.resetSpeed=function(a,b){this._oldPosition.setTo(a,b),this.speed.setTo(0,0)},d.prototype.getLocalPosition=function(a,b,c){var d,e;return void 0===c&&(c=new j),d=a.worldTransform,e=1/(d.a*d.d+d.c*-d.b),c.setTo(d.d*e*b.x+-d.c*e*b.y+(d.ty*d.c-d.tx*d.d)*e,d.a*e*b.y+-d.b*e*b.x+(-d.ty*d.a+d.tx*d.b)*e)},d.prototype.hitTest=function(a,b,c){var d,f,g,h,i,j,k;if(!a.worldVisible)return!1;if(this.getLocalPosition(a,b,this._localPoint),c.copyFrom(this._localPoint),a.hitArea&&a.hitArea.contains)return a.hitArea.contains(this._localPoint.x,this._localPoint.y);if(a instanceof e.Sprite){if(d=a.texture.frame.width,f=a.texture.frame.height,g=-d*a.anchor.x,this._localPoint.x>=g&&this._localPoint.x<g+d&&(h=-f*a.anchor.y,this._localPoint.y>=h&&this._localPoint.y<h+f))return!0}else if(a instanceof e.Graphics)for(i=0;i<a.graphicsData.length;i++)if(j=a.graphicsData[i],j.fill&&j.shape&&j.shape.contains(this._localPoint.x,this._localPoint.y))return!0;for(i=0,k=a.children.length;k>i;i++)if(this.hitTest(a.children[i],b,c))return!0;return!1},d.prototype.onClickTrampoline=function(){this.activePointer.processClickTrampolines()},Object.defineProperty(d.prototype,"x",{get:function(){return this._x},set:function(a){this._x=Math.floor(a)}}),Object.defineProperty(d.prototype,"y",{get:function(){return this._y},set:function(a){this._y=Math.floor(a)}}),Object.defineProperty(d.prototype,"pollLocked",{get:function(){return this.pollRate>0&&this._pollCounter<this.pollRate}}),Object.defineProperty(d.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}}),Object.defineProperty(d.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}}),b.exports=d},{14:14,15:15,16:16,2:2,45:45,72:72,pixi:"pixi"}],12:[function(a,b,c){function d(a){this.sprite=a,this.game=a.game,this.enabled=!1,this.checked=!1,this.priorityID=0,this.useHandCursor=!1,this._setHandCursor=!1,this.isDragged=!1,this.allowHorizontalDrag=!0,this.allowVerticalDrag=!0,this.bringToTop=!1,this.snapOffset=null,this.snapOnDrag=!1,this.snapOnRelease=!1,this.snapX=0,this.snapY=0,this.snapOffsetX=0,this.snapOffsetY=0,this.pixelPerfectOver=!1,this.pixelPerfectClick=!1,this.pixelPerfectAlpha=255,this.draggable=!1,this.boundsRect=null,this.boundsSprite=null,this.consumePointerEvent=!1,this.scaleLayer=!1,this.dragFromCenter=!1,this.dragStartPoint=new e,this.dragOffset=new e,this.snapPoint=new e,this._dragPoint=new e,this._tempPoint=new e,this._dragPhase=!1,this._wasEnabled=!1,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1})}var e=a(45);d.prototype={start:function(a,b){if(void 0===b&&(b=!1),a=a||0,this.enabled===!1){this.game.input.interactiveItems.add(this),this.useHandCursor=b,this.priorityID=a;for(var c=0;1>c;c++)this._pointerData[c]={id:c,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1};this.snapOffset=new e,this.enabled=!0,this._wasEnabled=!0}return this.flagged=!1,this.sprite},reset:function(){this.enabled=!1,this.flagged=!1;for(var a=0;1>a;a++)this._pointerData[a]={id:a,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1}},stop:function(){this.enabled!==!1&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},destroy:function(){this.sprite&&(this._setHandCursor&&(this.game.canvas.style.cursor="",this._setHandCursor=!1),this.enabled=!1,this.game.input.interactiveItems.remove(this),this._pointerData.length=0,this.boundsRect=null,this.boundsSprite=null,this.sprite=null)},validForInput:function(a,b,c){return void 0===c&&(c=!0),!this.enabled||0===this.sprite.scale.x||0===this.sprite.scale.y||this.priorityID<this.game.input.minPriorityID?!1:(c||!this.pixelPerfectClick&&!this.pixelPerfectOver)&&(this.priorityID>a||this.priorityID===a&&this.sprite.renderOrderID<b)?!0:!1},isPixelPerfect:function(){return this.pixelPerfectClick||this.pixelPerfectOver},pointerX:function(a){return a=a||0,this._pointerData[a].x},pointerY:function(a){return a=a||0,this._pointerData[a].y},pointerDown:function(a){return a=a||0,this._pointerData[a].isDown},pointerUp:function(a){return a=a||0,this._pointerData[a].isUp},pointerTimeDown:function(a){return a=a||0,this._pointerData[a].timeDown},pointerTimeUp:function(a){return a=a||0,this._pointerData[a].timeUp},pointerOver:function(a){if(this.enabled){if(void 0!==a)return this._pointerData[a].isOver;for(var b=0;1>b;b++)if(this._pointerData[b].isOver)return!0}return!1},pointerOut:function(a){if(this.enabled){if(void 0!==a)return this._pointerData[a].isOut;for(var b=0;1>b;b++)if(this._pointerData[b].isOut)return!0}return!1},pointerTimeOver:function(a){return a=a||0,this._pointerData[a].timeOver},pointerTimeOut:function(a){return a=a||0,this._pointerData[a].timeOut},pointerDragged:function(a){return a=a||0,this._pointerData[a].isDragged},checkPointerDown:function(a,b){return a.isDown&&this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&this.game.input.hitTest(this.sprite,a,this._tempPoint)?(void 0===b&&(b=!1),!b&&this.pixelPerfectClick?this.checkPixel(this._tempPoint.x,this._tempPoint.y):!0):!1},checkPointerOver:function(a,b){return this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&this.game.input.hitTest(this.sprite,a,this._tempPoint)?(void 0===b&&(b=!1),!b&&this.pixelPerfectOver?this.checkPixel(this._tempPoint.x,this._tempPoint.y):!0):!1},checkPixel:function(a,b,c){var d;if(this.sprite.texture.baseTexture.source){if(null===a&&null===b&&(this.game.input.getLocalPosition(this.sprite,c,this._tempPoint),a=this._tempPoint.x,b=this._tempPoint.y),0!==this.sprite.anchor.x&&(a-=-this.sprite.texture.frame.width*this.sprite.anchor.x),0!==this.sprite.anchor.y&&(b-=-this.sprite.texture.frame.height*this.sprite.anchor.y),a+=this.sprite.texture.frame.x,b+=this.sprite.texture.frame.y,this.sprite.texture.trim&&(a-=this.sprite.texture.trim.x,b-=this.sprite.texture.trim.y,a<this.sprite.texture.crop.x||a>this.sprite.texture.crop.right||b<this.sprite.texture.crop.y||b>this.sprite.texture.crop.bottom))return this._dx=a,this._dy=b,!1;if(this._dx=a,this._dy=b,this.game.input.hitContext.clearRect(0,0,1,1),this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,a,b,1,1,0,0,1,1),d=this.game.input.hitContext.getImageData(0,0,1,1),d.data[3]>=this.pixelPerfectAlpha)return!0}return!1},update:function(a){return null!==this.sprite&&void 0!==this.sprite.parent?this.enabled&&this.sprite.visible&&this.sprite.parent.visible?this.draggable&&this._draggedPointerID===a.id?this.updateDrag(a):this._pointerData[a.id].isOver?this.checkPointerOver(a)?(this._pointerData[a.id].x=a.x-this.sprite.x,this._pointerData[a.id].y=a.y-this.sprite.y,!0):(this._pointerOutHandler(a),!1):void 0:(this._pointerOutHandler(a),!1):void 0},_pointerOverHandler:function(a){if(null!==this.sprite){var b=this._pointerData[a.id];(b.isOver===!1||a.dirty)&&(b.isOver=!0,b.isOut=!1,b.timeOver=this.game.clock.time,b.x=a.x-this.sprite.x,b.y=a.y-this.sprite.y,this.useHandCursor&&b.isDragged===!1&&(this.game.canvas.style.cursor="pointer",this._setHandCursor=!0),this.sprite&&this.sprite.emit("inputOver",this.sprite,a))}},_pointerOutHandler:function(a){if(null!==this.sprite){var b=this._pointerData[a.id];b.isOver=!1,b.isOut=!0,b.timeOut=this.game.clock.time,this.useHandCursor&&b.isDragged===!1&&(this.game.canvas.style.cursor="",this._setHandCursor=!1),this.sprite&&this.sprite.emit("inputOut",this.sprite,a)}},_touchedHandler:function(a){if(null!==this.sprite){var b=this._pointerData[a.id];if(!b.isDown&&b.isOver){if(this.pixelPerfectClick&&!this.checkPixel(null,null,a))return;b.isDown=!0,b.isUp=!1,b.timeDown=this.game.clock.time,this.sprite&&this.sprite.emit("inputDown",this.sprite,a),a.dirty=!0,this.draggable&&this.isDragged===!1&&this.startDrag(a),this.bringToTop&&this.sprite.bringToTop()}return this.consumePointerEvent}},_releasedHandler:function(a){var b,c;null!==this.sprite&&(b=this._pointerData[a.id],b.isDown&&a.isUp&&(b.isDown=!1,b.isUp=!0,b.timeUp=this.game.clock.time,b.downDuration=b.timeUp-b.timeDown,c=this.checkPointerOver(a),this.sprite&&(this.sprite.emit("inputUp",this.sprite,a,c),c&&(c=this.checkPointerOver(a))),
b.isOver=c,!c&&this.useHandCursor&&(this.game.canvas.style.cursor="",this._setHandCursor=!1),a.dirty=!0,this.draggable&&this.isDragged&&this._draggedPointerID===a.id&&this.stopDrag(a)))},updateDrag:function(a){var b,c;return a.isUp?(this.stopDrag(a),!1):(b=this.globalToLocalX(a.x)+this._dragPoint.x+this.dragOffset.x,c=this.globalToLocalY(a.y)+this._dragPoint.y+this.dragOffset.y,this.sprite.fixedToCamera?(this.allowHorizontalDrag&&(this.sprite.cameraOffset.x=b),this.allowVerticalDrag&&(this.sprite.cameraOffset.y=c),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.cameraOffset.x,this.sprite.cameraOffset.y))):(this.allowHorizontalDrag&&(this.sprite.x=b),this.allowVerticalDrag&&(this.sprite.y=c),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.x,this.sprite.y))),this.sprite.emit("dragUpdate",this.sprite,a,b,c,this.snapPoint),!0)},justOver:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isOver&&this.overDuration(a)<b},justOut:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isOut&&this.game.clock.time-this._pointerData[a].timeOut<b},justPressed:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isDown&&this.downDuration(a)<b},justReleased:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isUp&&this.game.clock.time-this._pointerData[a].timeUp<b},overDuration:function(a){return a=a||0,this._pointerData[a].isOver?this.game.clock.time-this._pointerData[a].timeOver:-1},downDuration:function(a){return a=a||0,this._pointerData[a].isDown?this.game.clock.time-this._pointerData[a].timeDown:-1},enableDrag:function(a,b,c,d,f,g){void 0===a&&(a=!1),void 0===b&&(b=!1),void 0===c&&(c=!1),void 0===d&&(d=255),void 0===f&&(f=null),void 0===g&&(g=null),this._dragPoint=new e,this.draggable=!0,this.bringToTop=b,this.dragOffset=new e,this.dragFromCenter=a,this.pixelPerfectClick=c,this.pixelPerfectAlpha=d,f&&(this.boundsRect=f),g&&(this.boundsSprite=g)},disableDrag:function(){if(this._pointerData)for(var a=0;1>a;a++)this._pointerData[a].isDragged=!1;this.draggable=!1,this.isDragged=!1,this._draggedPointerID=-1},startDrag:function(a){var b,c=this.sprite.x,d=this.sprite.y;this.isDragged=!0,this._draggedPointerID=a.id,this._pointerData[a.id].isDragged=!0,this.sprite.fixedToCamera?this.dragFromCenter?(this.sprite.centerOn(a.x,a.y),this._dragPoint.setTo(this.sprite.cameraOffset.x-a.x,this.sprite.cameraOffset.y-a.y)):this._dragPoint.setTo(this.sprite.cameraOffset.x-a.x,this.sprite.cameraOffset.y-a.y):(this.dragFromCenter&&(b=this.sprite.getBounds(),this.sprite.x=this.globalToLocalX(a.x)+(this.sprite.x-b.centerX),this.sprite.y=this.globalToLocalY(a.y)+(this.sprite.y-b.centerY)),this._dragPoint.setTo(this.sprite.x-this.globalToLocalX(a.x),this.sprite.y-this.globalToLocalY(a.y))),this.updateDrag(a),this.bringToTop&&(this._dragPhase=!0,this.sprite.bringToTop()),this.dragStartPoint.set(c,d),this.sprite.emit("dragStart",this.sprite,a,c,d)},globalToLocalX:function(a){return this.scaleLayer&&(a-=this.game.scale.grid.boundsFluid.x,a*=this.game.scale.grid.scaleFluidInversed.x),a},globalToLocalY:function(a){return this.scaleLayer&&(a-=this.game.scale.grid.boundsFluid.y,a*=this.game.scale.grid.scaleFluidInversed.y),a},stopDrag:function(a){this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[a.id].isDragged=!1,this._dragPhase=!1,this.snapOnRelease&&(this.sprite.fixedToCamera?(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY):(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),this.sprite.emit("dragStop",this.sprite,a),this.checkPointerOver(a)===!1&&this._pointerOutHandler(a)},setDragLock:function(a,b){void 0===a&&(a=!0),void 0===b&&(b=!0),this.allowHorizontalDrag=a,this.allowVerticalDrag=b},enableSnap:function(a,b,c,d,e,f){void 0===c&&(c=!0),void 0===d&&(d=!1),void 0===e&&(e=0),void 0===f&&(f=0),this.snapX=a,this.snapY=b,this.snapOffsetX=e,this.snapOffsetY=f,this.snapOnDrag=c,this.snapOnRelease=d},disableSnap:function(){this.snapOnDrag=!1,this.snapOnRelease=!1},checkBoundsRect:function(){this.sprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsRect.left?this.sprite.cameraOffset.x=this.boundsRect.left:this.sprite.cameraOffset.x+this.sprite.width>this.boundsRect.right&&(this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width),this.sprite.cameraOffset.y<this.boundsRect.top?this.sprite.cameraOffset.y=this.boundsRect.top:this.sprite.cameraOffset.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height)):(this.sprite.left<this.boundsRect.left?this.sprite.x=this.boundsRect.x+this.sprite.offsetX:this.sprite.right>this.boundsRect.right&&(this.sprite.x=this.boundsRect.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsRect.top?this.sprite.y=this.boundsRect.top+this.sprite.offsetY:this.sprite.bottom>this.boundsRect.bottom&&(this.sprite.y=this.boundsRect.bottom-(this.sprite.height-this.sprite.offsetY)))},checkBoundsSprite:function(){this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsSprite.cameraOffset.x?this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsSprite.cameraOffset.x+this.boundsSprite.width&&(this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x+this.boundsSprite.width-this.sprite.width),this.sprite.cameraOffset.y<this.boundsSprite.cameraOffset.y?this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y:this.sprite.cameraOffset.y+this.sprite.height>this.boundsSprite.cameraOffset.y+this.boundsSprite.height&&(this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y+this.boundsSprite.height-this.sprite.height)):(this.sprite.left<this.boundsSprite.left?this.sprite.x=this.boundsSprite.left+this.sprite.offsetX:this.sprite.right>this.boundsSprite.right&&(this.sprite.x=this.boundsSprite.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsSprite.top?this.sprite.y=this.boundsSprite.top+this.sprite.offsetY:this.sprite.bottom>this.boundsSprite.bottom&&(this.sprite.y=this.boundsSprite.bottom-(this.sprite.height-this.sprite.offsetY)))}},d.prototype.constructor=d,b.exports=d},{45:45}],13:[function(a,b,c){function d(a,b){this.game=a,this._enabled=!0,this.event=null,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.timeDown=0,this.duration=0,this.timeUp=-2500,this.repeats=0,this.keyCode=b,this.onHoldCallback=null,this.onHoldContext=null,this._justDown=!1,this._justUp=!1}d.prototype={update:function(){this._enabled&&this.isDown&&(this.duration=this.game.clock.time-this.timeDown,this.repeats++,this.onHoldCallback&&this.onHoldCallback.call(this.onHoldContext,this))},processKeyDown:function(a){this._enabled&&(this.event=a,this.isDown||(this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.isDown=!0,this.isUp=!1,this.timeDown=this.game.clock.time,this.duration=0,this.repeats=0,this._justDown=!0))},processKeyUp:function(a){this._enabled&&(this.event=a,this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.duration=this.game.clock.time-this.timeDown,this._justUp=!0))},reset:function(a){void 0===a&&(a=!0),this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.duration=0,this._enabled=!0,this._justDown=!1,this._justUp=!1,a&&(this.onDown.removeAll(),this.onUp.removeAll(),this.onHoldCallback=null,this.onHoldContext=null)},downDuration:function(a){return void 0===a&&(a=50),this.isDown&&this.duration<a},upDuration:function(a){return void 0===a&&(a=50),!this.isDown&&this.game.clock.time-this.timeUp<a}},Object.defineProperty(d.prototype,"justDown",{get:function(){var a=this._justDown;return this._justDown=!1,a}}),Object.defineProperty(d.prototype,"justUp",{get:function(){var a=this._justUp;return this._justUp=!1,a}}),Object.defineProperty(d.prototype,"enabled",{get:function(){return this._enabled},set:function(a){a=!!a,a!==this._enabled&&(a||this.reset(!1),this._enabled=a)}}),d.prototype.constructor=d,b.exports=d},{}],14:[function(a,b,c){(function(c){function d(a){this.game=a,this.enabled=!0,this.event=null,this.pressEvent=null,this.callbackContext=this,this.onDownCallback=null,this.onPressCallback=null,this.onUpCallback=null,this._keys=[],this._capture=[],this._onKeyDown=null,this._onKeyPress=null,this._onKeyUp=null,this._i=0,this._k=0}var e=a(13);d.prototype={addCallbacks:function(a,b,c,d){this.callbackContext=a,void 0!==b&&null!==b&&(this.onDownCallback=b),void 0!==c&&null!==c&&(this.onUpCallback=c),void 0!==d&&null!==d&&(this.onPressCallback=d)},addKey:function(a){return this._keys[a]||(this._keys[a]=new e(this.game,a),this.addKeyCapture(a)),this._keys[a]},addKeys:function(a){var b,c={};for(b in a)c[b]=this.addKey(a[b]);return c},removeKey:function(a){this._keys[a]&&(this._keys[a]=null,this.removeKeyCapture(a))},createCursorKeys:function(){return this.addKeys({up:d.UP,down:d.DOWN,left:d.LEFT,right:d.RIGHT})},start:function(){if(null===this._onKeyDown){var a=this;this._onKeyDown=function(b){return a.processKeyDown(b)},this._onKeyUp=function(b){return a.processKeyUp(b)},this._onKeyPress=function(b){return a.processKeyPress(b)},c.addEventListener("keydown",this._onKeyDown,!1),c.addEventListener("keyup",this._onKeyUp,!1),c.addEventListener("keypress",this._onKeyPress,!1)}},stop:function(){c.removeEventListener("keydown",this._onKeyDown),c.removeEventListener("keyup",this._onKeyUp),c.removeEventListener("keypress",this._onKeyPress),this._onKeyDown=null,this._onKeyUp=null,this._onKeyPress=null},destroy:function(){this.stop(),this.clearCaptures(),this._keys.length=0,this._i=0},addKeyCapture:function(a){if("object"==typeof a)for(var b in a)this._capture[a[b]]=!0;else this._capture[a]=!0},removeKeyCapture:function(a){delete this._capture[a]},clearCaptures:function(){this._capture={}},update:function(){for(this._i=this._keys.length;this._i--;)this._keys[this._i]&&this._keys[this._i].update()},processKeyDown:function(a){this.event=a,this.game.input.enabled&&this.enabled&&(this._capture[a.keyCode]&&a.preventDefault(),this._keys[a.keyCode]||(this._keys[a.keyCode]=new e(this.game,a.keyCode)),this._keys[a.keyCode].processKeyDown(a),this._k=a.keyCode,this.onDownCallback&&this.onDownCallback.call(this.callbackContext,a))},processKeyPress:function(a){this.pressEvent=a,this.game.input.enabled&&this.enabled&&this.onPressCallback&&this.onPressCallback.call(this.callbackContext,String.fromCharCode(a.charCode),a)},processKeyUp:function(a){this.event=a,this.game.input.enabled&&this.enabled&&(this._capture[a.keyCode]&&a.preventDefault(),this._keys[a.keyCode]||(this._keys[a.keyCode]=new e(this.game,a.keyCode)),this._keys[a.keyCode].processKeyUp(a),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,a))},reset:function(a){void 0===a&&(a=!0),this.event=null;for(var b=this._keys.length;b--;)this._keys[b]&&this._keys[b].reset(a)},downDuration:function(a,b){return this._keys[a]?this._keys[a].downDuration(b):null},upDuration:function(a,b){return this._keys[a]?this._keys[a].upDuration(b):null},isDown:function(a){return this._keys[a]?this._keys[a].isDown:null}},Object.defineProperty(d.prototype,"lastChar",{get:function(){return 32===this.event.charCode?"":String.fromCharCode(this.pressEvent.charCode)}}),Object.defineProperty(d.prototype,"lastKey",{get:function(){return this._keys[this._k]}}),d.prototype.constructor=d,d.A="A".charCodeAt(0),d.B="B".charCodeAt(0),d.C="C".charCodeAt(0),d.D="D".charCodeAt(0),d.E="E".charCodeAt(0),d.F="F".charCodeAt(0),d.G="G".charCodeAt(0),d.H="H".charCodeAt(0),d.I="I".charCodeAt(0),d.J="J".charCodeAt(0),d.K="K".charCodeAt(0),d.L="L".charCodeAt(0),d.M="M".charCodeAt(0),d.N="N".charCodeAt(0),d.O="O".charCodeAt(0),d.P="P".charCodeAt(0),d.Q="Q".charCodeAt(0),d.R="R".charCodeAt(0),d.S="S".charCodeAt(0),d.T="T".charCodeAt(0),d.U="U".charCodeAt(0),d.V="V".charCodeAt(0),d.W="W".charCodeAt(0),d.X="X".charCodeAt(0),d.Y="Y".charCodeAt(0),d.Z="Z".charCodeAt(0),d.ZERO="0".charCodeAt(0),d.ONE="1".charCodeAt(0),d.TWO="2".charCodeAt(0),d.THREE="3".charCodeAt(0),d.FOUR="4".charCodeAt(0),d.FIVE="5".charCodeAt(0),d.SIX="6".charCodeAt(0),d.SEVEN="7".charCodeAt(0),d.EIGHT="8".charCodeAt(0),d.NINE="9".charCodeAt(0),d.NUMPAD_0=96,d.NUMPAD_1=97,d.NUMPAD_2=98,d.NUMPAD_3=99,d.NUMPAD_4=100,d.NUMPAD_5=101,d.NUMPAD_6=102,d.NUMPAD_7=103,d.NUMPAD_8=104,d.NUMPAD_9=105,d.NUMPAD_MULTIPLY=106,d.NUMPAD_ADD=107,d.NUMPAD_ENTER=108,d.NUMPAD_SUBTRACT=109,d.NUMPAD_DECIMAL=110,d.NUMPAD_DIVIDE=111,d.F1=112,d.F2=113,d.F3=114,d.F4=115,d.F5=116,d.F6=117,d.F7=118,d.F8=119,d.F9=120,d.F10=121,d.F11=122,d.F12=123,d.F13=124,d.F14=125,d.F15=126,d.COLON=186,d.EQUALS=187,d.COMMA=188,d.UNDERSCORE=189,d.PERIOD=190,d.QUESTION_MARK=191,d.TILDE=192,d.OPEN_BRACKET=219,d.BACKWARD_SLASH=220,d.CLOSED_BRACKET=221,d.QUOTES=222,d.BACKSPACE=8,d.TAB=9,d.CLEAR=12,d.ENTER=13,d.SHIFT=16,d.CONTROL=17,d.ALT=18,d.CAPS_LOCK=20,d.ESC=27,d.SPACEBAR=32,d.PAGE_UP=33,d.PAGE_DOWN=34,d.END=35,d.HOME=36,d.LEFT=37,d.UP=38,d.RIGHT=39,d.DOWN=40,d.PLUS=43,d.MINUS=44,d.INSERT=45,d.DELETE=46,d.HELP=47,d.NUM_LOCK=144,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{13:13}],15:[function(a,b,c){(function(c){function d(a){this.game=a,this.input=a.input,this.callbackContext=this.game,this.mouseDownCallback=null,this.mouseUpCallback=null,this.mouseOutCallback=null,this.mouseOverCallback=null,this.mouseWheelCallback=null,this.capture=!1,this.button=-1,this.wheelDelta=0,this.enabled=!0,this.locked=!1,this.stopOnGameOut=!1,this.event=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null,this._onMouseOut=null,this._onMouseOver=null,this._onMouseWheel=null,this._wheelEvent=null}function e(a,b){this._scaleFactor=a,this._deltaMode=b,this.originalEvent=null}var f=a(56),g=a(76);d.NO_BUTTON=-1,d.LEFT_BUTTON=0,d.MIDDLE_BUTTON=1,d.RIGHT_BUTTON=2,d.BACK_BUTTON=3,d.FORWARD_BUTTON=4,d.WHEEL_UP=1,d.WHEEL_DOWN=-1,d.prototype={start:function(){var a,b,d;f.android&&f.chrome===!1||null===this._onMouseDown&&(a=this,this._onMouseDown=function(b){return a.onMouseDown(b)},this._onMouseMove=function(b){return a.onMouseMove(b)},this._onMouseUp=function(b){return a.onMouseUp(b)},this._onMouseUpGlobal=function(b){return a.onMouseUpGlobal(b)},this._onMouseOut=function(b){return a.onMouseOut(b)},this._onMouseOver=function(b){return a.onMouseOver(b)},this._onMouseWheel=function(b){return a.onMouseWheel(b)},b=this.game.canvas,b.addEventListener("mousedown",this._onMouseDown,!0),b.addEventListener("mousemove",this._onMouseMove,!0),b.addEventListener("mouseup",this._onMouseUp,!0),c.addEventListener("mouseup",this._onMouseUpGlobal,!0),b.addEventListener("mouseover",this._onMouseOver,!0),b.addEventListener("mouseout",this._onMouseOut,!0),d=f.wheelEvent,d&&(b.addEventListener(d,this._onMouseWheel,!0),"mousewheel"===d?this._wheelEvent=new e(-1/40,1):"DOMMouseScroll"===d&&(this._wheelEvent=new e(1,1))))},onMouseDown:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseDownCallback&&this.mouseDownCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.start(a))},onMouseMove:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseMoveCallback&&this.mouseMoveCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.move(a))},onMouseUp:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.stop(a))},onMouseUpGlobal:function(a){this.input.mousePointer.withinGame||(this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,a),a.identifier=0,this.input.mousePointer.stop(a))},onMouseOut:function(a){this.event=a,this.capture&&a.preventDefault(),this.input.mousePointer.withinGame=!1,this.mouseOutCallback&&this.mouseOutCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&this.stopOnGameOut&&(a.identifier=0,this.input.mousePointer.stop(a))},onMouseOver:function(a){this.event=a,this.capture&&a.preventDefault(),this.input.mousePointer.withinGame=!0,this.mouseOverCallback&&this.mouseOverCallback.call(this.callbackContext,a)},onMouseWheel:function(a){this._wheelEvent&&(a=this._wheelEvent.bindEvent(a)),this.event=a,this.capture&&a.preventDefault(),this.wheelDelta=g.clamp(-a.deltaY,-1,1),this.mouseWheelCallback&&this.mouseWheelCallback.call(this.callbackContext,a)},stop:function(){var a,b=this.game.canvas;b.removeEventListener("mousedown",this._onMouseDown,!0),b.removeEventListener("mousemove",this._onMouseMove,!0),b.removeEventListener("mouseup",this._onMouseUp,!0),b.removeEventListener("mouseover",this._onMouseOver,!0),b.removeEventListener("mouseout",this._onMouseOut,!0),a=f.wheelEvent,a&&b.removeEventListener(a,this._onMouseWheel,!0),c.removeEventListener("mouseup",this._onMouseUpGlobal,!0)}},d.prototype.constructor=d,e.prototype={},e.prototype.constructor=e,e.prototype.bindEvent=function(a){var b,c;if(!e._stubsGenerated&&a){b=function(a){return function(){var b=this.originalEvent[a];return"function"!=typeof b?b:b.bind(this.originalEvent)}};for(c in a)c in e.prototype||Object.defineProperty(e.prototype,c,{get:b(c)});e._stubsGenerated=!0}return this.originalEvent=a,this},Object.defineProperties(e.prototype,{type:{value:"wheel"},deltaMode:{get:function(){return this._deltaMode}},deltaY:{get:function(){return this._scaleFactor*(this.originalEvent.wheelDelta||this.originalEvent.detail)||0}},deltaX:{get:function(){return this._scaleFactor*this.originalEvent.wheelDeltaX||0}},deltaZ:{value:0}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{56:56,76:76}],16:[function(a,b,c){(function(c){function d(a,b,h){this.game=a,this.id=b,this.type=e.POINTER,this.exists=!0,this.identifier=0,this.pointerId=null,this.target=null,this.button=null,this.mode=h||d.MODE.CURSOR,this.leftButton=new f(this,d.LEFT_BUTTON),this.middleButton=new f(this,d.MIDDLE_BUTTON),this.rightButton=new f(this,d.RIGHT_BUTTON),this.backButton=new f(this,d.BACK_BUTTON),this.forwardButton=new f(this,d.FORWARD_BUTTON),this.eraserButton=new f(this,d.ERASER_BUTTON),this._holdSent=!1,this._nextDrop=0,this._stateReset=!1,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.rawMovementX=0,this.rawMovementY=0,this.movementX=0,this.movementY=0,this.x=-1,this.y=-1,this.isMouse=0===b,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this.msSinceLastClick=c.Number.MAX_VALUE,this.targetObject=null,this.active=!1,this.dirty=!1,this.position=new g,this.positionDown=new g,this.positionUp=new g,this._history=[],this._clickTrampolines=null,this._trampolineTargetObject=null}var e=a(9),f=a(10),g=a(45),h=a(15);d.NO_BUTTON=0,d.LEFT_BUTTON=1,d.RIGHT_BUTTON=2,d.MIDDLE_BUTTON=4,d.BACK_BUTTON=8,d.FORWARD_BUTTON=16,d.ERASER_BUTTON=32,d.MODE={CURSOR:1,CONTACT:2},d.prototype={resetButtons:function(){this.isDown=!1,this.isUp=!0,this.isMouse&&(this.leftButton.reset(),this.middleButton.reset(),this.rightButton.reset(),this.backButton.reset(),this.forwardButton.reset(),this.eraserButton.reset())},processButtonsDown:function(a,b){d.LEFT_BUTTON&a&&this.leftButton.start(b),d.RIGHT_BUTTON&a&&this.rightButton.start(b),d.MIDDLE_BUTTON&a&&this.middleButton.start(b),d.BACK_BUTTON&a&&this.backButton.start(b),d.FORWARD_BUTTON&a&&this.forwardButton.start(b),d.ERASER_BUTTON&a&&this.eraserButton.start(b)},processButtonsUp:function(a,b){a===h.LEFT_BUTTON&&this.leftButton.stop(b),a===h.RIGHT_BUTTON&&this.rightButton.stop(b),a===h.MIDDLE_BUTTON&&this.middleButton.stop(b),a===h.BACK_BUTTON&&this.backButton.stop(b),a===h.FORWARD_BUTTON&&this.forwardButton.stop(b),5===a&&this.eraserButton.stop(b)},updateButtons:function(a){this.button=a.button;var b="down"===a.type.toLowerCase().substr(-4);void 0!==a.buttons?b?this.processButtonsDown(a.buttons,a):this.processButtonsUp(a.button,a):b?this.leftButton.start(a):(this.leftButton.stop(a),this.rightButton.stop(a)),a.ctrlKey&&this.leftButton.isDown&&this.rightButton.start(a),this.isUp=!0,this.isDown=!1,(this.leftButton.isDown||this.rightButton.isDown||this.middleButton.isDown||this.backButton.isDown||this.forwardButton.isDown||this.eraserButton.isDown)&&(this.isUp=!1,this.isDown=!0)},start:function(b){b.pointerId&&(this.pointerId=b.pointerId),this.identifier=b.identifier,this.target=b.target,this.isMouse?this.updateButtons(b):(this.isDown=!0,this.isUp=!1),this._history=[],this.active=!0,this.withinGame=!0,this.dirty=!1,this._clickTrampolines=null,this._trampolineTargetObject=null,this.msSinceLastClick=this.game.clock.time-this.timeDown,this.timeDown=this.game.clock.time,this._holdSent=!1,this.move(b,!0),this.positionDown.setTo(this.x,this.y);var c=this.game.input,d=a(11);return(c.multiInputOverride===d.MOUSE_OVERRIDES_TOUCH||c.multiInputOverride===d.MOUSE_TOUCH_COMBINE||c.multiInputOverride===d.TOUCH_OVERRIDES_MOUSE&&0===c.totalActivePointers)&&(c.x=this.x,c.y=this.y,c.position.setTo(this.x,this.y),c.emit("onDown",this,b),c.resetSpeed(this.x,this.y)),this._stateReset=!1,this.totalTouches++,null!==this.targetObject&&this.targetObject._touchedHandler(this),this},update:function(){var b,c;this.active&&(b=this.game.input,this.dirty&&(b.interactiveItems.total>0&&this.processInteractiveObjects(!1),this.dirty=!1),c=a(11),this._holdSent===!1&&this.duration>=b.holdRate&&((b.multiInputOverride===c.MOUSE_OVERRIDES_TOUCH||b.multiInputOverride===c.MOUSE_TOUCH_COMBINE||b.multiInputOverride===c.TOUCH_OVERRIDES_MOUSE&&0===b.totalActivePointers)&&b.emit("onHold",this),this._holdSent=!0),b.recordPointerHistory&&this.game.clock.time>=this._nextDrop&&(this._nextDrop=this.game.clock.time+b.recordRate,this._history.push({x:this.position.x,y:this.position.y}),this._history.length>b.recordLimit&&this._history.shift()))},move:function(b,c){var d,e,f=this.game.input;if(!f.pollLocked){if(void 0===c&&(c=!1),void 0!==b.button&&(this.button=b.button),c&&this.isMouse&&this.updateButtons(b),this.clientX=b.clientX,this.clientY=b.clientY,this.pageX=b.pageX,this.pageY=b.pageY,this.screenX=b.screenX,this.screenY=b.screenY,this.isMouse&&f.mouse.locked&&!c&&(this.rawMovementX=b.movementX||b.mozMovementX||b.webkitMovementX||0,this.rawMovementY=b.movementY||b.mozMovementY||b.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-0)*f.scale.x,this.y=(this.pageY-0)*f.scale.y,this.position.setTo(this.x,this.y),e=a(11),(f.multiInputOverride===e.MOUSE_OVERRIDES_TOUCH||f.multiInputOverride===e.MOUSE_TOUCH_COMBINE||f.multiInputOverride===e.TOUCH_OVERRIDES_MOUSE&&0===f.totalActivePointers)&&(f.activePointer=this,f.x=this.x,f.y=this.y,f.position.setTo(f.x,f.y)),this.withinGame=!0,this.game.paused)return this;for(d=f.moveCallbacks.length;d--;)f.moveCallbacks[d].callback.call(f.moveCallbacks[d].context,this,this.x,this.y,c);return null!==this.targetObject&&this.targetObject.isDragged===!0?this.targetObject.update(this)===!1&&(this.targetObject=null):f.interactiveItems.total>0&&this.processInteractiveObjects(c),this}},processInteractiveObjects:function(a){for(var b=c.Number.MAX_VALUE,d=-1,e=null,f=this.game.input,g=f.interactiveItems.first;g;)g.checked=!1,g.validForInput(d,b,!1)&&(g.checked=!0,(a&&g.checkPointerDown(this,!0)||!a&&g.checkPointerOver(this,!0))&&(b=g.sprite.renderOrderID,d=g.priorityID,e=g)),g=f.interactiveItems.next;for(g=f.interactiveItems.first;g;)!g.checked&&g.validForInput(d,b,!0)&&(a&&g.checkPointerDown(this,!1)||!a&&g.checkPointerOver(this,!1))&&(b=g.sprite.renderOrderID,d=g.priorityID,e=g),g=f.interactiveItems.next;return null===e?this.targetObject&&(this.targetObject._pointerOutHandler(this),this.targetObject=null):null===this.targetObject?(this.targetObject=e,e._pointerOverHandler(this)):this.targetObject===e?e.update(this)===!1&&(this.targetObject=null):(this.targetObject._pointerOutHandler(this),this.targetObject=e,this.targetObject._pointerOverHandler(this)),null!==this.targetObject},leave:function(a){this.withinGame=!1,this.move(a,!1)},stop:function(b){var c,d=this.game,e=d.input;return this._stateReset&&this.withinGame?void b.preventDefault():(this.timeUp=d.clock.time,c=a(11),(e.multiInputOverride===c.MOUSE_OVERRIDES_TOUCH||e.multiInputOverride===c.MOUSE_TOUCH_COMBINE||e.multiInputOverride===c.TOUCH_OVERRIDES_MOUSE&&0===e.totalActivePointers)&&(e.emit("onUp",this,b),this.duration>=0&&this.duration<=e.tapRate&&(this.timeUp-this.previousTapTime<e.doubleTapRate?e.emit("onTap",this,!0):e.emit("onTap",this,!1),this.previousTapTime=this.timeUp)),this.isMouse?this.updateButtons(b):(this.isDown=!1,this.isUp=!0),this.id>0&&(this.active=!1),this.withinGame=d.scale.bounds.contains(b.pageX,b.pageY),this.pointerId=null,this.identifier=null,this.positionUp.setTo(this.x,this.y),this.isMouse===!1&&e.currentPointers--,e.interactiveItems.callAll("_releasedHandler",this),this._clickTrampolines&&(this._trampolineTargetObject=this.targetObject),this.targetObject=null,this)},justPressed:function(a){return a=a||this.game.input.justPressedRate,this.isDown===!0&&this.timeDown+a>this.game.clock.time},justReleased:function(a){return a=a||this.game.input.justReleasedRate,this.isUp&&this.timeUp+a>this.game.clock.time},addClickTrampoline:function(a,b,c,d){var e,f;if(this.isDown){for(e=this._clickTrampolines=this._clickTrampolines||[],f=0;f<e.length;f++)if(e[f].name===a){e.splice(f,1);break}e.push({name:a,targetObject:this.targetObject,callback:b,callbackContext:c,callbackArgs:d})}},processClickTrampolines:function(){var a,b,c=this._clickTrampolines;if(c){for(b=0;b<c.length;b++)a=c[b],a.targetObject===this._trampolineTargetObject&&a.callback.apply(a.callbackContext,a.callbackArgs);this._clickTrampolines=null,this._trampolineTargetObject=null}},reset:function(){this.isMouse===!1&&(this.active=!1),this.pointerId=null,this.identifier=null,this.dirty=!1,this.totalTouches=0,this._holdSent=!1,this._history.length=0,this._stateReset=!0,this.resetButtons(),this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null},resetMovement:function(){this.movementX=0,this.movementY=0}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"duration",{get:function(){return this.isUp?-1:this.game.clock.time-this.timeDown}}),Object.defineProperty(d.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}}),Object.defineProperty(d.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{10:10,11:11,15:15,45:45,9:9}],17:[function(a,b,c){function d(a,b,c,d){e.ParticleContainer.call(this,b,c,d),this.game=a}var e=a("pixi"),f=a(20);d.prototype=Object.create(e.ParticleContainer.prototype),d.prototype.constructor=d,d.prototype.preUpdate=function(){},d.prototype.update=function(){},d.prototype.postUpdate=function(){},d.prototype.getFirstExists=function(a){return"boolean"!=typeof a&&(a=!0),this.iterate("exists",a,f.RETURN_CHILD)},d.prototype.iterate=function(a,b,c,d,e,g){var h,i;if(c===f.RETURN_TOTAL&&0===this.children.length)return 0;for(h=0,i=0;i<this.children.length;i++)if(this.children[i][a]===b&&(h++,d&&(g?(g[0]=this.children[i],d.apply(e,g)):d.call(e,this.children[i])),c===f.RETURN_CHILD))return this.children[i];return c===f.RETURN_TOTAL?h:null},b.exports=d},{20:20,pixi:"pixi"}],18:[function(a,b,c){(function(c){function d(a,b,c,d,g){this.game=a,this.world=a.world,this.target=null,this.deadzone=null,this.view=new e(b,c,d,g),this.bounds=new e(b,c,d,g),this.smooth=!1,this.smoothSpeed=.1,this.smoothThreshhold=64,this.roundPx=!1,this.atLimit={x:!1,y:!1},this.totalInView=0,this._smooth=!1,this._shaking=0,this._smoothSpeed=null,this._position=new f,this._smoothPosition=new f,this._targetPosition=new f}var e=a(46),f=a(45),g=a(68);d.FOLLOW_LOCKON=0,d.FOLLOW_SMOOTH=1,d.FOLLOW_TOPDOWN=2,d.FOLLOW_TOPDOWN_TIGHT=3,d.prototype.constructor=d,d.prototype.shake=function(a){a=a||500,this._shaking=0,this.shakeTween&&this.shakeTween.stop(),this.shakeTween=this.game.tweens.create(this),this.shakeTween.to({_shaking:1},a/2),this.shakeTween.yoyo(!0),this.shakeTween.start()},d.prototype.follow=function(a,b){void 0===b&&(b=d.FOLLOW_SMOOTH),this.target=a;var f;switch(b){case d.FOLLOW_TOPDOWN:f=c.Math.max(this.width,this.height)/4,this.deadzone=new e((this.width-f)/2,(this.height-f)/2,f,f);break;case d.FOLLOW_TOPDOWN_TIGHT:f=c.Math.max(this.width,this.height)/8,this.deadzone=new e((this.width-f)/2,(this.height-f)/2,f,f);break;case d.FOLLOW_SMOOTH:this.smooth=!0,this.deadzone=null;break;case d.FOLLOW_LOCKON:default:this.deadzone=null}},d.prototype.update=function(){var a=this.view,b=this.displayObject,d=c.Math;this.target&&this.updateTarget(),this.bounds&&this.checkBounds(),this.roundPx&&a.floor(),this._shaking&&(a.x+=(10*d.random()-5)*this._shaking,a.y+=(10*d.random()-5)*this._shaking),b.pivot.x=a.x+a.halfWidth,b.pivot.y=a.y+a.halfHeight},d.prototype.updateTarget=function(){var a,b,c=this._smoothPosition,d=this._targetPosition;d.copyFrom(this.target),this.deadzone?(this._edge=d.x-this.view.x,this._edge<this.deadzone.left?a=d.x-this.deadzone.left:this._edge>this.deadzone.right&&(a=d.x-this.deadzone.right),this._edge=d.y-this.view.y,this._edge<this.deadzone.top?b=d.y-this.deadzone.top:this._edge>this.deadzone.bottom&&(b=d.y-this.deadzone.bottom)):(a=d.x,b=d.y),this.smooth&&(!this._smooth&&d.distance(this.position)>this.smoothThreshhold&&(this._smooth=!0,this._smoothSpeed=0,this._smoothTween&&this._smoothTween.stop(),this._smoothTween=this.game.tweens.create(this),this._smoothTween.to({_smoothSpeed:1},1e3,g.Default,!0),this._smoothTween.once("complete",function(){this._smooth=!1},this)),this._smooth&&(c=f.interpolate(this.position,{x:a,y:b},this._smoothSpeed,c),a=c.x,b=c.y)),this.setPosition(a,b)},d.prototype.unfollow=function(){this.target=null},d.prototype.focusOn=function(a){this.setPosition(a.x,a.y)},d.prototype.focusOnXY=function(a,b){this.setPosition(a,b)},d.prototype.setBoundsToWorld=function(){this.bounds&&this.bounds.copyFrom(this.game.world.bounds)},d.prototype.checkBounds=function(){this.atLimit.x=!1,this.atLimit.y=!1,this.view.x<=this.bounds.x&&(this.atLimit.x=!0),this.view.right>=this.bounds.right&&(this.atLimit.x=!0),this.view.y<=this.bounds.top&&(this.atLimit.y=!0),this.view.bottom>=this.bounds.bottom&&(this.atLimit.y=!0)},d.prototype.setPosition=function(a,b){var c=this.view;c.x=a-c.halfWidth,c.y=b-c.halfHeight,this.bounds&&this.checkBounds()},d.prototype.pan=function(a,b){var c=this.view;c.x-=a,c.y-=b},d.prototype.setSize=function(a,b){var c=this.view,d=this.displayObject;c.width=a,c.height=b,d.x=c.halfWidth,d.y=c.halfHeight},d.prototype.reset=function(){this.view.x=0,this.view.y=0},Object.defineProperty(d.prototype,"x",{get:function(){
return this.view.x},set:function(a){this.view.x=a,this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"y",{get:function(){return this.view.y},set:function(a){this.view.y=a,this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"shaking",{get:function(){return this._shaking}}),Object.defineProperty(d.prototype,"position",{get:function(){return this._position.set(this.view.centerX,this.view.centerY),this._position},set:function(a){void 0!==a.x&&(this.view.x=a.x),void 0!==a.y&&(this.view.y=a.y),this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"width",{get:function(){return this.view.width},set:function(a){this.view.width=a}}),Object.defineProperty(d.prototype,"height",{get:function(){return this.view.height},set:function(a){this.view.height=a}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{45:45,46:46,68:68}],19:[function(a,b,c){(function(c){function d(a){a||(a={}),this.config=a,this.width=a.width||800,this.height=a.height||600,this.enableDebug=a.enableDebug||!0,this.parent=a.parent||"",this.canvasID=a.canvasID||null,this.transparent=a.transparent||!1,this.autoResize=a.autoResize||!1,this.antialias=a.antialias||!1,this.forceFXAA=a.forceFXAA||!1,this.resolution=a.resolution||1,this.clearBeforeRender=a.clearBeforeRender||!0,this.preserveDrawingBuffer=a.preserveDrawingBuffer||!1,this.isBooted=!1,this.forceSingleUpdate=!1,this.currentUpdateID=0,this._deltaTime=0,this._lastCount=0,this._spiraling=0,this._kickstart=!0,this._nextFpsNotification=0,this._paused=!1,this._codePaused=!1,this.rnd=new p([""+c.Date.now()*c.Math.random()]),this.state=new q(this,new r),g.whenReady(this.boot,this),f.call(this)}var e=a("pixi"),f=a(2),g=a(56),h=a(55),i=a(57),j=a(65),k=a(48),l=a(47),m=a(11),n=a(22),o=a(25),p=a(77),q=a(24),r=a(23),s=a(21),t=a(71),u=a(52),v=a(54),w=a(50);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.isBooted||(this.isBooted=!0,this.scale=new s(this,this.width,this.height),this.stage=new n(this),this.setupRenderer(),this.world=new o(this),this.cache=new l(this),this.load=new k(this),this.clock=new j(this),this.tweens=new t(this),this.input=new m(this),this.sound=new v(this),this.particles=new u(this),this.net=new w(this),this.clock.boot(),this.stage.boot(),this.world.boot(),this.scale.boot(),this.input.boot(),this.sound.boot(),this.state.boot(),this.net.boot(),this.raf=new i(this,!1),this._kickstart=!0,this.raf.start())},d.prototype.setupRenderer=function(){if(this.canvas=h.create(this.width,this.height,this.canvasID),g.webGL!==!0)throw Error("WebGL support required");this.renderer=new e.WebGLRenderer(this.width,this.height,{view:this.canvas,transparent:this.transparent,autoResize:this.autoResize,resolution:this.resolution,antialias:this.antialias,clearBeforeRender:this.clearBeforeRender,preserveDrawingBuffer:this.preserveDrawingBuffer}),h.addToDOM(this.canvas,this.parent,!1),h.setUserSelect(this.canvas,"none"),h.setTouchAction(this.canvas,"none"),h.setContextMenu(this.canvas,!1),h.setSmoothingEnabled(this.canvas,!1)},d.prototype.update=function(a){if(this.clock.update(a),this._kickstart)return this.updateLogic(this.clock.desiredFpsMult),this.updateRender(this.clock.slowMotion*this.clock.desiredFps),void(this._kickstart=!1);if(this._spiraling>1&&!this.forceSingleUpdate)this.clock.time>this._nextFpsNotification&&(this._nextFpsNotification=this.clock.time+1e4,this.emit("spiraling")),this._deltaTime=0,this._spiraling=0,this.updateRender(this.clock.slowMotion*this.clock.desiredFps);else{var b=0,d=1e3*this.clock.slowMotion/this.clock.desiredFps;for(this._deltaTime+=c.Math.max(c.Math.min(3*d,this.clock.elapsed),0),this.updatesThisFrame=c.Math.floor(this._deltaTime/d),this.forceSingleUpdate&&(this.updatesThisFrame=c.Math.min(1,this.updatesThisFrame));this._deltaTime>=d&&(this._deltaTime-=d,this.currentUpdateID=b,this.updateLogic(this.clock.desiredFpsMult),b++,!this.forceSingleUpdate||1!==b);)this.clock.refresh();b>this._lastCount?this._spiraling++:b<this._lastCount&&(this._spiraling=0),this._lastCount=b,this.updateRender(this._deltaTime/d)}},d.prototype.updateLogic=function(a){this._paused?(this.scale.pauseUpdate(),this.state.pauseUpdate()):(this.scale.preUpdate(),this.state.preUpdate(),this.state.update(),this.stage.update(),this.tweens.update(),this.input.update(),this.sound.update(),this.particles.update())},d.prototype.updateRender=function(a){this.state.preRender(a),this.renderer.render(this.stage)},d.prototype.destroy=function(){this.raf.stop(),this.state.destroy(),this.scale.destroy(),this.stage.destroy(),this.input.destroy(),this.sound.destroy(),this.state=null,this.cache=null,this.input=null,this.load=null,this.sound=null,this.stage=null,this.clock=null,this.world=null,this.isBooted=!1,this.renderer.destroy(!1)},d.prototype.gamePaused=function(a){this._paused||(this._paused=!0,this.clock.gamePaused(),this.sound.setMute(),this.emit("game/pause",a))},d.prototype.gameResumed=function(a){this._paused&&!this._codePaused&&(this._paused=!1,this.clock.gameResumed(),this.input.reset(),this.sound.unsetMute(),this.emit("game/resume",a))},d.prototype.focusLoss=function(a){this.emit("game/blur",a),this.stage.disableVisibilityChange||this.gamePaused(a)},d.prototype.focusGain=function(a){this.emit("game/focus",a),this.stage.disableVisibilityChange||this.gameResumed(a)},Object.defineProperty(d.prototype,"paused",{get:function(){return this._paused},set:function(a){a===!0?(this._paused===!1&&(this._paused=!0,this.sound.setMute(),this.clock.gamePaused(),this.emit("pause",event)),this._codePaused=!0):(this._paused&&(this._paused=!1,this.input.reset(),this.sound.unsetMute(),this.clock.gameResumed(),this.emit("resume",event)),this._codePaused=!1)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{11:11,2:2,21:21,22:22,23:23,24:24,25:25,47:47,48:48,50:50,52:52,54:54,55:55,56:56,57:57,65:65,71:71,77:77,pixi:"pixi"}],20:[function(a,b,c){function d(a,b){void 0===typeof b&&(b=a.world),e.Container.call(this),this.game=a,this.z=0,this.type=f.GROUP,this.pendingDestroy=!1,this.exists=!0,b&&(this.z=b.children.length,b.addChild(this))}var e=a("pixi"),f=a(9),g=a(72);d.RETURN_NONE=0,d.RETURN_TOTAL=1,d.RETURN_CHILD=2,d.SORT_ASCENDING=-1,d.SORT_DESCENDING=1,d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,d.prototype.add=function(a,b){return void 0===b&&(b=!1),a.parent!==this&&(this.addChild(a),a.z=this.children.length),a},d.prototype.getFirstExists=function(a){return"boolean"!=typeof a&&(a=!0),this.iterate("exists",a,d.RETURN_CHILD)},d.prototype.iterate=function(a,b,c,e,f,g){var h,i;if(c===d.RETURN_TOTAL&&0===this.children.length)return 0;for(h=0,i=0;i<this.children.length;i++)if(this.children[i][a]===b&&(h++,e&&(g?(g[0]=this.children[i],e.apply(f,g)):e.call(f,this.children[i])),c===d.RETURN_CHILD))return this.children[i];return c===d.RETURN_TOTAL?h:null},d.prototype.filter=function(a,b){for(var c,d=-1,e=this.children.length,f=[];++d<e;)c=this.children[d],(!b||b&&c.exists)&&a(c,d,this.children)&&f.push(c);return new g(f)},d.prototype.forEach=function(a,b,c){var d,e;if(void 0===c&&(c=!1),arguments.length<=3)for(d=0;d<this.children.length;d++)(!c||c&&this.children[d].exists)&&a.call(b,this.children[d]);else{for(e=[null],d=3;d<arguments.length;d++)e.push(arguments[d]);for(d=0;d<this.children.length;d++)(!c||c&&this.children[d].exists)&&(e[0]=this.children[d],a.apply(b,e))}},d.prototype.swap=function(a,b){this.swapChildren(a,b)},d.prototype.remove=function(a,b,c){if(0===this.children.length||-1===this.children.indexOf(a))return!1;void 0===b&&(b=!1),void 0===c&&(c=!1);var d=this.removeChild(a);return b&&d&&d.destroy(!0),!0},d.prototype.removeAll=function(a,b){if(void 0===a&&(a=!1),void 0===b&&(b=!1),0!==this.children.length){var c;do c=this.removeChild(this.children[0]),a&&c&&c.destroy(!0);while(this.children.length>0)}},d.prototype.update=function(){if(this.pendingDestroy)return this.destroy(),!1;if(!this.exists||!this.parent.exists)return this.renderOrderID=-1,!1;for(var a=this.children.length;a--;)this.children[a].update()},d.prototype.destroy=function(a,b){null===this.game||this.ignoreDestroy||(void 0===a&&(a=!0),void 0===b&&(b=!1),this.removeAll(a),this.removeAllListeners(),this.filters=null,this.pendingDestroy=!1,b||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1,e.Container.prototype.destroy(this)))},b.exports=d},{72:72,9:9,pixi:"pixi"}],21:[function(a,b,c){(function(c){function d(a,b,g){this.game=a,this.dom={getScreenOrientation:function(){},getOffset:function(){},visualBounds:{width:c.Math.max(c.innerWidth,c.document.documentElement.clientWidth),height:c.Math.max(c.innerHeight,c.document.documentElement.clientHeight)}},this.dom.layoutBounds=this.dom.visualBounds,this.width=0,this.height=0,this.event=null,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.sourceAspectRatio=0,this.aspectRatio=0,this.margin={left:0,top:0,right:0,bottom:0,x:0,y:0},this.bounds=new f,this.offset=new e,this.forceLandscape=!1,this.forcePortrait=!1,this.incorrectOrientation=!1,this._pageAlignHorizontally=!1,this._pageAlignVertically=!1,this.screenOrientation=this.dom.getScreenOrientation(),this.fullScreenTarget=null,this._createdFullScreenTarget=null,this.scaleFactor=new e(1,1),this.scaleFactorInversed=new e(1,1),this.windowConstraints={right:"",bottom:""},this.compatibility={supportsFullScreen:!1,orientationFallback:null,noMargins:!1,forceMinimumDocumentHeight:!1,canExpandParent:!0,clickTrampoline:""},this._scaleMode=d.RESIZE,this._fullScreenScaleMode=d.RESIZE,this.trackParentInterval=2e3,this.parentIsWindow=!1,this.parentNode=null,this.parentScaleFactor=new e(1,1),this.onResize=null,this.onResizeContext=null,this._pendingScaleMode=null,this._fullScreenRestore=null,this._gameSize=new f,this._userScaleFactor=new e(1,1),this._userScaleTrim=new e(0,0),this._booted=!1,this._lastUpdate=0,this._updateThrottle=0,this._updateThrottleReset=100,this._resolutionLow=1024,this._resolutionMedium=1280,this._resolutionMaximum=1366,this._resolutionMode="auto",this._parentBounds=new f,this._tempBounds=new f,this._lastReportedCanvasSize=new f,this._lastReportedGameSize=new f,a.config&&this.parseConfig(a.config),this.setupScale(b,g),this.game.on("fpsProblem",function(){this.resolutionMode="low",this.scaleMode=d.EXACT_FIT,this.fullScreenScaleMode=d.EXACT_FIT,this.refresh()},this)}var e=a(45),f=a(46),g=a(56),h=a(76),i=a(9);d.EXACT_FIT=0,d.NO_SCALE=1,d.SHOW_ALL=2,d.RESIZE=3,d.USER_SCALE=4,d.prototype={boot:function(){var a,b=this.compatibility;b.supportsFullScreen=g.fullscreen,g.desktop?(b.orientationFallback="screen",b.clickTrampoline="when-not-mouse"):(b.orientationFallback="",b.clickTrampoline=""),a=this,this._orientationChange=function(b){return a.orientationChange(b)},this._windowResize=function(b){return a.windowResize(b)},c.addEventListener("orientationchange",this._orientationChange,!1),c.addEventListener("resize",this._windowResize,!1),b.supportsFullScreen&&(this._fullScreenChange=function(b){return a.fullScreenChange(b)},this._fullScreenError=function(b){return a.fullScreenError(b)},c.document.addEventListener("webkitfullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("mozfullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("MSFullscreenChange",this._fullScreenChange,!1),c.document.addEventListener("fullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("webkitfullscreenerror",this._fullScreenError,!1),c.document.addEventListener("mozfullscreenerror",this._fullScreenError,!1),c.document.addEventListener("MSFullscreenError",this._fullScreenError,!1),c.document.addEventListener("fullscreenerror",this._fullScreenError,!1)),this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.setGameSize(this.game.width,this.game.height),this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this._booted=!0,this._pendingScaleMode&&(this.scaleMode=this._pendingScaleMode,this._pendingScaleMode=null)},parseConfig:function(a){a.scaleMode&&(this._booted?this.scaleMode=a.scaleMode:this._pendingScaleMode=a.scaleMode),a.fullScreenScaleMode&&(this.fullScreenScaleMode=a.fullScreenScaleMode),a.fullScreenTarget&&(this.fullScreenTarget=a.fullScreenTarget)},setupScale:function(a,b){var d,e,g,h=new f;""!==this.game.parent&&("string"==typeof this.game.parent?d=c.document.getElementById(this.game.parent):this.game.parent&&1===this.game.parent.nodeType&&(d=this.game.parent)),d?(this.parentNode=d,this.parentIsWindow=!1,this.getParentBounds(this._parentBounds),h.width=this._parentBounds.width,h.height=this._parentBounds.height,this.offset.set(this._parentBounds.x,this._parentBounds.y)):(this.parentNode=null,this.parentIsWindow=!0,h.width=this.dom.visualBounds.width,h.height=this.dom.visualBounds.height,this.offset.set(0,0)),e=0,g=0,"number"==typeof a?e=a:(this.parentScaleFactor.x=parseInt(a,10)/100,e=h.width*this.parentScaleFactor.x),"number"==typeof b?g=b:(this.parentScaleFactor.y=parseInt(b,10)/100,g=h.height*this.parentScaleFactor.y),this._gameSize.setTo(0,0,e,g),this.updateDimensions(e,g,!1)},_gameResumed:function(){this.queueUpdate(!0)},setGameSize:function(a,b,c){this._gameSize.setTo(0,0,a,b),this.updateDimensions(a,b,!0),c||this.queueUpdate(!0)},setUserScale:function(a,b,c,d){this._userScaleFactor.setTo(a,b),this._userScaleTrim.setTo(0|c,0|d),this.queueUpdate(!0)},setResizeCallback:function(a,b){this.onResize=a,this.onResizeContext=b},signalSizeChange:function(){var a,b;f.sameDimensions(this,this._lastReportedCanvasSize)&&f.sameDimensions(this.game,this._lastReportedGameSize)||(a=this.width,b=this.height,this._lastReportedCanvasSize.setTo(0,0,a,b),this._lastReportedGameSize.setTo(0,0,this.game.width,this.game.height),this.game.state.resize(this.game.width,this.game.height))},setMinMax:function(a,b,c,d){this.minWidth=a,this.minHeight=b,void 0!==c&&(this.maxWidth=c),void 0!==d&&(this.maxHeight=d)},preUpdate:function(){var a,b,d,e,f,g,i;this.game.clock.time<this._lastUpdate+this._updateThrottle||(a=this._updateThrottle,this._updateThrottleReset=a>=400?0:100,this.dom.getOffset(this.game.canvas,this.offset),b=this._parentBounds.width,d=this._parentBounds.height,e=this.getParentBounds(this._parentBounds),f=e.width!==b||e.height!==d,g=this.updateOrientationState(),(f||g)&&(this.onResize&&this.onResize.call(this.onResizeContext,this,e),this.updateLayout(),this.signalSizeChange()),i=2*this._updateThrottle,this._updateThrottle<a&&(i=c.Math.min(a,this._updateThrottleReset)),this._updateThrottle=h.clamp(i,25,this.trackParentInterval),this._lastUpdate=this.game.clock.time)},pauseUpdate:function(){this.preUpdate(),this._updateThrottle=this.trackParentInterval},updateDimensions:function(a,b,c){this.width=a*this.parentScaleFactor.x,this.height=b*this.parentScaleFactor.y,this.game.width=this.width,this.game.height=this.height,this.sourceAspectRatio=this.width/this.height,this.updateScalingAndBounds(),c&&(this.game.renderer.resize(this.width,this.height),this.game.camera.setSize(this.width,this.height),this.game.world.resize(this.width,this.height))},updateScalingAndBounds:function(){this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.scaleFactorInversed.x=this.width/this.game.width,this.scaleFactorInversed.y=this.height/this.game.height,this.aspectRatio=this.width/this.height,this.game.canvas&&this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.game.input&&this.game.input.scale&&this.game.input.scale.setTo(this.scaleFactor.x,this.scaleFactor.y)},forceOrientation:function(a,b){void 0===b&&(b=!1),this.forceLandscape=a,this.forcePortrait=b,this.queueUpdate(!0)},classifyOrientation:function(a){return"portrait-primary"===a||"portrait-secondary"===a?"portrait":"landscape-primary"===a||"landscape-secondary"===a?"landscape":null},updateOrientationState:function(){var a,b,c=this.screenOrientation,d=this.incorrectOrientation;return this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this.incorrectOrientation=this.forceLandscape&&!this.isLandscape||this.forcePortrait&&!this.isPortrait,a=c!==this.screenOrientation,b=d!==this.incorrectOrientation,b&&this.incorrectOrientation,a||b},orientationChange:function(a){this.event=a,this.queueUpdate(!0)},windowResize:function(a){this.event=a,this.queueUpdate(!0)},refresh:function(){this.queueUpdate(!0)},updateLayout:function(){var a,b=this.currentScaleMode;return b===d.RESIZE?void this.reflowGame():(this.compatibility.forceMinimumDocumentHeight&&(c.document.documentElement.style.minHeight=c.innerHeight+"px"),this.incorrectOrientation?this.setMaximum():b===d.EXACT_FIT?this.setExactFit():b===d.SHOW_ALL?!this.isFullScreen&&this.boundingParent&&this.compatibility.canExpandParent?(this.setShowAll(!0),this.resetCanvas(),this.setShowAll()):this.setShowAll():b===d.NO_SCALE?(this.width=this.game.width,this.height=this.game.height):b===d.USER_SCALE&&(this.width=this.game.width*this._userScaleFactor.x-this._userScaleTrim.x,this.height=this.game.height*this._userScaleFactor.y-this._userScaleTrim.y),this.compatibility.canExpandParent||b!==d.SHOW_ALL&&b!==d.USER_SCALE||(a=this.getParentBounds(this._tempBounds),this.width=c.Math.min(this.width,a.width),this.height=c.Math.min(this.height,a.height)),this.width=0|this.width,this.height=0|this.height,void this.reflowCanvas())},getParentBounds:function(a){var b,d,e,g,h=a||new f,i=this.boundingParent,j=this.dom.visualBounds,k=this.dom.layoutBounds;return i?(b=i.getBoundingClientRect(),d=i.offsetParent?i.offsetParent.getBoundingClientRect():i.getBoundingClientRect(),h.setTo(b.left-d.left,b.top-d.top,b.width,b.height),e=this.windowConstraints,e.right&&(g="layout"===e.right?k:j,h.right=c.Math.min(h.right,g.width)),e.bottom&&(g="layout"===e.bottom?k:j,h.bottom=c.Math.min(h.bottom,g.height))):h.setTo(0,0,j.width,j.height),h.setTo(c.Math.round(h.x),c.Math.round(h.y),c.Math.round(h.width),c.Math.round(h.height)),h},alignCanvas:function(a,b){var d,e,f,g,h=this.getParentBounds(this._tempBounds),i=this.game.canvas,j=this.margin;a&&(j.left=j.right=0,d=i.getBoundingClientRect(),this.width<h.width&&!this.incorrectOrientation&&(e=d.left-h.x,f=h.width/2-this.width/2,f=c.Math.max(f,0),g=f-e,j.left=c.Math.round(g)),i.style.marginLeft=j.left+"px",0!==j.left&&(j.right=-(h.width-d.width-j.left),i.style.marginRight=j.right+"px")),b&&(j.top=j.bottom=0,d=i.getBoundingClientRect(),this.height<h.height&&!this.incorrectOrientation&&(e=d.top-h.y,f=h.height/2-this.height/2,f=c.Math.max(f,0),g=f-e,j.top=c.Math.round(g)),i.style.marginTop=j.top+"px",0!==j.top&&(j.bottom=-(h.height-d.height-j.top),i.style.marginBottom=j.bottom+"px")),j.x=j.left,j.y=j.top},reflowGame:function(){var a=this.getParentBounds(this._tempBounds),b=a.width,c=a.height,d=this._resolutionMaximum;d>b?(this.resetCanvas("",""),this.updateDimensions(b,c,!0)):(this.setExactFit(),this.reflowCanvas())},reflowCanvas:function(){this.incorrectOrientation||(this.width=h.clamp(this.width,this.minWidth||0,this.maxWidth||this.width),this.height=h.clamp(this.height,this.minHeight||0,this.maxHeight||this.height)),this.resetCanvas(),this.compatibility.noMargins||(this.isFullScreen&&this._createdFullScreenTarget?this.alignCanvas(!0,!0):this.alignCanvas(this.pageAlignHorizontally,this.pageAlignVertically)),this.updateScalingAndBounds()},resetCanvas:function(a,b){void 0===a&&(a=this.width+"px"),void 0===b&&(b=this.height+"px");var c=this.game.canvas;this.compatibility.noMargins||(c.style.marginLeft="",c.style.marginTop="",c.style.marginRight="",c.style.marginBottom=""),c.style.width=a,c.style.height=b},queueUpdate:function(a){a&&(this._parentBounds.width=0,this._parentBounds.height=0),this._updateThrottle=this._updateThrottleReset},reset:function(a){},setMaximum:function(){this.width=this.dom.visualBounds.width,this.height=this.dom.visualBounds.height},setShowAll:function(a){var b,d=this.getParentBounds(this._tempBounds),e=d.width,f=d.height;b=a?c.Math.max(f/this.game.height,e/this.game.width):c.Math.min(f/this.game.height,e/this.game.width),this.width=c.Math.round(this.game.width*b),this.height=c.Math.round(this.game.height*b)},setExactFit:function(){var a=this.getParentBounds(this._tempBounds),b=a.width,d=a.height,e=this.resolution,f=this.resolution*(d/b);this.setGameSize(e,f,!0),this.width=b,this.height=d,this.isFullScreen||(this.maxWidth&&(this.width=c.Math.min(this.width,this.maxWidth)),this.maxHeight&&(this.height=c.Math.min(this.height,this.maxHeight)))},createFullScreenTarget:function(){var a=c.document.createElement("div");return a.style.margin="0",a.style.padding="0",a.style.background="#000",a},startFullScreen:function(a,b){var c,d,e,f,h,j;return this.isFullScreen?!1:this.compatibility.supportsFullScreen?"when-not-mouse"===this.compatibility.clickTrampoline&&(d=this.game.input,d.activePointer&&d.activePointer!==d.mousePointer&&(b||b!==!1))?void d.activePointer.addClickTrampoline("startFullScreen",this.startFullScreen,this,[a,!1]):(void 0!==a&&this.game.renderType===i.CANVAS&&(this.game.stage.smoothed=a),e=this.fullScreenTarget,e||(this.cleanupCreatedTarget(),this._createdFullScreenTarget=this.createFullScreenTarget(),e=this._createdFullScreenTarget),f={targetElement:e},this._createdFullScreenTarget&&(h=this.game.canvas,j=h.parentNode,j.insertBefore(e,h),e.appendChild(h)),g.fullscreenKeyboard?e[g.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT):e[g.requestFullscreen](),!0):(c=this,void setTimeout(function(){c.fullScreenError()},10))},stopFullScreen:function(){return this.isFullScreen&&this.compatibility.supportsFullScreen?(c.document[g.cancelFullscreen](),!0):!1},cleanupCreatedTarget:function(){var a,b=this._createdFullScreenTarget;b&&b.parentNode&&(a=b.parentNode,a.insertBefore(this.game.canvas,b),a.removeChild(b)),this._createdFullScreenTarget=null},prepScreenMode:function(a){var b=!!this._createdFullScreenTarget,c=this._createdFullScreenTarget||this.fullScreenTarget;a?(b||this.fullScreenScaleMode===d.EXACT_FIT)&&c!==this.game.canvas&&(this._fullScreenRestore={targetWidth:c.style.width,targetHeight:c.style.height},c.style.width="100%",c.style.height="100%"):(this._fullScreenRestore&&(c.style.width=this._fullScreenRestore.targetWidth,c.style.height=this._fullScreenRestore.targetHeight,this._fullScreenRestore=null),this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.resetCanvas())},fullScreenChange:function(a){this.event=a,this.isFullScreen?(this.prepScreenMode(!0),this.updateLayout(),this.queueUpdate(!0)):(this.prepScreenMode(!1),this.cleanupCreatedTarget(),this.updateLayout(),this.queueUpdate(!0))},fullScreenError:function(a){this.event=a,this.cleanupCreatedTarget(),console.warn("ScaleManager: requestFullscreen failed or device does not support the Fullscreen API")},scaleSprite:function(a,b,d,e){var f,g,h,i,j;return void 0===b&&(b=this.width),void 0===d&&(d=this.height),void 0===e&&(e=!1),a&&a.scale?(a.scale.x=1,a.scale.y=1,a.width<=0||a.height<=0||0>=b||0>=d?a:(f=b,g=a.height*b/a.width,h=a.width*d/a.height,i=d,j=h>b,j=j?e:!e,j?(a.width=c.Math.floor(f),a.height=c.Math.floor(g)):(a.width=c.Math.floor(h),a.height=c.Math.floor(i)),a)):a},destroy:function(){this.game.onResume.remove(this._gameResumed,this),c.removeEventListener("orientationchange",this._orientationChange,!1),c.removeEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(c.document.removeEventListener("webkitfullscreenchange",this._fullScreenChange,!1),c.document.removeEventListener("mozfullscreenchange",this._fullScreenChange,!1),c.document.removeEventListener("MSFullscreenChange",this._fullScreenChange,!1),c.document.removeEventListener("fullscreenchange",this._fullScreenChange,!1),c.document.removeEventListener("webkitfullscreenerror",this._fullScreenError,!1),c.document.removeEventListener("mozfullscreenerror",this._fullScreenError,!1),c.document.removeEventListener("MSFullscreenError",this._fullScreenError,!1),c.document.removeEventListener("fullscreenerror",this._fullScreenError,!1))}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"boundingParent",{get:function(){return this.parentIsWindow||this.isFullScreen&&!this._createdFullScreenTarget?null:this.game.canvas&&this.game.canvas.parentNode||null}}),Object.defineProperty(d.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(a){return a!==this._scaleMode&&(this.isFullScreen||(this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.queueUpdate(!0)),this._scaleMode=a),this._scaleMode}}),Object.defineProperty(d.prototype,"resolutionMode",{get:function(){return this._resolutionMode},set:function(a){this._resolutionMode=a}}),Object.defineProperty(d.prototype,"resolution",{get:function(){switch(this._resolutionMode){case"max":return this._resolutionMaximum;case"medium":return this._resolutionMedium;case"low":return this._resolutionLow;default:return this._resolutionMaximum}}}),Object.defineProperty(d.prototype,"fullScreenScaleMode",{get:function(){return this._fullScreenScaleMode},set:function(a){return a!==this._fullScreenScaleMode&&(this.isFullScreen?(this.prepScreenMode(!1),this._fullScreenScaleMode=a,this.prepScreenMode(!0),this.queueUpdate(!0)):this._fullScreenScaleMode=a),this._fullScreenScaleMode}}),Object.defineProperty(d.prototype,"currentScaleMode",{get:function(){return this.isFullScreen?this._fullScreenScaleMode:this._scaleMode}}),Object.defineProperty(d.prototype,"pageAlignHorizontally",{get:function(){return this._pageAlignHorizontally},set:function(a){a!==this._pageAlignHorizontally&&(this._pageAlignHorizontally=a,this.queueUpdate(!0))}}),Object.defineProperty(d.prototype,"pageAlignVertically",{get:function(){return this._pageAlignVertically},set:function(a){a!==this._pageAlignVertically&&(this._pageAlignVertically=a,this.queueUpdate(!0))}}),Object.defineProperty(d.prototype,"isFullScreen",{get:function(){return!!(c.document.fullscreenElement||c.document.webkitFullscreenElement||c.document.mozFullScreenElement||c.document.msFullscreenElement)}}),Object.defineProperty(d.prototype,"isPortrait",{get:function(){return"portrait"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(d.prototype,"isLandscape",{get:function(){return"landscape"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(d.prototype,"isGamePortrait",{get:function(){return this.height>this.width}}),Object.defineProperty(d.prototype,"isGameLandscape",{get:function(){return this.width>this.height}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{45:45,46:46,56:56,76:76,9:9}],22:[function(a,b,c){(function(c){function d(a){e.Container.call(this),this.game=a,this.exists=!0,this.disableVisibilityChange=!1,this.currentRenderOrderID=0,this._onChange=null,this._hiddenVar=null}var e=a("pixi");d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.checkVisibility()},d.prototype.update=function(){this.currentRenderOrderID=0;for(var a=this.children.length;a--;)this.children[a].update();this.game.world.camera.update()},d.prototype.checkVisibility=function(){void 0!==c.document.webkitHidden?this._hiddenVar="webkitvisibilitychange":void 0!==c.document.mozHidden?this._hiddenVar="mozvisibilitychange":void 0!==c.document.msHidden?this._hiddenVar="msvisibilitychange":void 0!==c.document.hidden?this._hiddenVar="visibilitychange":this._hiddenVar=null;var a=this;this._onChange=function(b){return a.visibilityChange(b)},this._hiddenVar&&c.document.addEventListener(this._hiddenVar,this._onChange,!1),c.onblur=this._onChange,c.onfocus=this._onChange,c.onpagehide=this._onChange,c.onpageshow=this._onChange},d.prototype.visibilityChange=function(a){return"pagehide"===a.type||"blur"===a.type||"pageshow"===a.type||"focus"===a.type?void("pagehide"===a.type||"blur"===a.type?this.game.focusLoss(a):("pageshow"===a.type||"focus"===a.type)&&this.game.focusGain(a)):void(this.disableVisibilityChange||(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden||"pause"===a.type?this.game.gamePaused(a):this.game.gameResumed(a)))},d.prototype.destroy=function(){e.Container.prototype.destroy.call(this)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{pixi:"pixi"}],23:[function(a,b,c){function d(){this.game=null,this.key=""}d.prototype={init:function(a){},preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},preRender:function(){},render:function(){},resize:function(){},paused:function(){},resumed:function(){},pauseUpdate:function(){},shutdown:function(){}},d.prototype.constructor=d,b.exports=d},{}],24:[function(a,b,c){function d(a,b){this.game=a,this.states={},this.backgroundStates={},this._current="",this._pendingBackgroundStates=[],this._pendingState=b||null,this._clearWorld=!1,this._clearCache=!1,this._created=!1,this._args=[],this.callbackContext=null,this.backgroundStateContext=null,e.call(this)}var e=a(2);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.boot=function(){null!==this._pendingState&&"string"!=typeof this._pendingState&&this.add("default",this._pendingState,!0)},d.prototype.add=function(a,b,c,d){return c=c||!1,d=d||!1,d===!1?this.states[a]=b:this.backgroundStates[a]=b,c&&(d?this._pendingBackgroundStates.push(a):this.game.isBooted?this.start(a):this._pendingState=a),b},d.prototype.remove=function(a){this._current===a&&(this.callbackContext=null),delete this.states[a]},d.prototype.checkState=function(a){return this.states[a]?!0:(console.warn("StateManager - No state found with the key: "+a),!1)},d.prototype.start=function(a,b,c){void 0===b&&(b=!0),void 0===c&&(c=!1),this.checkState(a)&&(this._pendingState=a,this._clearWorld=b,this._clearCache=c,arguments.length>3&&(this._args=Array.prototype.splice.call(arguments,3)))},d.prototype.restart=function(a,b){void 0===a&&(a=!0),void 0===b&&(b=!1),this._pendingState=this._current,this._clearWorld=a,this._clearCache=b,arguments.length>2&&(this._args=Array.prototype.slice.call(arguments,2))},d.prototype.clearCurrentState=function(){this._current&&(this.callbackContext.shutdown&&this.callbackContext.shutdown(),this.game.tweens.removeAll(),this.game.camera.reset(),this.game.input.reset(!0),this.game.clock.removeAll(),this.game.scale.reset(this._clearWorld),this.game.debug&&this.game.debug.reset(),this._clearWorld&&(this.game.world.shutdown(),this._clearCache===!0&&this.game.cache.destroy()))},d.prototype.clearBackgroundStates=function(){var a,b=this.backgroundStates;for(a in b)b[a].shutdown()},d.prototype.setCurrentBackgroundState=function(a){this.backgroundStateContext=this.backgroundStates[a],this.backgroundStateContext.game=this.game,this.backgroundStateContext.init(),this.game._kickstart=!0},d.prototype.setCurrentState=function(a){this._current=a,this._created=!1,this.callbackContext=this.states[a],this.states[a].game=this.game,this.callbackContext.init&&this.callbackContext.init(this._args),a===this._pendingState&&(this._args=[]),this.game._kickstart=!0},d.prototype.getBackgroundState=function(a){return this.backgroundStates[a]},d.prototype.preUpdate=function(){if(!this.backgroundStateContext)if(this._pendingBackgroundStates.length>0)this.setCurrentBackgroundState(this._pendingBackgroundStates.pop()),this.backgroundStateContext.preload?(this.backgroundStateContext.preload(),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.backgroundLoadComplete():this.game.load.start()):this.backgroundLoadComplete();else if(this._pendingState&&this.game.isBooted){var a=this._current;
if(this.clearCurrentState(),this.setCurrentState(this._pendingState),this.emit("stateChange",this._current,a),this._current!==this._pendingState)return;this._pendingState=null,this.callbackContext.preload?(this.game.load.reset(!0),this.callbackContext.preload(),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.loadComplete():this.game.load.start()):this.loadComplete()}},d.prototype.loadComplete=function(){this._created===!1&&(this._created=!0,this.callbackContext.create&&this.callbackContext.create())},d.prototype.backgroundLoadComplete=function(){this.backgroundStateContext.create(),this.backgroundStateContext=null},d.prototype.pause=function(){this._created&&this.callbackContext.paused&&this.callbackContext.paused()},d.prototype.resume=function(){this._created&&this.callbackContext.resumed&&this.callbackContext.resumed()},d.prototype.update=function(){this.backgroundStateContext&&(this.backgroundStateContext.loadUpdate&&!this.game.load.hasLoaded?this.backgroundStateContext.loadUpdate():this.game.load.hasLoaded&&this.backgroundLoadComplete()),this._created?this.callbackContext.update&&this.callbackContext.update():this.callbackContext&&(this.callbackContext.loadUpdate&&!this.game.load.hasLoaded?this.callbackContext.loadUpdate():this.game.load.hasLoaded&&this.loadComplete())},d.prototype.pauseUpdate=function(){this._created?this.callbackContext.pauseUpdate&&this.callbackContext.pauseUpdate():this.backgroundStateContext&&(this.backgroundStateContext.loadUpdate&&!this.game.load.hasLoaded?this.backgroundStateContext.loadUpdate():this.game.load.hasLoaded&&this.backgroundLoadComplete())},d.prototype.preRender=function(a){this._created&&this.callbackContext.preRender&&this.callbackContext.preRender(a)},d.prototype.resize=function(a,b){this._created&&this.callbackContext.resize&&this.callbackContext.resize(a,b);for(var c in this.backgroundStates)this.backgroundStates[c].resize(a,b)},d.prototype.render=function(){this._created?this.callbackContext.render&&this.callbackContext.render():this.callbackContext.loadRender&&this.callbackContext.loadRender()},d.prototype.destroy=function(){this.clearCurrentState(),this.clearBackgroundStates(),this.callbackContext=null,this.game=null,this.states={},this.backgroundStates={},this._current="",this._pendingState=null},Object.defineProperty(d.prototype,"current",{get:function(){return this.states[this._current]}}),Object.defineProperty(d.prototype,"hasPendingState",{get:function(){return null!==this._pendingState||this._pendingBackgroundStates.length>0}}),Object.defineProperty(d.prototype,"pendingLength",{get:function(){return this._pendingBackgroundStates.length+(null!==this._pendingState?1:0)}}),b.exports=d},{2:2}],25:[function(a,b,c){(function(c){function d(a){f.call(this,a,null),this.game=a,this.camera=null,this.bounds=new e(0,0,a.width,a.height),this._definedSize=!1,this.game.on("state/change",this.stateChange,this)}var e=a(46),f=a(20),g=a(18);a(45);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.background=new f(this.game,this.game.stage),this.foreground=new f(this.game,this.game.stage),this.camera=new g(this.game,0,0,this.game.width,this.game.height),this.camera.displayObject=this,this.game.camera=this.camera,this.game.stage.addChild(this)},d.prototype.setBounds=function(a,b,d,e){this._definedSize=!0,this._width=d,this._height=e,this.bounds.setTo(a,b,d,e),this.camera.bounds&&this.camera.bounds.setTo(a,b,c.Math.max(d,this.game.width),c.Math.max(e,this.game.height))},d.prototype.update=function(){var a=this.background,b=this.foreground;this.camera.view;a.x=this.x,a.y=this.y,a.pivot.x=this.pivot.x/6,a.pivot.y=this.pivot.y/6,a.scale.x=this.scale.x/3+.5,a.scale.y=this.scale.y/3+.5,b.x=this.x,b.y=this.y,b.pivot.x=this.pivot.x/4,b.pivot.y=this.pivot.y/4,b.scale.x=this.scale.x/2+.5,b.scale.y=this.scale.y/2+.5,f.prototype.update.call(this)},d.prototype.resize=function(a,b){},d.prototype.stateChange=function(){this.camera.reset()},d.prototype.shutdown=function(){this.destroy(!0,!0)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{18:18,20:20,45:45,46:46}],26:[function(a,b,c){function d(a){this.type=f.GRAPHICS,e.Graphics.call(this),g.init.call(this,a,"",null)}var e=a("pixi"),f=a(9),g=a(34),h=a(35),j=a(37),k=a(45),l=a(36);d.prototype=Object.create(e.Graphics.prototype),d.prototype.constructor=d,g.install.call(d.prototype,["Mixin","AutoCull","Bounds","Destroy","FixedToCamera","InWorld","InputEnabled","Overlap"]),d.prototype.preUpdateInWorld=j.preUpdate,d.prototype.preUpdateCore=g.preUpdate,d.prototype.preUpdateFixedToCamera=l.preUpdate,d.prototype.update=function(){this.preUpdateInWorld(),this.preUpdateCore(),this.preUpdateFixedToCamera()},d.prototype.destroy=function(a){this.clear(),h.prototype.destroy.call(this,a)},d.prototype.drawTriangle=function(a,b){var c,d,e,f,g;void 0===b&&(b=!1),c=new Polygon(a),b?(d=new k(this.game.camera.x-a[0].x,this.game.camera.y-a[0].y),e=new k(a[1].x-a[0].x,a[1].y-a[0].y),f=new k(a[1].x-a[2].x,a[1].y-a[2].y),g=f.cross(e),d.dot(g)>0&&this.drawPolygon(c)):this.drawPolygon(c)},d.prototype.drawTriangles=function(a,b,c){void 0===c&&(c=!1);var d=new k;if(point2=new k,point3=new k,points=[],i,b)if(a[0]instanceof k)for(i=0;i<b.length/3;i++)points.push(a[b[3*i]]),points.push(a[b[3*i+1]]),points.push(a[b[3*i+2]]),3===points.length&&(this.drawTriangle(points,c),points=[]);else for(i=0;i<b.length;i++)d.x=a[2*b[i]],d.y=a[2*b[i]+1],points.push(d.copyTo({})),3===points.length&&(this.drawTriangle(points,c),points=[]);else if(a[0]instanceof k)for(i=0;i<a.length/3;i++)this.drawTriangle([a[3*i],a[3*i+1],a[3*i+2]],c);else for(i=0;i<a.length/6;i++)d.x=a[6*i+0],d.y=a[6*i+1],point2.x=a[6*i+2],point2.y=a[6*i+3],point3.x=a[6*i+4],point3.y=a[6*i+5],this.drawTriangle([d,point2,point3],c)},b.exports=d},{34:34,35:35,36:36,37:37,45:45,9:9,pixi:"pixi"}],27:[function(a,b,c){(function(c){function d(a,b,d){e.call(this,a,b,d),this.position=new f(0,0),this.vector=new f(0,0),this.velocity=new f(0,0),this.drag=new f(0,0),this.angularVelocity=0,this.angularDrag=0,this.autoScale=!1,this.autoAlpha=!1,this.scaleData=null,this.alphaData=null,this.tintData=null,this._s=0,this._a=0,this._t=0,this.rotation=c.Math.random()*c.Math.PI}var e=a(29),f=a(45);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a=this.game.clock.elapsedMS/1e3;this.rotation+=this.angularVelocity*a,this.position.add(this.velocity.x*this.vector.x*a,this.velocity.y*this.vector.y*a),this.autoScale||this.autoAlpha||this.autoTint||(this.exists=!1),this.autoScale&&(this._s--,this._s?this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y):this.autoScale=!1),this.autoAlpha&&(this._a--,this._a?this.alpha=this.alphaData[this._a].v:this.autoAlpha=!1),this.autoTint&&(this._t--,this._t?this.tint=this.tintData[this._t].color:this.autoTint=!1)},d.prototype.onEmit=function(){},d.prototype.setAlphaData=function(a){this.alphaData=a,this._a=a.length-1,this.alpha=this.alphaData[this._a].v,this.autoAlpha=!0},d.prototype.setScaleData=function(a){this.scaleData=a,this._s=a.length-1,this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y),this.autoScale=!0},d.prototype.setTintData=function(a){this.tintData=a,this._t=a.length-1,this.tint=this.tintData[this._t].color,this.autoTint=!0},d.prototype.reset=function(a,b){return this.position.set(a,b),this.fresh=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this.alpha=1,this.scale.set(1),this.autoScale=!1,this.autoAlpha=!1,this},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{29:29,45:45}],28:[function(a,b,c){function d(a,b,c){return a.cache.checkImageKey(b)?(void 0===c&&(c={}),void 0===c.chars&&(c.chars=d.TEXT_SET),this.type=f.RETROFONT,this.align="left",this.currentText="",this.grabData=[],this.image=a.cache.getImage(b,!0),this.characterWidth=c.characterWidth||this.image.data.width/c.chars.length,this.characterHeight=c.characterHeight||this.image.data.height,this.characterSpacingX=c.xSpacing||0,this.characterSpacingY=c.ySpacing||0,this.characterPerRow=c.charsPerRow||this.image.data.width/this.characterWidth,this.offsetX=c.xOffset||0,this.offsetY=c.yOffset||0,this.multiLine=!1,this.autoUpperCase=!0,this.fixedWidth=0,this.customSpacingX=0,this.customSpacingY=0,this.frameData=new i,this.stamp=new g(a,b),this.generateFrameData(c.chars),void e.RenderTexture.call(this,a.renderer,100,100,e.SCALE_MODES.NEAREST)):(console.warn("RetroFont - Can't find font:"+b),!1)}var e=a("pixi"),f=a(9),g=a(29),h=a(7),i=a(8);d.prototype=Object.create(e.RenderTexture.prototype),d.prototype.constructor=d,d.ALIGN_LEFT="left",d.ALIGN_RIGHT="right",d.ALIGN_CENTER="center",d.TEXT_SET="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-.%+/",d.prototype.setFixedWidth=function(a,b){void 0===b&&(b="left"),this.fixedWidth=a,this.align=b},d.prototype.setText=function(a,b,c,d,e,f){this.multiLine=b||!1,this.customSpacingX=c||0,this.customSpacingY=d||0,this.align=e||"left",f?this.autoUpperCase=!1:this.autoUpperCase=!0,a.length>0&&(this.text=a)},d.prototype.buildRetroFontText=function(){var a,b,c=0,e=0;if(this.clear(),this.multiLine)for(a=this.currentText.split("\n"),this.fixedWidth>0?this.resize(this.fixedWidth,a.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0):this.resize(this.getLongestLine()*(this.characterWidth+this.customSpacingX),a.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0),b=0;b<a.length;b++)c=0,this.align===d.ALIGN_RIGHT?c=this.width-a[b].length*(this.characterWidth+this.customSpacingX):this.align===d.ALIGN_CENTER&&(c=this.width/2-a[b].length*(this.characterWidth+this.customSpacingX)/2,c+=this.customSpacingX/2),0>c&&(c=0),this.pasteLine(a[b],c,e,this.customSpacingX),e+=this.characterHeight+this.customSpacingY;else this.fixedWidth>0?this.resize(this.fixedWidth,this.characterHeight,!0):this.resize(this.currentText.length*(this.characterWidth+this.customSpacingX),this.characterHeight,!0),c=0,this.align===d.ALIGN_RIGHT?c=this.width-this.currentText.length*(this.characterWidth+this.customSpacingX):this.align===d.ALIGN_CENTER&&(c=this.width/2-this.currentText.length*(this.characterWidth+this.customSpacingX)/2,c+=this.customSpacingX/2),0>c&&(c=0),this.pasteLine(this.currentText,c,0,this.customSpacingX);this.requiresReTint=!0},d.prototype.pasteLine=function(a,b,c,d){var f,g=new e.Matrix;for(f=0;f<a.length;f++)if(" "===a.charAt(f))b+=this.characterWidth+d;else if(this.grabData[a.charCodeAt(f)]>=0&&(g.tx=b,g.ty=c,this.stamp.setFrame(this.frameData.getFrame(this.grabData[a.charCodeAt(f)])),this.render(this.stamp,g,!1,!1),b+=this.characterWidth+d,b>this.width))break},d.prototype.getLongestLine=function(){var a,b,c=0;if(this.currentText.length>0)for(a=this.currentText.split("\n"),b=0;b<a.length;b++)a[b].length>c&&(c=a[b].length);return c},d.prototype.removeUnsupportedCharacters=function(a){var b,c,d,e="";for(b=0;b<this.currentText.length;b++)c=this.currentText[b],d=c.charCodeAt(0),(this.grabData[d]>=0||!a&&"\n"===c)&&(e=e.concat(c));return e},d.prototype.generateFrameData=function(a){var b,c,d=0,e=this.offsetX,f=this.offsetY;for(c=0;c<a.length;c++)b=this.frameData.addFrame(new h(c,e,f,this.characterWidth,this.characterHeight)),this.grabData[a.charCodeAt(c)]=b.index,d++,d===this.characterPerRow?(d=0,e=this.offsetX,f+=this.characterHeight+this.characterSpacingY):e+=this.characterWidth+this.characterSpacingX},Object.defineProperty(d.prototype,"text",{get:function(){return this.currentText},set:function(a){var b;b=this.autoUpperCase?a.toUpperCase():a,b!==this.currentText&&(this.currentText=b,this.removeUnsupportedCharacters(this.multiLine),this.buildRetroFontText())}}),Object.defineProperty(d.prototype,"smoothed",{get:function(){return this.stamp.smoothed},set:function(a){this.stamp.smoothed=a,this.buildRetroFontText()}}),b.exports=d},{29:29,7:7,8:8,9:9,pixi:"pixi"}],29:[function(a,b,c){function d(a,b,c){b=b||null,c=c||null,this.type=f.SPRITE,e.Sprite.call(this),h.init.call(this,a,b,c)}var e=a("pixi"),f=a(9),g=(a(45),a(46)),h=a(34),i=a(37),j=a(36);d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,h.install.call(d.prototype,["Mixin","Animation","AutoCull","Bounds","Destroy","FixedToCamera","LoadTexture","InWorld","InputEnabled","Overlap"]),d.prototype.preUpdateCore=h.preUpdate,d.prototype.preUpdateInWorld=i.preUpdate,d.prototype.preUpdateFixedToCamera=j.preUpdate,d.prototype.update=function(){this.preUpdateInWorld(),this.preUpdateCore(),this.preUpdateFixedToCamera()},d.prototype.getBounds=function(a){return this._currentBounds||(this._currentBounds=(new g).copyFrom(e.Sprite.prototype.getBounds.call(this,a))),this._currentBounds},b.exports=d},{34:34,36:36,37:37,45:45,46:46,9:9,pixi:"pixi"}],30:[function(a,b,c){function d(a,b,c){b=b||null,c=c||[],this.points=[],this._hasUpdateAnimation=!1,this._updateAnimationCallback=null,this.type=f.STRIP,e.mesh.Rope.call(this,a.cache.getItem("__default",g.TEXTURE).texture,c),h.init.call(this,a,b)}var e=a("pixi"),f=a(9),g=a(47),h=a(34);d.prototype=Object.create(e.mesh.Rope.prototype),d.prototype.constructor=d,h.install.call(d.prototype,["Mixin","Bounds","Destroy","LoadTexture"]),d.prototype.preUpdateCore=h.preUpdate,d.prototype.update=function(){this.preUpdateCore(),this._hasUpdateAnimation&&this.updateAnimation.call(this)},Object.defineProperty(d.prototype,"updateAnimation",{get:function(){return this._updateAnimation},set:function(a){a&&"function"==typeof a?(this._hasUpdateAnimation=!0,this._updateAnimation=a):(this._hasUpdateAnimation=!1,this._updateAnimation=null)}}),b.exports=d},{34:34,47:47,9:9,pixi:"pixi"}],31:[function(a,b,c){function d(){}d.prototype={play:function(a,b,c,d){return this.animations?this.animations.play(a,b,c,d):void 0}},b.exports=d},{}],32:[function(a,b,c){function d(){}d.prototype={autoCull:!1,inCamera:{get:function(){return this.autoCull||this.checkWorldBounds||(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y),this.game.world.camera.view.intersects(this._bounds)}}},b.exports=d},{}],33:[function(a,b,c){function d(){}d.prototype={offsetX:{get:function(){return this.anchor.x*this.width}},offsetY:{get:function(){return this.anchor.y*this.height}},left:{get:function(){return this.x-this.offsetX}},right:{get:function(){return this.x+this.width-this.offsetX}},top:{get:function(){return this.y-this.offsetY}},bottom:{get:function(){return this.y+this.height-this.offsetY}}},b.exports=d},{}],34:[function(a,b,c){function d(){}var e=a(74),f=a(45),g=(a(46),a(5)),h=a(40),i=a(31),j=a(39),k=a(32),l=a(37),m=a(33),n=a(38),o=a(36),p=a(35),q=a(41);d.modules={Mixin:h,Animation:i,LoadTexture:j,AutoCull:k,InWorld:l,Bounds:m,InputEnabled:n,FixedToCamera:o,Destroy:p,Overlap:q},d.install=function(a){var b,c,f;for(e.mixinPrototype(this,d.prototype),this.components={},f=0;f<a.length;f++)b=a[f],c="Destroy"===b?!0:!1,e.mixinPrototype(this,d.modules[b].prototype,c),this.components[b]=!0},d.init=function(a,b,c){this.game=a,this.key=b,this.components.Animation&&(this.animations=new g(this)),this.components.LoadTexture&&null!==b&&this.loadTexture(b,c),this.components.FixedToCamera&&(this.cameraOffset=new f(this.x,this.y))},d.preUpdate=function(){return this.pendingDestroy?void this.destroy():this.exists&&this.parent.exists?(this.visible&&(this.renderOrderID=this.game.stage.currentRenderOrderID++),this.animations&&this.animations.update(),!0):(this.renderOrderID=-1,!1)},d.prototype={game:null,name:"",components:{},z:0,animations:void 0,key:"",debug:!1,renderOrderID:0,pendingDestroy:!1,_exists:!0,exists:{get:function(){return this._exists},set:function(a){a?(this._exists=!0,this.visible=!0):(this._exists=!1,this.visible=!1)}},update:function(){}},b.exports=d},{31:31,32:32,33:33,35:35,36:36,37:37,38:38,39:39,40:40,41:41,45:45,46:46,5:5,74:74}],35:[function(a,b,c){function d(){}var e=a("pixi"),f=a(20);d.prototype={destroyPhase:!1,destroy:function(a){if(null!==this.game&&!this.destroyPhase){void 0===a&&(a=!0),this.destroyPhase=!0,this.parent&&(this.parent instanceof f?this.parent.remove(this):this.parent.removeChild(this)),this.input&&this.input.destroy(),this.animations&&this.animations.destroy();var b=this.children.length;if(a)for(;b--;)this.children[b].destroy(a);else for(;b--;)this.removeChild(this.children[b]);this._frame&&(this._frame=null),this.alive=!1,this.exists=!1,this.visible=!1,this.game=null,this.renderable=!1,e.Sprite.prototype.destroy.call(this),this.destroyPhase=!1,this.pendingDestroy=!1}}},b.exports=d},{20:20,pixi:"pixi"}],36:[function(a,b,c){function d(){}var e=a(45);d.preUpdate=function(){var a=this.game;this.fixedToCamera&&(this.position.x=a.camera.x,this.position.y=a.camera.y)},d.prototype={_fixedToCamera:!1,fixedToCamera:{get:function(){return this._fixedToCamera},set:function(a){a?(this._fixedToCamera=!0,this.cameraOffset.set(this.x,this.y)):this._fixedToCamera=!1}},cameraOffset:new e},b.exports=d},{45:45}],37:[function(a,b,c){function d(){}var e=a(46);d.preUpdate=function(){var a,b=this.game;(this.autoCull||this.checkWorldBounds)&&(this.autoCullBounds.copyFrom(this.getBounds()),this.autoCullBounds.x+=b.camera.view.x,this.autoCullBounds.y+=b.camera.view.y,this.autoCull&&(a=b.world.camera.view.intersects(this.autoCullBounds),this.autoCullFired&&a?(this.autoCullFired=!1,this.renderable=!0,b.world.camera.totalInView++):this.autoCullFired||a||(this.autoCullFired=!0,this.renderable=!1,b.world.camera.totalInView--)),this.checkWorldBounds&&(this.outOfBoundsFired&&a?(this.outOfBoundsFired=!1,this.emit("enterBounds",this)):this.outOfBoundsFired||a||(this.outOfBoundsFired=!0,this.emit("exitBounds",this))))},d.prototype={autoCullBounds:new e,autoCullFired:!0,checkWorldBounds:!1,outOfBoundsFired:!1,inWorld:{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}},b.exports=d},{46:46}],38:[function(a,b,c){function d(){}var e=a(12);d.prototype={input:null,inputEnabled:{get:function(){return this.input&&this.input.enabled},set:function(a){a?null===this.input?(this.input=new e(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}},b.exports=d},{12:12}],39:[function(a,b,c){function d(){}var e=a("pixi"),f=a(46);d.prototype={customRender:!1,_frame:null,loadTexture:function(a,b,c){(c||void 0===c)&&this.animations&&this.animations.stop(),this.key=a,this.customRender=!1;var d=!0,g=!this.texture.baseTexture.scaleMode;a instanceof e.RenderTexture||a instanceof e.Texture?this.texture=a:(img=this.game.cache.getImage(a,!0),this.key=img.key,this.texture=new e.Texture(img.base),this.animations&&(d=!this.animations.loadFrameData(img.frameData,b||0))),d&&(this._frame=f.clone(this.texture.frame)),g||(this.texture.baseTexture.scaleMode=1),img.base.isPowerOfTwo&&(img.base.mipmap=!0)},setFrame:function(a){this._frame=a,this.texture.frame.x=a.x,this.texture.frame.y=a.y,this.texture.frame.width=a.width,this.texture.frame.height=a.height,this.texture.crop.x=a.x,this.texture.crop.y=a.y,this.texture.crop.width=a.width,this.texture.crop.height=a.height,a.trimmed?(this.texture.trim?(this.texture.trim.x=a.spriteSourceSizeX,this.texture.trim.y=a.spriteSourceSizeY,this.texture.trim.width=a.sourceSizeW,this.texture.trim.height=a.sourceSizeH):this.texture.trim={x:a.spriteSourceSizeX,y:a.spriteSourceSizeY,width:a.sourceSizeW,height:a.sourceSizeH},this.texture.width=a.sourceSizeW,this.texture.height=a.sourceSizeH,this.texture.frame.width=a.sourceSizeW,this.texture.frame.height=a.sourceSizeH):!a.trimmed&&this.texture.trim&&(this.texture.trim=null),this.cropRect&&this.updateCrop(),this.texture.requiresReTint=!0,this.texture._updateUvs(),this.tilingTexture&&(this.refreshTexture=!0)},resizeFrame:function(a,b,c){this.texture.frame.resize(b,c),this.texture.setFrame(this.texture.frame)},resetFrame:function(){this._frame&&this.setFrame(this._frame)},frame:{get:function(){return this.animations.frame},set:function(a){this.animations.frame=a}}},b.exports=d},{46:46,pixi:"pixi"}],40:[function(a,b,c){function d(){}var e=a(74);d.prototype={mixinPrototype:function(a){e.mixinPrototype(this,a,!0)}},b.exports=d},{74:74}],41:[function(a,b,c){function d(){}var e=a(46);d.prototype={overlap:function(a){return e.intersects(this.getBounds(),a)}},b.exports=d},{46:46}],42:[function(a,b,c){(function(c){function d(a,b,c){a=a||0,b=b||0,c=c||0,this.x=a,this.y=b,this._radius=c,c>0?this._diameter=2*c:this._diameter=0,this.type=e.CIRCLE}var e=a(9),f=a(45),g=a(46),h=a(76);d.prototype={circumference:function(){return 2*(h.PI*this._radius)},random:function(a,b){var d,e,g,h,i;return void 0===a&&(a=!1),void 0===b&&(b=new f),d=2*c.Math.PI*c.Math.random(),e=c.Math.random()+c.Math.random(),g=e>1?2-e:e,h=g*c.Math.cos(d),i=g*c.Math.sin(d),a?(b.x=h*this.radius,b.y=i*this.radius):(b.x=this.x+h*this.radius,b.y=this.y+i*this.radius),b},getBounds:function(){return new g(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(a,b,c){return this.x=a,this.y=b,this._radius=c,this._diameter=2*c,this},copyFrom:function(a){return this.setTo(a.x,a.y,a.diameter)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.radius=this._radius,a},distance:function(a,b){var d=h.distance(this.x,this.y,a.x,a.y);return b?c.Math.round(d):d},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y,this.diameter):a.setTo(this.x,this.y,this.diameter),a},contains:function(a,b){return d.contains(this,a,b)},circumferencePoint:function(a,b,c){return d.circumferencePoint(this,a,b,c)},circumferenceAngle:function(a){return d.circumferenceAngle(this,a)},offset:function(a,b){return this.x+=a,this.y+=b,this},offsetPoint:function(a){return this.offset(a.x,a.y)},toString:function(){return"[{Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"diameter",{get:function(){return this._diameter},set:function(a){a>0&&(this._diameter=a,this._radius=.5*a)}}),Object.defineProperty(d.prototype,"radius",{get:function(){return this._radius},set:function(a){a>0&&(this._radius=a,this._diameter=2*a)}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.x-this._radius},set:function(a){a>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-a}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this._radius},set:function(a){a<this.x?(this._radius=0,this._diameter=0):this.radius=a-this.x}}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y-this._radius},set:function(a){a>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-a}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(a){a<this.y?(this._radius=0,this._diameter=0):this.radius=a-this.y}}),Object.defineProperty(d.prototype,"area",{get:function(){return this._radius>0?c.Math.PI*this._radius*this._radius:0}}),Object.defineProperty(d.prototype,"empty",{get:function(){return 0===this._diameter},set:function(a){a===!0&&this.setTo(0,0,0)}}),d.contains=function(a,b,c){var d,e;return a.radius>0&&b>=a.left&&b<=a.right&&c>=a.top&&c<=a.bottom?(d=(a.x-b)*(a.x-b),e=(a.y-c)*(a.y-c),d+e<=a.radius*a.radius):!1},d.equals=function(a,b){return a.x==b.x&&a.y==b.y&&a.diameter==b.diameter},d.intersects=function(a,b){return h.distance(a.x,a.y,b.x,b.y)<=a.radius+b.radius},d.circumferencePoint=function(a,b,d,e,g){return void 0===d&&(d=!1),void 0===e&&(e=!1),void 0===g&&(g=new f),d===!0&&(b=h.degToRad(b)),e?(g.x=a.radius*c.Math.cos(b),g.y=a.radius*c.Math.sin(b)):(g.x=a.x+a.radius*c.Math.cos(b),g.y=a.y+a.radius*c.Math.sin(b)),g},d.circumferenceAngle=function(a,b){return c.Math.atan2(b.y-a.y,b.x-a.x)},d.intersectsRectangle=function(a,b){var d,e,f,g,h,i,j,k=c.Math.abs(a.x-b.x-b.halfWidth),l=b.halfWidth+a.radius;return k>l?!1:(d=c.Math.abs(a.y-b.y-b.halfHeight),e=b.halfHeight+a.radius,d>e?!1:k<=b.halfWidth||d<=b.halfHeight?!0:(f=k-b.halfWidth,g=d-b.halfHeight,h=f*f,i=g*g,j=a.radius*a.radius,j>=h+i))},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{45:45,46:46,76:76,9:9}],43:[function(a,b,c){(function(c){function d(a,b,c,d){a=a||0,b=b||0,c=c||0,d=d||0,this.x=a,this.y=b,this.width=c,this.height=d,this.type=e.ELLIPSE}var e=a(9),f=a(46),g=a(45);d.prototype={setTo:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},getBounds:function(){return new f(this.x-this.width,this.y-this.height,this.width,this.height)},copyFrom:function(a){return this.setTo(a.x,a.y,a.width,a.height)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y,this.width,this.height):a.setTo(this.x,this.y,this.width,this.height),a},contains:function(a,b){return d.contains(this,a,b)},circumferencePoint:function(a,b,c){return d.circumferencePoint(this,a,b,c)},random:function(a){var b,d;return void 0===a&&(a=new g),b=c.Math.random()*c.Math.PI*2,d=c.Math.random(),a.x=c.Math.sqrt(d)*c.Math.cos(b),a.y=c.Math.sqrt(d)*c.Math.sin(b),a.x=this.x+a.x*this.width/2,a.y=this.y+a.y*this.height/2,a},toString:function(){return"[{Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"left",{get:function(){return this.x},set:function(a){this.x=a}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this.width},set:function(a){a<this.x?this.width=0:this.width=a-this.x}}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y},set:function(a){this.y=a}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this.height},set:function(a){a<this.y?this.height=0:this.height=a-this.y}}),Object.defineProperty(d.prototype,"empty",{get:function(){return 0===this.width||0===this.height},set:function(a){a===!0&&this.setTo(0,0,0,0)}}),d.contains=function(a,b,c){var d,e;return a.width<=0||a.height<=0?!1:(d=(b-a.x)/a.width-.5,e=(c-a.y)/a.height-.5,d*=d,e*=e,.25>d+e)},d.circumferencePoint=function(a,b,d,e){return void 0===d&&(d=!1),void 0===e&&(e=new g),d===!0&&(b=c.Math.degToRad(b)),e.x=a.x+a.width*c.Math.cos(b),e.y=a.y+a.height*c.Math.sin(b),e},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{45:45,46:46,9:9}],44:[function(a,b,c){(function(c){function d(a,b,c,d){4===arguments.length?(a=a||0,b=b||0,c=c||0,d=d||0,this.start=new f(a,b),this.end=new f(c,d)):(this.start=(new f).copyFrom(a),this.end=(new f).copyFrom(b)),this.type=e.LINE}var e=a(9),f=a(45),g=a(76);d.prototype={setTo:function(a,b,c,d){return this.start.setTo(a,b),this.end.setTo(c,d),this},fromSprite:function(a,b,c){return void 0===c&&(c=!1),c?this.setTo(a.center.x,a.center.y,b.center.x,b.center.y):this.setTo(a.x,a.y,b.x,b.y)},fromAngle:function(a,b,d,e){return this.start.setTo(a,b),this.end.setTo(a+c.Math.cos(d)*e,b+c.Math.sin(d)*e),this},rotate:function(a,b){var c=(this.start.x+this.end.x)/2,d=(this.start.y+this.end.y)/2;return this.start.rotate(c,d,a,b),this.end.rotate(c,d,a,b),this},rotateAround:function(a,b,c,d){return this.start.rotate(a,b,c,d),this.end.rotate(a,b,c,d),this},intersects:function(a,b,c){return d.intersectsPoints(this.start,this.end,a.start,a.end,b,c)},reflect:function(a){return d.reflect(this,a)},midPoint:function(a){return void 0===a&&(a=new f),a.x=(this.start.x+this.end.x)/2,a.y=(this.start.y+this.end.y)/2,a},centerOn:function(a,b){var c=(this.start.x+this.end.x)/2,d=(this.start.y+this.end.y)/2,e=a-c,f=b-d;return this.start.add(e,f),this.end.add(e,f),this},pointOnLine:function(a,b){return(a-this.start.x)*(this.end.y-this.start.y)===(this.end.x-this.start.x)*(b-this.start.y)},pointOnSegment:function(a,b){var d=c.Math.min(this.start.x,this.end.x),e=c.Math.max(this.start.x,this.end.x),f=c.Math.min(this.start.y,this.end.y),g=c.Math.max(this.start.y,this.end.y);return this.pointOnLine(a,b)&&a>=d&&e>=a&&b>=f&&g>=b},pointAtDistance:function(a,b){return d.pointAtDistance(this.start,this.end,a,b)},random:function(a){void 0===a&&(a=new f);var b=c.Math.random();return a.x=this.start.x+b*(this.end.x-this.start.x),a.y=this.start.y+b*(this.end.y-this.start.y),a},coordinatesOnLine:function(a,b){var d,e,f,g,h,i,j,k,l,m,n;for(void 0===a&&(a=1),void 0===b&&(b=[]),d=c.Math.round(this.start.x),e=c.Math.round(this.start.y),f=c.Math.round(this.end.x),g=c.Math.round(this.end.y),h=c.Math.abs(f-d),i=c.Math.abs(g-e),j=f>d?1:-1,k=g>e?1:-1,l=h-i,b.push([d,e]),m=1;d!=f||e!=g;)n=l<<1,n>-i&&(l-=i,d+=j),h>n&&(l+=h,e+=k),m%a===0&&b.push([d,e]),m++;return b},clone:function(a){return void 0===a||null===a?a=new d(this.start.x,this.start.y,this.end.x,this.end.y):a.setTo(this.start.x,this.start.y,this.end.x,this.end.y),a}},Object.defineProperty(d.prototype,"length",{get:function(){return c.Math.sqrt((this.end.x-this.start.x)*(this.end.x-this.start.x)+(this.end.y-this.start.y)*(this.end.y-this.start.y))}}),Object.defineProperty(d.prototype,"angle",{get:function(){return c.Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x)}}),Object.defineProperty(d.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)}}),Object.defineProperty(d.prototype,"perpSlope",{get:function(){return-((this.end.x-this.start.x)/(this.end.y-this.start.y))}}),Object.defineProperty(d.prototype,"vector",{get:function(){return new f(this.end.x-this.start.x,this.end.y-this.start.y)}}),Object.defineProperty(d.prototype,"x",{get:function(){return c.Math.min(this.start.x,this.end.x)}}),Object.defineProperty(d.prototype,"y",{get:function(){return c.Math.min(this.start.y,this.end.y)}}),Object.defineProperty(d.prototype,"left",{get:function(){return c.Math.min(this.start.x,this.end.x)}}),Object.defineProperty(d.prototype,"right",{get:function(){return c.Math.max(this.start.x,this.end.x)}}),Object.defineProperty(d.prototype,"top",{get:function(){return c.Math.min(this.start.y,this.end.y)}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return c.Math.max(this.start.y,this.end.y)}}),Object.defineProperty(d.prototype,"width",{get:function(){return c.Math.abs(this.start.x-this.end.x)}}),Object.defineProperty(d.prototype,"height",{get:function(){return c.Math.abs(this.start.y-this.end.y)}}),Object.defineProperty(d.prototype,"normalX",{get:function(){return c.Math.cos(this.angle-1.5707963267948966)}}),Object.defineProperty(d.prototype,"normalY",{get:function(){return c.Math.sin(this.angle-1.5707963267948966)}}),Object.defineProperty(d.prototype,"normalAngle",{get:function(){return g.wrap(this.angle-1.5707963267948966,-c.Math.PI,c.Math.PI)}}),d.pointAtDistance=function(a,b,c,d){return void 0===d&&(d=new f),d.setTo(b.x-a.x,b.y-a.y),d.normalize(),d.multiply(c,c),d.x=a.x+d.x,d.y=a.y+d.y,d},d.intersectsPoints=function(a,b,c,d,e,g){var h,i,j,k,l,m,n,o,p,q;return void 0===e&&(e=!0),void 0===g&&(g=new f),h=b.y-a.y,i=d.y-c.y,j=a.x-b.x,k=c.x-d.x,l=b.x*a.y-a.x*b.y,m=d.x*c.y-c.x*d.y,n=h*k-i*j,0===n?null:(g.x=(j*m-k*l)/n,g.y=(i*l-h*m)/n,e?(o=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y),p=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/o,q=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/o,p>=0&&1>=p&&q>=0&&1>=q?g:null):g)},d.intersects=function(a,b,c,e){return d.intersectsPoints(a.start,a.end,b.start,b.end,c,e)},d.reflect=function(a,b){return 2*b.normalAngle-3.141592653589793-a.angle},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{45:45,76:76,9:9}],45:[function(a,b,c){(function(c){function d(a,b){a=a||0,b=b||0,this.x=a,this.y=b,this.type=e.POINT}var e=a(9),f=a(76);d.prototype={copyFrom:function(a){return this.setTo(a.x,a.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(a,b){return this.x=a||0,this.y=b||(0!==b?this.x:0),this},set:function(a,b){
return this.x=a||0,this.y=b||(0!==b?this.x:0),this},add:function(a,b){return this.x+=a,this.y+=b,this},subtract:function(a,b){return this.x-=a,this.y-=b,this},multiply:function(a,b){return this.x*=a,this.y*=b,this},divide:function(a,b){return this.x/=a,this.y/=b,this},clampX:function(a,b){return this.x=f.clamp(this.x,a,b),this},clampY:function(a,b){return this.y=f.clamp(this.y,a,b),this},clamp:function(a,b){return this.x=f.clamp(this.x,a,b),this.y=f.clamp(this.y,a,b),this},toFixed:function(a){return a=a||2,this.x=f.roundTo(this.x,a),this.y=f.roundTo(this.y,a),this},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y):a.setTo(this.x,this.y),a},copyTo:function(a){return a.x=this.x,a.y=this.y,a},distance:function(a,b){return d.distance(this,a,b)},equals:function(a){return a.x===this.x&&a.y===this.y},angle:function(a,b){return void 0===b&&(b=!1),b?f.radToDeg(c.Math.atan2(a.y-this.y,a.x-this.x)):c.Math.atan2(a.y-this.y,a.x-this.x)},rotate:function(a,b,c,e,f){return d.rotate(this,a,b,c,e,f)},getMagnitude:function(){return c.Math.sqrt(this.x*this.x+this.y*this.y)},getMagnitudeSq:function(){return this.x*this.x+this.y*this.y},setMagnitude:function(a){return this.normalize().multiply(a,a)},normalize:function(){if(!this.isZero()){var a=this.getMagnitude();this.x/=a,this.y/=a}return this},isZero:function(){return 0===this.x&&0===this.y},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},interpolate:function(a,b,c){return d.interpolate(this,a,b,c)},perp:function(){return this.setTo(-this.y,this.x)},rperp:function(){return this.setTo(this.y,-this.x)},normalRightHand:function(){return this.setTo(-1*this.y,this.x)},floor:function(){return this.setTo(c.Math.floor(this.x),c.Math.floor(this.y))},ceil:function(){return this.setTo(c.Math.ceil(this.x),c.Math.ceil(this.y))},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}},d.prototype.constructor=d,d.add=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x+b.x,c.y=a.y+b.y,c},d.subtract=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x-b.x,c.y=a.y-b.y,c},d.multiply=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x*b.x,c.y=a.y*b.y,c},d.divide=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x/b.x,c.y=a.y/b.y,c},d.equals=function(a,b){return a.x===b.x&&a.y===b.y},d.angle=function(a,b){var d=c.Math.atan2(a.y-b.y,a.x-b.x);return 0>d&&(d+=2*c.Math.PI),d},d.negative=function(a,b){return void 0===b&&(b=new d),b.setTo(-a.x,-a.y)},d.multiplyAdd=function(a,b,c,e){return void 0===e&&(e=new d),e.setTo(a.x+b.x*c,a.y+b.y*c)},d.interpolate=function(a,b,c,e){return void 0===e&&(e=new d),e.setTo(a.x+(b.x-a.x)*c,a.y+(b.y-a.y)*c)},d.perp=function(a,b){return void 0===b&&(b=new d),b.setTo(-a.y,a.x)},d.rperp=function(a,b){return void 0===b&&(b=new d),b.setTo(a.y,-a.x)},d.distance=function(a,b,d){var e=f.distance(a.x,a.y,b.x,b.y);return d?c.Math.round(e):e},d.project=function(a,b,c){void 0===c&&(c=new d);var e=a.dot(b)/b.getMagnitudeSq();return 0!==e&&c.setTo(e*b.x,e*b.y),c},d.projectUnit=function(a,b,c){void 0===c&&(c=new d);var e=a.dot(b);return 0!==e&&c.setTo(e*b.x,e*b.y),c},d.normalRightHand=function(a,b){return void 0===b&&(b=new d),b.setTo(-1*a.y,a.x)},d.normalize=function(a,b){void 0===b&&(b=new d);var c=a.getMagnitude();return 0!==c&&b.setTo(a.x/c,a.y/c),b},d.rotate=function(a,b,d,e,g,h){var i,j,k,l,m;return g&&(e=f.degToRad(e)),void 0===h?(a.subtract(b,d),i=c.Math.sin(e),j=c.Math.cos(e),k=j*a.x-i*a.y,l=i*a.x+j*a.y,a.x=k+b,a.y=l+d):(m=e+c.Math.atan2(a.y-d,a.x-b),a.x=b+h*c.Math.cos(m),a.y=d+h*c.Math.sin(m)),a},d.centroid=function(a,b){var c,e;if(void 0===b&&(b=new d),"[object Array]"!==Object.prototype.toString.call(a))throw Error("Point. Parameter 'points' must be an array");if(c=a.length,1>c)throw Error("Point. Parameter 'points' array must not be empty");if(1===c)return b.copyFrom(a[0]),b;for(e=0;c>e;e++)d.add(b,a[e],b);return b.divide(c,c),b},d.parse=function(a,b,c){b=b||"x",c=c||"y";var e=new d;return a[b]&&(e.x=parseInt(a[b],10)),a[c]&&(e.y=parseInt(a[c],10)),e},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{76:76,9:9}],46:[function(a,b,c){function d(a,b,c,d){a=a||0,b=b||0,c=c||0,d=d||0,this.x=a,this.y=b,this.width=c,this.height=d,this.type=e.RECTANGLE}var e=a(9),f=a(45);d.prototype={offset:function(a,b){return this.x+=a,this.y+=b,this},offsetPoint:function(a){return this.offset(a.x,a.y)},setTo:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},scale:function(a,b){return void 0===b&&(b=a),this.width*=a,this.height*=b,this},centerOn:function(a,b){return this.centerX=a,this.centerY=b,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},ceil:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y)},ceilAll:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},copyFrom:function(a){return this.setTo(a.x,a.y,a.width,a.height)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},inflate:function(a,b){return d.inflate(this,a,b)},size:function(a){return d.size(this,a)},resize:function(a,b){return this.width=a,this.height=b,this},clone:function(a){return d.clone(this,a)},contains:function(a,b){return d.contains(this,a,b)},containsRect:function(a){return d.containsRect(a,this)},equals:function(a){return d.equals(this,a)},intersection:function(a,b){return d.intersection(this,a,b)},intersects:function(a){return d.intersects(this,a)},intersectsRaw:function(a,b,c,e,f){return d.intersectsRaw(this,a,b,c,e,f)},union:function(a,b){return d.union(this,a,b)},random:function(a){return void 0===a&&(a=new f),a.x=this.randomX,a.y=this.randomY,a},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(d.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this.height},set:function(a){a<=this.y?this.height=0:this.height=a-this.y}}),Object.defineProperty(d.prototype,"bottomLeft",{get:function(){return new f(this.x,this.bottom)},set:function(a){this.x=a.x,this.bottom=a.y}}),Object.defineProperty(d.prototype,"bottomRight",{get:function(){return new f(this.right,this.bottom)},set:function(a){this.right=a.x,this.bottom=a.y}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.x},set:function(a){a>=this.right?this.width=0:this.width=this.right-a,this.x=a}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this.width},set:function(a){a<=this.x?this.width=0:this.width=a-this.x}}),Object.defineProperty(d.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(d.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(d.prototype,"center",{get:function(){return new f(this.centerX,this.centerY)}}),Object.defineProperty(d.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(a){this.x=a-this.halfWidth}}),Object.defineProperty(d.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(a){this.y=a-this.halfHeight}}),Object.defineProperty(d.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width}}),Object.defineProperty(d.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height}}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y},set:function(a){a>=this.bottom?(this.height=0,this.y=a):this.height=this.bottom-a}}),Object.defineProperty(d.prototype,"topLeft",{get:function(){return new f(this.x,this.y)},set:function(a){this.x=a.x,this.y=a.y}}),Object.defineProperty(d.prototype,"topRight",{get:function(){return new f(this.x+this.width,this.y)},set:function(a){this.right=a.x,this.y=a.y}}),Object.defineProperty(d.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(a){a===!0&&this.setTo(0,0,0,0)}}),d.inflate=function(a,b,c){return a.x-=b,a.width+=2*b,a.y-=c,a.height+=2*c,a},d.inflatePoint=function(a,b){return d.inflate(a,b.x,b.y)},d.size=function(a,b){return void 0===b||null===b?b=new f(a.width,a.height):b.setTo(a.width,a.height),b},d.clone=function(a,b){return void 0===b||null===b?b=new d(a.x,a.y,a.width,a.height):b.setTo(a.x,a.y,a.width,a.height),b},d.contains=function(a,b,c){return a.width<=0||a.height<=0?!1:b>=a.x&&b<a.right&&c>=a.y&&c<a.bottom},d.containsRaw=function(a,b,c,d,e,f){return e>=a&&a+c>e&&f>=b&&b+d>f},d.containsPoint=function(a,b){return d.contains(a,b.x,b.y)},d.containsRect=function(a,b){return a.volume>b.volume?!1:a.x>=b.x&&a.y>=b.y&&a.right<b.right&&a.bottom<b.bottom},d.equals=function(a,b){return a.x==b.x&&a.y==b.y&&a.width==b.width&&a.height==b.height},d.sameDimensions=function(a,b){return a.width===b.width&&a.height===b.height},d.intersection=function(a,b,c){return void 0===c&&(c=new d),d.intersects(a,b)&&(c.x=Math.max(a.x,b.x),c.y=Math.max(a.y,b.y),c.width=Math.min(a.right,b.right)-c.x,c.height=Math.min(a.bottom,b.bottom)-c.y),c},d.intersects=function(a,b){return a.width<=0||a.height<=0||b.width<=0||b.height<=0?!1:!(a.right<b.x||a.bottom<b.y||a.x>b.right||a.y>b.bottom)},d.intersectsRaw=function(a,b,c,d,e,f){return void 0===f&&(f=0),!(b>a.right+f||c<a.left-f||d>a.bottom+f||e<a.top-f)},d.union=function(a,b,c){return void 0===c&&(c=new d),c.setTo(Math.min(a.x,b.x),Math.min(a.y,b.y),Math.max(a.right,b.right)-Math.min(a.left,b.left),Math.max(a.bottom,b.bottom)-Math.min(a.top,b.top))},d.aabb=function(a,b){void 0===b&&(b=new d);var c=Number.MIN_VALUE,e=Number.MAX_VALUE,f=Number.MIN_VALUE,g=Number.MAX_VALUE;return a.forEach(function(a){a.x>c&&(c=a.x),a.x<e&&(e=a.x),a.y>f&&(f=a.y),a.y<g&&(g=a.y)}),b.setTo(e,g,c-e,f-g),b},b.exports=d},{45:45,9:9}],47:[function(a,b,c){function d(a){this.game=a,this.autoResolveURL=!1,this._cache={canvas:{},image:{},texture:{},sound:{},video:{},text:{},json:{},xml:{},physics:{},tilemap:{},binary:{},bitmapData:{},bitmapFont:{},shader:{},renderTexture:{}},this._urlMap={},this._urlResolver=new Image,this._urlTemp=null,this._cacheMap=[],this._cacheMap[d.CANVAS]=this._cache.canvas,this._cacheMap[d.IMAGE]=this._cache.image,this._cacheMap[d.TEXTURE]=this._cache.texture,this._cacheMap[d.SOUND]=this._cache.sound,this._cacheMap[d.TEXT]=this._cache.text,this._cacheMap[d.PHYSICS]=this._cache.physics,this._cacheMap[d.TILEMAP]=this._cache.tilemap,this._cacheMap[d.BINARY]=this._cache.binary,this._cacheMap[d.BITMAPDATA]=this._cache.bitmapData,this._cacheMap[d.BITMAPFONT]=this._cache.bitmapFont,this._cacheMap[d.JSON]=this._cache.json,this._cacheMap[d.XML]=this._cache.xml,this._cacheMap[d.VIDEO]=this._cache.video,this._cacheMap[d.SHADER]=this._cache.shader,this._cacheMap[d.RENDER_TEXTURE]=this._cache.renderTexture,this.addDefaultImage(),this.addDefaultTexture(),this.addMissingImage()}var e=a("pixi"),f=a(48),g=a(7),h=a(8),i=a(6),j=a(74);d.CANVAS=1,d.IMAGE=2,d.TEXTURE=3,d.SOUND=4,d.TEXT=5,d.PHYSICS=6,d.TILEMAP=7,d.BINARY=8,d.BITMAPDATA=9,d.BITMAPFONT=10,d.JSON=11,d.XML=12,d.VIDEO=13,d.SHADER=14,d.RENDER_TEXTURE=15,d.prototype={addCanvas:function(a,b,c){void 0===c&&(c=b.getContext("2d")),this._cache.canvas[a]={canvas:b,context:c}},addImage:function(a,b,c){this.checkImageKey(a)&&this.removeImage(a);var d=new e.BaseTexture(c),f={key:a,url:b,data:c,base:d,frame:new g(0,0,0,c.width,c.height,a),frameData:new h};f.frameData.addFrame(new g(0,0,0,c.width,c.height,b)),this._cache.image[a]=f,this._resolveURL(b,f),e.utils.BaseTextureCache[a]=d,d.resolution=e.utils.getResolutionOfUrl(b)},addDefaultImage:function(){var a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==",this.addImage("__default",null,a)},addMissingImage:function(){var a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==",this.addImage("__missing",null,a)},addDefaultTexture:function(){var a=this.getImage("__default",!0).base,b=new e.Texture(a);this.addTexture("__default",b)},addSound:function(a,b,c,d,e){void 0===d&&(d=!0,e=!1),void 0===e&&(d=!1,e=!0);var f=!1;e&&(f=!0),this._cache.sound[a]={url:b,data:c,isDecoding:!1,decoded:f,webAudio:d,audioTag:e,locked:this.game.sound.touchLocked},this._resolveURL(b,this._cache.sound[a])},addText:function(a,b,c){this._cache.text[a]={url:b,data:c},this._resolveURL(b,this._cache.text[a])},addTilemap:function(a,b,c){this._cache.tilemap[a]={url:b,data:c},this._resolveURL(b,this._cache.tilemap[a])},addBinary:function(a,b){this._cache.binary[a]=b},addBitmapData:function(a,b,c){return b.key=a,void 0===c&&(c=new h,c.addFrame(b.textureFrame)),this._cache.bitmapData[a]={data:b,frameData:c},b},addJSON:function(a,b,c){this._cache.json[a]={url:b,data:c},this._resolveURL(b,this._cache.json[a])},addXML:function(a,b,c){this._cache.xml[a]={url:b,data:c},this._resolveURL(b,this._cache.xml[a])},addShader:function(a,b,c){this._cache.shader[a]={url:b,data:c},this._resolveURL(b,this._cache.shader[a])},addRenderTexture:function(a,b){this._cache.renderTexture[a]={texture:b,frame:new g(0,0,0,b.width,b.height,"","")}},addTexture:function(a,b){this._cache.texture[a]={texture:b}},addSpriteSheet:function(a,b,c,d,f,g,h,j){void 0===g&&(g=-1),void 0===h&&(h=0),void 0===j&&(j=0);var k={key:a,url:b,data:c,frameWidth:d,frameHeight:f,margin:h,spacing:j,base:new e.BaseTexture(c),frameData:i.spriteSheet(this.game,c,d,f,g,h,j)};this._cache.image[a]=k,this._resolveURL(b,k)},addTextureAtlas:function(a,b,c,d,g){var h={key:a,url:b,data:c,base:new e.BaseTexture(c)};g===f.TEXTURE_ATLAS_JSON_PYXEL?h.frameData=i.JSONDataPyxel(this.game,d,a):Array.isArray(d.frames)?h.frameData=i.JSONData(this.game,d,a):h.frameData=i.JSONDataHash(this.game,d,a),this._cache.image[a]=h,this._resolveURL(b,h)},reloadSound:function(a){var b=this,c=this.getSound(a);c&&(c.data.src=c.url,c.data.addEventListener("canplaythrough",function(){return b.reloadSoundComplete(a)},!1),c.data.load())},reloadSoundComplete:function(a){var b=this.getSound(a);b&&(b.locked=!1,this.onSoundUnlock.dispatch(a))},updateSound:function(a,b,c){var d=this.getSound(a);d&&(d[b]=c)},decodedSound:function(a,b){var c=this.getSound(a);c.data=b,c.decoded=!0,c.isDecoding=!1},isSoundDecoded:function(a){var b=this.getItem(a,d.SOUND,"isSoundDecoded");return b?b.decoded:void 0},isSoundReady:function(a){var b=this.getItem(a,d.SOUND,"isSoundDecoded");return b?b.decoded&&!this.game.sound.touchLocked:void 0},checkKey:function(a,b){return this._cacheMap[a][b]?!0:!1},checkURL:function(a){return this._urlMap[this._resolveURL(a)]?!0:!1},checkCanvasKey:function(a){return this.checkKey(d.CANVAS,a)},checkImageKey:function(a){return this.checkKey(d.IMAGE,a)},checkTextureKey:function(a){return this.checkKey(d.TEXTURE,a)},checkSoundKey:function(a){return this.checkKey(d.SOUND,a)},checkTextKey:function(a){return this.checkKey(d.TEXT,a)},checkTilemapKey:function(a){return this.checkKey(d.TILEMAP,a)},checkBinaryKey:function(a){return this.checkKey(d.BINARY,a)},checkBitmapDataKey:function(a){return this.checkKey(d.BITMAPDATA,a)},checkJSONKey:function(a){return this.checkKey(d.JSON,a)},checkXMLKey:function(a){return this.checkKey(d.XML,a)},checkShaderKey:function(a){return this.checkKey(d.SHADER,a)},checkRenderTextureKey:function(a){return this.checkKey(d.RENDER_TEXTURE,a)},getItem:function(a,b,c,d){return this.checkKey(b,a)?void 0===d?this._cacheMap[b][a]:this._cacheMap[b][a][d]:(c&&console.warn("Cache."+c+': Key "'+a+'" not found in Cache.'),null)},getCanvas:function(a){return this.getItem(a,d.CANVAS,"getCanvas","canvas")},getImage:function(a,b){(void 0===a||null===a)&&(a="__default"),void 0===b&&(b=!1);var c=this.getItem(a,d.IMAGE,"getImage");return null===c&&(c=this.getItem("__missing",d.IMAGE,"getImage")),b?c:c.data},getTextureFrame:function(a){return this.getItem(a,d.TEXTURE,"getTextureFrame","frame")},getSound:function(a){return this.getItem(a,d.SOUND,"getSound")},getSoundData:function(a){return this.getItem(a,d.SOUND,"getSoundData","data")},getText:function(a){return this.getItem(a,d.TEXT,"getText","data")},getTilemapData:function(a){return this.getItem(a,d.TILEMAP,"getTilemapData")},getBinary:function(a){return this.getItem(a,d.BINARY,"getBinary")},getBitmapData:function(a){return this.getItem(a,d.BITMAPDATA,"getBitmapData","data")},getJSON:function(a,b){var c=this.getItem(a,d.JSON,"getJSON","data");return c?b?j.extend(!0,c):c:null},getXML:function(a){return this.getItem(a,d.XML,"getXML","data")},getShader:function(a){return this.getItem(a,d.SHADER,"getShader","data")},getRenderTexture:function(a){return this.getItem(a,d.RENDER_TEXTURE,"getRenderTexture")},getBaseTexture:function(a,b){return void 0===b&&(b=d.IMAGE),this.getItem(a,b,"getBaseTexture","base")},getFrame:function(a,b){return void 0===b&&(b=d.IMAGE),this.getItem(a,b,"getFrame","frame")},getFrameCount:function(a,b){var c=this.getFrameData(a,b);return c?c.total:0},getFrameData:function(a,b){return void 0===b&&(b=d.IMAGE),this.getItem(a,b,"getFrameData","frameData")},hasFrameData:function(a,b){return void 0===b&&(b=d.IMAGE),null!==this.getItem(a,b,"","frameData")},updateFrameData:function(a,b,c){void 0===c&&(c=d.IMAGE),this._cacheMap[c][a]&&(this._cacheMap[c][a].frameData=b)},getFrameByIndex:function(a,b,c){var d=this.getFrameData(a,c);return d?d.getFrame(b):null},getFrameByName:function(a,b,c){var d=this.getFrameData(a,c);return d?d.getFrameByName(b):null},getPixiTexture:function(a){return e.TextureCache[a]?e.TextureCache[a]:(console.warn('Cache.getPixiTexture: Invalid key: "'+a+'"'),null)},getPixiBaseTexture:function(a){return e.BaseTextureCache[a]?e.BaseTextureCache[a]:(console.warn('Cache.getPixiBaseTexture: Invalid key: "'+a+'"'),null)},getURL:function(a){var a=this._resolveURL(a);return a?this._urlMap[a]:(console.warn('Cache.getUrl: Invalid url: "'+a+'" or Cache.autoResolveURL was false'),null)},getKeys:function(a){var b,c;if(void 0===a&&(a=d.IMAGE),b=[],this._cacheMap[a])for(c in this._cacheMap[a])"__default"!==c&&"__missing"!==c&&b.push(c);return b},removeCanvas:function(a){delete this._cache.canvas[a]},removeImage:function(a){var b=this.getImage(a,!0);b.base.destroy(),delete this._cache.image[a]},removeSound:function(a){delete this._cache.sound[a]},removeText:function(a){delete this._cache.text[a]},removeTilemap:function(a){delete this._cache.tilemap[a]},removeBinary:function(a){delete this._cache.binary[a]},removeBitmapData:function(a){delete this._cache.bitmapData[a]},removeJSON:function(a){delete this._cache.json[a]},removeXML:function(a){delete this._cache.xml[a]},removeShader:function(a){delete this._cache.shader[a]},removeRenderTexture:function(a){delete this._cache.renderTexture[a]},removeSpriteSheet:function(a){delete this._cache.spriteSheet[a]},removeTextureAtlas:function(a){delete this._cache.atlas[a]},_resolveURL:function(a,b){return this.autoResolveURL?(this._urlResolver.src=this.game.load.baseURL+a,this._urlTemp=this._urlResolver.src,this._urlResolver.src="",b&&(this._urlMap[this._urlTemp]=b),this._urlTemp):null},destroy:function(){var a,b,c;for(a=0;a<this._cacheMap.length;a++){b=this._cacheMap[a];for(c in b)"__default"!==c&&"__missing"!==c&&(b[c].destroy&&b[c].destroy(),delete b[c])}this._urlMap=null,this._urlResolver=null,this._urlTemp=null}},d.prototype.constructor=d,b.exports=d},{48:48,6:6,7:7,74:74,8:8,pixi:"pixi"}],48:[function(a,b,c){(function(c){function d(a){this.game=a,this.cache=a.cache,this.isLoading=!1,this.hasLoaded=!1,this.resetLocked=!1,this.crossOrigin=!1,this.baseURL="",this.path="",this.useXDomainRequest=!1,this.enableParallel=!0,this.maxParallelDownloads=6,this._withSyncPointDepth=0,this._warnedAboutXDomainRequest=!1,this._fileList=[],this._flightQueue=[],this._processingHead=0,this._fileLoadStarted=!1,this._totalPackCount=0,this._totalFileCount=0,this._loadedPackCount=0,this._loadedFileCount=0,g.call(this)}var e=(a(9),a(76)),f=(a(59),a(56)),g=a(2);d.TEXTURE_ATLAS_JSON_ARRAY=0,d.TEXTURE_ATLAS_JSON_HASH=1,d.TEXTURE_ATLAS_JSON_PYXEL=2,d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.checkKeyExists=function(a,b){return this.getAssetIndex(a,b)>-1},d.prototype.getAssetIndex=function(a,b){var c,d,e=-1;for(c=0;c<this._fileList.length&&(d=this._fileList[c],d.type!==a||d.key!==b||(e=c,d.loaded||d.loading));c++);return e},d.prototype.getAsset=function(a,b){var c=this.getAssetIndex(a,b);return c>-1?{index:c,file:this._fileList[c]}:!1},d.prototype.reset=function(a,b){void 0===b&&(b=!1),this.resetLocked||(this.isLoading=!1,this._processingHead=0,this._fileList.length=0,this._flightQueue.length=0,this._fileLoadStarted=!1,this._totalFileCount=0,this._totalPackCount=0,this._loadedPackCount=0,this._loadedFileCount=0,b&&this.removeAllListeners())},d.prototype.addToFileList=function(a,b,c,d,e,f){var g,h,i,j;if(void 0===e&&(e=!1),void 0===b||""===b)return console.warn("Loader: Invalid or no key given of type "+a),this;if(void 0===c||null===c){if(!f)return console.warn("Loader: No URL given for file type: "+a+" key: "+b),this;c=b+f}if(g={type:a,key:b,path:this.path,url:c,syncPoint:this._withSyncPointDepth>0,data:null,loading:!1,loaded:!1,error:!1},d)for(h in d)g[h]=d[h];return i=this.getAssetIndex(a,b),e&&i>-1?(j=this._fileList[i],j.loading||j.loaded?(this._fileList.push(g),this._totalFileCount++):this._fileList[i]=g):-1===i&&(this._fileList.push(g),this._totalFileCount++),this},d.prototype.replaceInFileList=function(a,b,c,d){return this.addToFileList(a,b,c,d,!0)},d.prototype.image=function(a,b,c){return this.addToFileList("image",a,b,void 0,c,".png")},d.prototype.text=function(a,b,c){return this.addToFileList("text",a,b,void 0,c,".txt")},d.prototype.json=function(a,b,c){return this.addToFileList("json",a,b,void 0,c,".json")},d.prototype.shader=function(a,b,c){return this.addToFileList("shader",a,b,void 0,c,".frag")},d.prototype.xml=function(a,b,c){return this.addToFileList("xml",a,b,void 0,c,".xml")},d.prototype.script=function(a,b,c,d){return void 0===c&&(c=!1),c!==!1&&void 0===d&&(d=this),this.addToFileList("script",a,b,{syncPoint:!0,callback:c,callbackContext:d},!1,".js")},d.prototype.binary=function(a,b,c,d){return void 0===c&&(c=!1),c!==!1&&void 0===d&&(d=this),this.addToFileList("binary",a,b,{callback:c,callbackContext:d},!1,".bin")},d.prototype.spritesheet=function(a,b,c,d,e,f,g){return void 0===e&&(e=-1),void 0===f&&(f=0),void 0===g&&(g=0),this.addToFileList("spritesheet",a,b,{frameWidth:c,frameHeight:d,frameMax:e,margin:f,spacing:g},!1,".png")},d.prototype.audio=function(a,b,c){return this.game.sound.noAudio?this:(void 0===c&&(c=!0),"string"==typeof b&&(b=[b]),this.addToFileList("audio",a,b,{buffer:null,autoDecode:c}))},d.prototype.audiosprite=function(a,b,c,d,e){return this.game.sound.noAudio?this:(void 0===c&&(c=null),void 0===d&&(d=null),void 0===e&&(e=!0),this.audio(a,b,e),c?this.json(a+"-audioatlas",c):d?("string"==typeof d&&(d=JSON.parse(d)),this.cache.addJSON(a+"-audioatlas","",d)):console.warn("Loader.audiosprite - You must specify either a jsonURL or provide a jsonData object"),this)},d.prototype.tilemap=function(a,b,c){return void 0===b&&(b=null),void 0===c&&(c=null),b||c||(b=a+".json"),c?(c=JSON.parse(c),this.cache.addTilemap(a,null,c)):this.addToFileList("tilemap",a,b),this},d.prototype.atlasJSONArray=function(a,b,c,e){return this.atlas(a,b,c,e,d.TEXTURE_ATLAS_JSON_ARRAY)},d.prototype.atlasJSONHash=function(a,b,c,e){return this.atlas(a,b,c,e,d.TEXTURE_ATLAS_JSON_HASH)},d.prototype.atlas=function(a,b,c,e,f){if((void 0===b||null===b)&&(b=a+".png"),void 0===c&&(c=null),void 0===e&&(e=null),void 0===f&&(f=d.TEXTURE_ATLAS_JSON_ARRAY),c||e||(c=a+".json"),c)this.addToFileList("textureatlas",a,b,{atlasURL:c,format:f});else{switch(f){case d.TEXTURE_ATLAS_JSON_ARRAY:"string"==typeof e&&(e=JSON.parse(e))}this.addToFileList("textureatlas",a,b,{atlasURL:null,atlasData:e,format:f})}return this},d.prototype.withSyncPoint=function(a,b){this._withSyncPointDepth++;try{a.call(b||this,this)}finally{this._withSyncPointDepth--}return this},d.prototype.addSyncPoint=function(a,b){var c=this.getAsset(a,b);return c&&(c.file.syncPoint=!0),this},d.prototype.removeFile=function(a,b){var c=this.getAsset(a,b);c&&(c.loaded||c.loading||this._fileList.splice(c.index,1))},d.prototype.removeAll=function(){this._fileList.length=0,this._flightQueue.length=0},d.prototype.start=function(){this.isLoading||(this.hasLoaded=!1,this.isLoading=!0,this.updateProgress(),this.processLoadQueue())},d.prototype.processLoadQueue=function(){var a,b,c,d,f;if(!this.isLoading)return console.warn("Loader - active loading canceled / reset"),void this.finishedLoading(!0);for(a=0;a<this._flightQueue.length;a++)b=this._flightQueue[a],(b.loaded||b.error)&&(this._flightQueue.splice(a,1),a--,b.loading=!1,b.requestUrl=null,b.requestObject=null,b.error&&this.emit("fileerror",b.key,b),this._loadedFileCount++,this.emit("filecomplete",this.progress,b.key,!b.error,this._loadedFileCount,this._totalFileCount));for(c=!1,d=this.enableParallel?e.clamp(this.maxParallelDownloads,1,12):1,a=this._processingHead;a<this._fileList.length&&(b=this._fileList[a],b.loaded||b.error?a===this._processingHead&&(this._processingHead=a+1):!b.loading&&this._flightQueue.length<d&&(c||(this._fileLoadStarted||(this._fileLoadStarted=!0,this.emit("loadstart")),this._flightQueue.push(b),b.loading=!0,this.emit("filestart",this.progress,b.key,b.url),this.loadFile(b))),!b.loaded&&b.syncPoint&&(c=!0),!(this._flightQueue.length>=d||c&&this._loadedPackCount===this._totalPackCount));a++);this.updateProgress(),this._processingHead>=this._fileList.length?this.finishedLoading():this._flightQueue.length||(console.warn("Loader - aborting: processing queue empty, loading may have stalled"),f=this,setTimeout(function(){f.finishedLoading(!0)},2e3))},d.prototype.finishedLoading=function(a){this.hasLoaded||(this.hasLoaded=!0,this.isLoading=!1,a||this._fileLoadStarted||(this._fileLoadStarted=!0,this.emit("loadstart")),this.emit("loadcomplete"),this.reset())},d.prototype.asyncComplete=function(a,b){void 0===b&&(b=""),a.loaded=!0,a.error=!!b,b&&(a.errorMessage=b,console.warn("Loader - "+a.type+"["+a.key+"]: "+b)),this.processLoadQueue()},d.prototype.transformUrl=function(a,b){return a?a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?a:this.baseURL+b.path+a:!1},d.prototype.loadFile=function(a){switch(a.type){case"image":case"spritesheet":case"textureatlas":this.loadImageTag(a);break;case"audio":a.url=this.getAudioURL(a.url),a.url?this.game.sound.usingWebAudio?this.xhrLoad(a,this.transformUrl(a.url,a),"arraybuffer",this.fileComplete):this.game.sound.usingAudioTag&&this.loadAudioTag(a):this.fileError(a,null,"No supported audio URL specified or device does not have audio playback support");break;case"json":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.jsonLoadComplete);break;case"xml":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.xmlLoadComplete);break;case"tilemap":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.jsonLoadComplete);break;case"text":case"script":case"shader":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.fileComplete);break;case"binary":this.xhrLoad(a,this.transformUrl(a.url,a),"arraybuffer",this.fileComplete)}},d.prototype.loadImageTag=function(a){var b=this;a.data=new Image,a.data.name=a.key,this.crossOrigin&&(a.data.crossOrigin=this.crossOrigin),a.data.onload=function(){a.data.onload&&(a.data.onload=null,a.data.onerror=null,b.fileComplete(a))},a.data.onerror=function(){a.data.onload&&(a.data.onload=null,a.data.onerror=null,b.fileError(a))},a.data.src=this.transformUrl(a.url,a),a.data.complete&&a.data.width&&a.data.height&&(a.data.onload=null,a.data.onerror=null,this.fileComplete(a))},d.prototype.loadAudioTag=function(a){var b,c=this;this.game.sound.touchLocked?(a.data=new Audio,a.data.name=a.key,a.data.preload="auto",a.data.src=this.transformUrl(a.url,a),this.fileComplete(a)):(a.data=new Audio,a.data.name=a.key,b=function(){a.data.removeEventListener("canplaythrough",b,!1),a.data.onerror=null},a.data.onerror=function(){a.data.removeEventListener("canplaythrough",b,!1),a.data.onerror=null,c.fileError(a)},a.data.preload="auto",a.data.src=this.transformUrl(a.url,a),a.data.addEventListener("canplaythrough",b,!1),a.data.load())},d.prototype.xhrLoad=function(a,b,c,d,e){var f,g=new XMLHttpRequest;g.open("GET",b,!0),g.responseType=c,e=e||this.fileError,f=this,g.onload=function(){try{return d.call(f,a,g)}catch(b){f.hasLoaded?window.console&&console.error(b):f.asyncComplete(a,b.message||"Exception")}},g.onerror=function(){try{return e.call(f,a,g)}catch(b){f.hasLoaded?window.console&&console.error(b):f.asyncComplete(a,b.message||"Exception")}},a.requestObject=g,a.requestUrl=b,g.send()},d.prototype.getAudioURL=function(a){var b,d,e,g;if(this.game.sound.noAudio)return null;for(b=0;b<a.length;b++){if(d=a[b],d.uri)e=d.type,d=d.uri;else{if(0===d.indexOf("blob:")||0===d.indexOf("data:"))return d;d.indexOf("?")>=0&&(d=d.substr(0,d.indexOf("?"))),g=d.substr((c.Math.max(0,d.lastIndexOf("."))||1/0)+1),e=g.toLowerCase()}if(f.canPlayAudio(e))return d}return null},d.prototype.fileError=function(a,b,c){var d=a.requestUrl||this.transformUrl(a.url,a),e="error loading asset from URL "+d;!c&&b&&(c=b.status),c&&(e=e+" ("+c+")"),this.asyncComplete(a,e)},d.prototype.fileComplete=function(a,b){var c=!0;switch(a.type){case"image":this.cache.addImage(a.key,a.url,a.data);break;case"spritesheet":this.cache.addSpriteSheet(a.key,a.url,a.data,a.frameWidth,a.frameHeight,a.frameMax,a.margin,a.spacing);break;case"textureatlas":if(null==a.atlasURL)this.cache.addTextureAtlas(a.key,a.url,a.data,a.atlasData,a.format);else{if(c=!1,a.format!=d.TEXTURE_ATLAS_JSON_ARRAY&&a.format!=d.TEXTURE_ATLAS_JSON_HASH&&a.format!=d.TEXTURE_ATLAS_JSON_PYXEL)throw Error("Loader - Invalid Texture Atlas format: "+a.format);this.xhrLoad(a,this.transformUrl(a.atlasURL,a),"text",this.jsonLoadComplete)}break;case"audio":this.game.sound.usingWebAudio?(a.data=b.response,this.cache.addSound(a.key,a.url,a.data,!0,!1),a.autoDecode&&this.game.sound.decode(a.key)):this.cache.addSound(a.key,a.url,a.data,!1,!0);break;case"text":a.data=b.responseText,this.cache.addText(a.key,a.url,a.data);break;case"shader":a.data=b.responseText,this.cache.addShader(a.key,a.url,a.data);break;case"script":a.data=document.createElement("script"),a.data.language="javascript",a.data.type="text/javascript",a.data.defer=!1,a.data.text=b.responseText,document.head.appendChild(a.data),a.callback&&(a.data=a.callback.call(a.callbackContext,a.key,b.responseText));break;case"binary":a.callback?a.data=a.callback.call(a.callbackContext,a.key,b.response):a.data=b.response,this.cache.addBinary(a.key,a.data)}c&&this.asyncComplete(a)},d.prototype.jsonLoadComplete=function(a,b){var c=JSON.parse(b.responseText);"tilemap"===a.type?this.cache.addTilemap(a.key,a.url,c):"json"===a.type?this.cache.addJSON(a.key,a.url,c):"textureatlas"===a.type&&this.cache.addTextureAtlas(a.key,a.url,a.data,c,a.format),this.asyncComplete(a)},d.prototype.xmlLoadComplete=function(a,b){var c,d=b.responseText,e=this.parseXml(d);return e?("xml"===a.type&&this.cache.addXML(a.key,a.url,e),void this.asyncComplete(a)):(c=b.responseType||b.contentType,console.warn("Loader - "+a.key+": invalid XML ("+c+")"),void this.asyncComplete(a,"invalid XML"))},d.prototype.parseXml=function(a){var b,c;try{window.DOMParser?(c=new DOMParser,
b=c.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(d){b=null}return b&&b.documentElement&&!b.getElementsByTagName("parsererror").length?b:null},d.prototype.updateProgress=function(){},d.prototype.totalLoadedFiles=function(){return this._loadedFileCount},d.prototype.totalQueuedFiles=function(){return this._totalFileCount-this._loadedFileCount},d.prototype.totalLoadedPacks=function(){return this._totalPackCount},d.prototype.totalQueuedPacks=function(){return this._totalPackCount-this._loadedPackCount},Object.defineProperty(d.prototype,"progressRaw",{get:function(){var a=this._loadedFileCount/this._totalFileCount;return e.clamp(a||0,0,100)}}),Object.defineProperty(d.prototype,"progressFloat",{get:function(){var a=this._loadedFileCount/this._totalFileCount*100;return e.clamp(a||0,0,100)}}),Object.defineProperty(d.prototype,"progress",{get:function(){return c.Math.round(this.progressFloat)}}),d.prototype.constructor=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2,56:56,59:59,76:76,9:9}],49:[function(a,b,c){(function(a){function c(a){this.game=a,this.socket=a.net.socket,this.timer=void 0,this.startTime=0,this.endTime=0,this.rtt=0,this._history=[],this.socket.on("drip",this.ping.bind(this))}c.HISTORY_SIZE=10,c.prototype.constructor=c,c.prototype.ping=function(a){this.socket.emit("drop"),this._compute(a)},c.prototype._compute=function(b){var d,e=0,f=this._history;f.push(b.rtt),f.length>c.HISTORY_SIZE&&f.shift();for(d in f)e+=f[d];this.rtt=a.Math.round(e/f.length)},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],50:[function(a,b,c){function d(a){this.game=a}var e=a("socket"),f=a(49);d.prototype={boot:function(){this.connected=!1,this.socket=e({reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:1e4}),this.latency=new f(this.game),this.socket.on("connect",this._connect.bind(this)),this.socket.on("reconnecting",this._reconnecting.bind(this)),this.socket.on("reconnect_failed",this._reconnectingFailed.bind(this)),this.socket.on("event",this._event.bind(this)),this.socket.on("error",this._error.bind(this)),this.socket.on("disconnect",this._disconnect.bind(this)),this.game.on("game/pause",this.pause,this),this.game.on("game/resume",this.resume,this)},pause:function(){this.disconnect()},resume:function(){this.connect()},connect:function(){this.socket.connect()},disconnect:function(){this.socket.disconnect()},reconnect:function(){this.disconnect(),this.connect()},_connect:function(){this.connected=!0,console.log("connected")},_reconnecting:function(a){console.log("trying to reconnect (attempt "+a+")")},_reconnectingFailed:function(){console.log("socket could not reconnect, try again later")},_reconnect:function(){console.log("socket successfully reconnected")},_event:function(a){console.log("event",a)},_error:function(a){console.log("error",a)},_disconnect:function(){this.connected=!1,console.log("socket closed")}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"rtt",{get:function(){return this.latency.rtt}}),b.exports=d},{49:49,socket:"socket"}],51:[function(a,b,c){(function(c){function d(a,b,c,d){i.call(this,a),this.maxParticles=d||50,this.name="emitter"+this.game.particles.ID++,this.type=e.EMITTER,this.area=new f(b,c,1,1),this.gravity=0,this.vector=new g(0,0),this.minParticleSpeed=new g(15,15),this.maxParticleSpeed=new g(25,25),this.minParticleScale=1,this.maxParticleScale=1,this.scaleData=null,this.startTint=16777215,this.endTint=16777215,this.tintData=null,this.tintCache={},this.minRotation=-6,this.maxRotation=6,this.minParticleAlpha=1,this.maxParticleAlpha=1,this.alphaData=null,this.particleClass=h,this.angularDrag=1,this.frequency=100,this.lifespan=2e3,this.bounce=new g,this.particleAnchor=new g(.5,.5),this.particleDrag=new g(0,0),this.blendMode=e.BlendMode.NORMAL,this.emitX=b,this.emitY=c,this.on=!1,this.autoScale=!1,this.autoAlpha=!1,this.autoTint=!1,this.particleBringToTop=!1,this.particleSendToBack=!1,this._minParticleScale=new g(1,1),this._maxParticleScale=new g(1,1),this._quantity=0,this._timer=0,this._counter=0,this._flowQuantity=0,this._flowTotal=0,this._explode=!0,this._frames=null}var e=a(9),f=a(46),g=a(45),h=a(27),i=a(20),j=a(68),k=a(75),l=a(76);d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a;if(this.on&&this.game.clock.time>=this._timer)if(this._timer=this.game.clock.time+this.frequency*this.game.clock.slowMotion,0!==this._flowTotal)if(this._flowQuantity>0){for(a=0;a<this._flowQuantity;a++)if(this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal)){this.on=!1;break}}else this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal&&(this.on=!1));else this.emitParticle()&&(this._counter++,this._quantity>0&&this._counter>=this._quantity&&(this.on=!1));for(a=this.children.length;a--;)this.children[a].exists&&this.children[a].update()},d.prototype.makeParticles=function(a,b,c,d,e){var f,g,h,i;for(void 0===b&&(b=0),void 0===c&&(c=this.maxParticles),void 0===d&&(d=!1),void 0===e&&(e=!1),g=0,h=a,i=b,this._frames=b,c>this.maxParticles&&(this.maxParticles=c);c>g;)Array.isArray(a)&&(h=this.game.rnd.pick(a)),Array.isArray(b)&&(i=this.game.rnd.pick(b)),f=new this.particleClass(this.game,h,i),f.exists=!1,f.visible=!1,f.anchor.copy(this.particleAnchor),this.add(f),g++;return this},d.prototype.kill=function(){this.on=!1,this.alive=!1,this.exists=!1},d.prototype.revive=function(){this.alive=!0,this.exists=!0},d.prototype.explode=function(a){this._flowTotal=0,this.start(!0,this.lifespan,this.frequency,a)},d.prototype.flow=function(a,b,c,d,e){(void 0===c||0===c)&&(c=1),void 0===d&&(d=-1),void 0===e&&(e=!0),c>this.maxParticles&&(c=this.maxParticles),this._counter=0,this._flowQuantity=c,this._flowTotal=d,e?(this.start(!0,a,b,c),this._counter+=c,this.on=!0,this._timer=this.game.clock.time+b*this.game.clock.slowMotion):this.start(!1,a,b,c)},d.prototype.start=function(a,b,c,d){if(void 0===a&&(a=!0),void 0===b&&(b=this.lifespan),(void 0===c||null===c)&&(c=250),void 0===d&&(d=0),d>this.maxParticles&&(d=this.maxParticles),this.revive(),this.visible=!0,this.lifespan=b,this.frequency=c,a)for(var e=0;d>e;e++)this.emitParticle();else this.on=!0,this._quantity+=d,this._counter=0,this._timer=this.game.clock.time+c*this.game.clock.slowMotion},d.prototype.emitParticle=function(){var a=this.getFirstExists(!1);return null===a?!1:(this.width>1||this.height>1?a.reset(this.game.rnd.integerInRange(this.left,this.right),this.game.rnd.integerInRange(this.top,this.bottom)):a.reset(this.emitX,this.emitY),a.lifespan=this.lifespan,this.particleBringToTop?this.bringToTop(a):this.particleSendToBack&&this.sendToBack(a),this.autoScale?a.setScaleData(this.scaleData):1!==this.minParticleScale||1!==this.maxParticleScale?a.scale.set(this.game.rnd.realInRange(this.minParticleScale,this.maxParticleScale)):(this._minParticleScale.x!==this._maxParticleScale.x||this._minParticleScale.y!==this._maxParticleScale.y)&&a.scale.set(this.game.rnd.realInRange(this._minParticleScale.x,this._maxParticleScale.x),this.game.rnd.realInRange(this._minParticleScale.y,this._maxParticleScale.y)),Array.isArray("object"===this._frames)?a.frame=this.game.rnd.pick(this._frames):a.frame=this._frames,this.autoAlpha?a.setAlphaData(this.alphaData):a.alpha=this.game.rnd.realInRange(this.minParticleAlpha,this.maxParticleAlpha),this.autoTint&&a.setTintData(this.tintData),a.vector=this.vector,a.blendMode=this.blendMode,a.velocity.x=this.game.rnd.between(this.minParticleSpeed.x,this.maxParticleSpeed.x),a.velocity.y=this.game.rnd.between(this.minParticleSpeed.y,this.maxParticleSpeed.y),a.drag.x=this.particleDrag.x,a.drag.y=this.particleDrag.y,a.angularVelocity=l.degToRad(this.game.rnd.between(this.minRotation,this.maxRotation)),a.angularDrag=l.degToRad(this.angularDrag),a.onEmit(),!0)},d.prototype.destroy=function(){this.game.particles.remove(this),i.prototype.destroy.call(this,!0,!1)},d.prototype.setSize=function(a,b){this.area.width=a,this.area.height=b},d.prototype.setXSpeed=function(a,b){a=a||0,b=b||0,this.minParticleSpeed.x=a,this.maxParticleSpeed.x=b},d.prototype.setYSpeed=function(a,b){a=a||0,b=b||0,this.minParticleSpeed.y=a,this.maxParticleSpeed.y=b},d.prototype.setRotation=function(a,b){a=a||0,b=b||0,this.minRotation=a,this.maxRotation=b},d.prototype.setAlpha=function(a,b,c,d,e){if(void 0===a&&(a=1),void 0===b&&(b=1),void 0===c&&(c=0),void 0===d&&(d=j.Linear.None),void 0===e&&(e=!1),this.minParticleAlpha=a,this.maxParticleAlpha=b,this.autoAlpha=!1,c>0&&a!==b){var f={v:a},g=this.game.tweens.create(f).to({v:b},c,d);g.yoyo(e),this.alphaData=g.generateData(60),this.alphaData.reverse(),this.autoAlpha=!0}},d.prototype.setScale=function(a,b,c,d,e,f,g){if(void 0===a&&(a=1),void 0===b&&(b=1),void 0===c&&(c=1),void 0===d&&(d=1),void 0===e&&(e=0),void 0===f&&(f=j.Linear.None),void 0===g&&(g=!1),this.minParticleScale=1,this.maxParticleScale=1,this._minParticleScale.set(a,c),this._maxParticleScale.set(b,d),this.autoScale=!1,e>0&&(a!==b||c!==d)){var h={x:a,y:c},i=this.game.tweens.create(h).to({x:b,y:d},e,f);i.yoyo(g),this.scaleData=i.generateData(60),this.scaleData.reverse(),this.autoScale=!0}},d.prototype.setTint=function(a,b,c,d,e){var f,g,h,i;if(void 0===a&&(minX=16777215),void 0===b&&(maxX=16777215),void 0===c&&(c=0),void 0===d&&(d=j.Linear.None),void 0===e&&(e=!1),this.startTint=a,this.endTint=b,this.autoTint=!1,f=""+a+(""+b)+(""+c)+(""+d)+(""+e),this.tintCache[f])this.tintData=this.tintCache[f],this.autoTint=!0;else if(c>0&&a!==b){for(g={step:0},h=this.game.tweens.create(g).to({step:100},c,d),h.yoyo(e),this.tintCache[f]=this.tintData=h.generateData(60),i=0;i<this.tintData.length;i++)this.tintData[i].color=k.interpolateColor(a,b,100,this.tintData[i].step);this.tintData.reverse(),this.autoTint=!0}},d.prototype.at=function(a){a.center?(this.emitX=a.center.x,this.emitY=a.center.y):(this.emitX=a.world.x+a.anchor.x*a.width,this.emitY=a.world.y+a.anchor.y*a.height)},Object.defineProperty(d.prototype,"width",{get:function(){return this.area.width},set:function(a){this.area.width=a}}),Object.defineProperty(d.prototype,"height",{get:function(){return this.area.height},set:function(a){this.area.height=a}}),Object.defineProperty(d.prototype,"x",{get:function(){return this.emitX},set:function(a){this.emitX=a}}),Object.defineProperty(d.prototype,"y",{get:function(){return this.emitY},set:function(a){this.emitY=a}}),Object.defineProperty(d.prototype,"left",{get:function(){return c.Math.floor(this.x-this.area.width/2)}}),Object.defineProperty(d.prototype,"right",{get:function(){return c.Math.floor(this.x+this.area.width/2)}}),Object.defineProperty(d.prototype,"top",{get:function(){return c.Math.floor(this.y-this.area.height/2)}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return c.Math.floor(this.y+this.area.height/2)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{20:20,27:27,45:45,46:46,68:68,75:75,76:76,9:9}],52:[function(a,b,c){function d(a){this.game=a,this.emitters={},this.ID=0}a(51);d.prototype={add:function(a){return this.emitters[a.name]=a,a},remove:function(a){delete this.emitters[a.name]},update:function(){for(var a in this.emitters)this.emitters[a].exists&&this.emitters[a].update()}},d.prototype.constructor=d,b.exports=d},{51:51}],53:[function(a,b,c){function d(a,b,c,d,f){void 0===c&&(c=1),void 0===d&&(d=!1),void 0===f&&(f=a.sound.connectToMaster),this.game=a,this.name=b,this.key=b,this.loop=d,this.volume=c,this.markers={},this.context=null,this.autoplay=!1,this.totalDuration=0,this.startTime=0,this.currentTime=0,this.duration=0,this.durationMS=0,this.position=0,this.stopTime=0,this.paused=!1,this.pausedPosition=0,this.pausedTime=0,this.isPlaying=!1,this.currentMarker="",this.fadeTween=null,this.pendingPlayback=!1,this.override=!1,this.allowMultiple=!1,this.usingWebAudio=this.game.sound.usingWebAudio,this.usingAudioTag=this.game.sound.usingAudioTag,this.externalNode=null,this.masterGainNode=null,this.gainNode=null,this._sound=null,this.usingWebAudio?(this.context=this.game.sound.context,this.masterGainNode=this.game.sound.masterGain,void 0===this.context.createGain?this.gainNode=this.context.createGainNode():this.gainNode=this.context.createGain(),this.gainNode.gain.value=c*this.game.sound.volume,f&&this.gainNode.connect(this.masterGainNode)):this.usingAudioTag&&(this.game.cache.getSound(b)&&this.game.cache.isSoundReady(b)?(this._sound=this.game.cache.getSoundData(b),this.totalDuration=0,this._sound.duration&&(this.totalDuration=this._sound.duration)):this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this)),this._volume=c,this._buffer=null,this._muted=!1,this._tempMarker=0,this._tempPosition=0,this._tempVolume=0,this._muteVolume=0,this._tempLoop=0,this._paused=!1,this._onDecodedEventDispatched=!1,e.call(this)}var e=a(2),f=a(56);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.soundHasUnlocked=function(a){a===this.key&&(this._sound=this.game.cache.getSoundData(this.key),this.totalDuration=this._sound.duration)},d.prototype.addMarker=function(a,b,c,d,e){(void 0===d||null===d)&&(d=1),void 0===e&&(e=!1),this.markers[a]={name:a,start:b,stop:b+c,volume:d,duration:c,durationMS:1e3*c,loop:e}},d.prototype.removeMarker=function(a){delete this.markers[a]},d.prototype.onEndedHandler=function(){this._sound&&(this._sound.onended=null),this.isPlaying=!1,this.currentTime=this.durationMS,this.stop()},d.prototype.update=function(){return this.game.cache.checkSoundKey(this.key)?(this.isDecoded&&!this._onDecodedEventDispatched&&(this.emit("decoded",this),this._onDecodedEventDispatched=!0),this.pendingPlayback&&this.game.cache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),void(this.isPlaying&&(this.currentTime=this.game.clock.time-this.startTime,this.currentTime>=this.durationMS&&(this.usingWebAudio?this.loop?(this.emit("loop",this),""===this.currentMarker?(this.currentTime=0,this.startTime=this.game.clock.time):(this.emit("markerComplete",this.currentMarker,this),this.play(this.currentMarker,0,this.volume,!0,!0))):""!==this.currentMarker&&this.stop():this.loop?(this.emit("loop",this),this.play(this.currentMarker,0,this.volume,!0,!0)):this.stop())))):void this.destroy()},d.prototype.loopFull=function(a){this.play(null,0,a,!0)},d.prototype.play=function(a,b,c,d,e){if((void 0===a||a===!1||null===a)&&(a=""),void 0===e&&(e=!0),this.isPlaying&&!this.allowMultiple&&!e&&!this.override)return this;if(this._sound&&this.isPlaying&&!this.allowMultiple&&(this.override||e))if(this.usingWebAudio)if(this.externalNode?this._sound.disconnect(this.externalNode):this._sound.disconnect(this.gainNode),void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(g){}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);if(""===a&&Object.keys(this.markers).length>0)return this;if(""!==a){if(this.currentMarker=a,!this.markers[a])return this;this.position=this.markers[a].start,this.volume=this.markers[a].volume,this.loop=this.markers[a].loop,this.duration=this.markers[a].duration,this.durationMS=this.markers[a].durationMS,void 0!==c&&(this.volume=c),void 0!==d&&(this.loop=d),this._tempMarker=a,this._tempPosition=this.position,this._tempVolume=this.volume,this._tempLoop=this.loop}else b=b||0,void 0===c&&(c=this._volume),void 0===d&&(d=this.loop),this.position=b,this.volume=c,this.loop=d,this.duration=0,this.durationMS=0,this._tempMarker=a,this._tempPosition=b,this._tempVolume=c,this._tempLoop=d;return this.usingWebAudio?this.game.cache.isSoundDecoded(this.key)?(this._sound=this.context.createBufferSource(),this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this._buffer=this.game.cache.getSoundData(this.key),this._sound.buffer=this._buffer,this.loop&&""===a&&(this._sound.loop=!0),this.loop||""!==a||(this._sound.onended=this.onEndedHandler.bind(this)),this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=Math.ceil(1e3*this.totalDuration)),void 0===this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this.loop&&""===a?this._sound.start(0,0):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=this.game.clock.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.emit("play",this)):(this.pendingPlayback=!0,this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).isDecoding===!1&&this.game.sound.decode(this.key,this)):this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked?(this.game.cache.reloadSound(this.key),this.pendingPlayback=!0):this._sound&&(f.cocoonJS||4===this._sound.readyState)?(this._sound.play(),this.totalDuration=this._sound.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this._sound.currentTime=this.position,this._sound.muted=this._muted,this._muted?this._sound.volume=0:this._sound.volume=this._volume,this.isPlaying=!0,this.startTime=this.game.clock.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.emit("play",this)):this.pendingPlayback=!0,this},d.prototype.restart=function(a,b,c,d){a=a||"",b=b||0,c=c||1,void 0===d&&(d=!1),this.play(a,b,c,d,!0)},d.prototype.pause=function(){this.isPlaying&&this._sound&&(this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=this.game.clock.time,this.emit("pause",this),this.stop())},d.prototype.resume=function(){var a,b;this.paused&&this._sound&&(this.usingWebAudio?(a=this.position+this.pausedPosition/1e3,this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this.loop&&(this._sound.loop=!0),this.loop||""!==this.currentMarker||(this._sound.onended=this.onEndedHandler.bind(this)),b=this.duration-this.pausedPosition/1e3,void 0===this._sound.start?(this._sound.noteGrainOn(0,a,b),this._sound.noteOn(0)):this.loop&&f.chrome?42===f.chromeVersion?this._sound.start(0):this._sound.start(0,a):this._sound.start(0,a,b)):this._sound.play(),this.isPlaying=!0,this.paused=!1,this.startTime+=this.game.clock.time-this.pausedTime,this.emit("resume",this))},d.prototype.stop=function(){if(this.isPlaying&&this._sound)if(this.usingWebAudio)if(this.externalNode?this._sound.disconnect(this.externalNode):this._sound.disconnect(this.gainNode),void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(a){}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);if(this.pendingPlayback=!1,this.isPlaying=!1,!this.paused){var b=this.currentMarker;""!==this.currentMarker&&this.emit("markerComplete",this.currentMarker,this),this.currentMarker="",null!==this.fadeTween&&this.fadeTween.stop(),this.emit("stop",this,b)}},d.prototype.fadeIn=function(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=this.currentMarker),this.paused||(this.play(c,0,0,b),this.fadeTo(a,1))},d.prototype.fadeOut=function(a){this.fadeTo(a,0)},d.prototype.fadeTo=function(a,b){if(this.isPlaying&&!this.paused&&b!==this.volume){if(void 0===a&&(a=1e3),void 0===b)return void console.warn("Sound.fadeTo: No Volume Specified.");this.fadeTween=this.game.tweens.create(this),this.fadeTween.to({volume:b},a,void 0,!0),this.fadeTween.on("complete",this.fadeComplete,this)}},d.prototype.fadeComplete=function(){this.emit("fadeComplete",this,this.volume),0===this.volume&&this.stop()},d.prototype.destroy=function(a){void 0===a&&(a=!0),this.stop(),a?this.game.sound.remove(this):(this.markers={},this.context=null,this._buffer=null,this.externalNode=null,this.removeAllListeners())},Object.defineProperty(d.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}}),Object.defineProperty(d.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}}),Object.defineProperty(d.prototype,"mute",{get:function(){return this._muted||this.game.sound.mute},set:function(a){a=a||!1,a!==this._muted&&(a?(this._muted=!0,this._muteVolume=this._tempVolume,this.usingWebAudio?this.gainNode.gain.value=0:this.usingAudioTag&&this._sound&&(this._sound.volume=0)):(this._muted=!1,this.usingWebAudio?this.gainNode.gain.value=this._muteVolume:this.usingAudioTag&&this._sound&&(this._sound.volume=this._muteVolume)),this.emit("mute",this))}}),Object.defineProperty(d.prototype,"volume",{get:function(){return this._volume},set:function(a){return f.firefox&&this.usingAudioTag&&(a=this.game.math.clamp(a,0,1)),this._muted?void(this._muteVolume=a):(this._tempVolume=a,this._volume=a,void(this.usingWebAudio?this.gainNode.gain.value=a:this.usingAudioTag&&this._sound&&(this._sound.volume=a)))}}),b.exports=d},{2:2,56:56}],54:[function(a,b,c){function d(a){this.game=a,this.context=null,this.usingWebAudio=!1,this.usingAudioTag=!1,this.noAudio=!1,this.connectToMaster=!0,this.touchLocked=!1,this.channels=32,this._codeMuted=!1,this._muted=!1,this._unlockSource=null,this._volume=1,this._sounds=[],this._watchList=new g,this._watching=!1,this._watchCallback=null,this._watchContext=null}var e=a(53),f=a(56),g=a(72);d.prototype={boot:function(){if(f.iOS&&f.webAudio===!1&&(this.channels=1),window.AudioContext)try{this.context=new window.AudioContext}catch(a){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}else if(window.webkitAudioContext)try{this.context=new window.webkitAudioContext}catch(a){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}if(null===this.context){if(void 0===window.Audio)return void(this.noAudio=!0);this.usingAudioTag=!0}else this.usingWebAudio=!0,void 0===this.context.createGain?this.masterGain=this.context.createGainNode():this.masterGain=this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination)},stopAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].stop()},pauseAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].pause()},resumeAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].resume()},decode:function(a,b){var c,d;if(b=b||null,c=this.game.cache.getSoundData(a),c&&this.game.cache.isSoundDecoded(a)===!1){this.game.cache.updateSound(a,"isDecoding",!0),d=this;try{this.context.decodeAudioData(c,function(b){b&&d.game.cache.decodedSound(a,b)})}catch(e){}}},setDecodedCallback:function(a,b,c){"string"==typeof a&&(a=[a]),this._watchList.reset();for(var d=0;d<a.length;d++)a[d]instanceof e?this.game.cache.isSoundDecoded(a[d].key)||this._watchList.add(a[d].key):this.game.cache.isSoundDecoded(a[d])||this._watchList.add(a[d]);0===this._watchList.total?(this._watching=!1,b.call(c)):(this._watching=!0,this._watchCallback=b,this._watchContext=c)},update:function(){var a,b;if(!this.noAudio){for(!this.touchLocked||null===this._unlockSource||this._unlockSource.playbackState!==this._unlockSource.PLAYING_STATE&&this._unlockSource.playbackState!==this._unlockSource.FINISHED_STATE||(this.touchLocked=!1,this._unlockSource=null),a=0;a<this._sounds.length;a++)this._sounds[a].update();if(this._watching){for(b=this._watchList.first;b;)this.game.cache.isSoundDecoded(b)&&this._watchList.remove(b),b=this._watchList.next;0===this._watchList.total&&(this._watching=!1,this._watchCallback.call(this._watchContext))}}},add:function(a,b,c,d){void 0===b&&(b=1),void 0===c&&(c=!1),void 0===d&&(d=this.connectToMaster);var f=new e(this.game,a,b,c,d);return this._sounds.push(f),f},addSprite:function(a){var b=new AudioSprite(this.game,a);return b},remove:function(a){for(var b=this._sounds.length;b--;)if(this._sounds[b]===a)return this._sounds[b].destroy(!1),this._sounds.splice(b,1),!0;return!1},removeByKey:function(a){for(var b=this._sounds.length,c=0;b--;)this._sounds[b].key===a&&(this._sounds[b].destroy(!1),this._sounds.splice(b,1),c++);return c},play:function(a,b,c){if(!this.noAudio){var d=this.add(a,b,c);return d.play(),d}},setMute:function(){if(!this._muted){this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0);for(var a=0;a<this._sounds.length;a++)this._sounds[a].usingAudioTag&&(this._sounds[a].mute=!0)}},unsetMute:function(){if(this._muted&&!this._codeMuted){this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume);for(var a=0;a<this._sounds.length;a++)this._sounds[a].usingAudioTag&&(this._sounds[a].mute=!1)}},destroy:function(){this.stopAll();for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].destroy();this._sounds=[],this.context.close()}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"mute",{get:function(){return this._muted},set:function(a){if(a=a||!1){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(d.prototype,"volume",{get:function(){return this._volume},set:function(a){if(0>a?a=0:a>1&&(a=1),this._volume!==a)if(this._volume=a,this.usingWebAudio)this.masterGain.gain.value=a;else for(var b=0;b<this._sounds.length;b++)this._sounds[b].usingAudioTag&&(this._sounds[b].volume=this._sounds[b].volume*a)}}),b.exports=d},{53:53,56:56,72:72}],55:[function(a,b,c){(function(a){var c={create:function(b,c,d){b=b||256,c=c||256;var e=a.document.createElement("canvas");return"string"==typeof d&&""!==d&&(e.id=d),e.width=b,e.height=c,e.style.display="block",e},addToDOM:function(a,b){var c;return b&&("string"==typeof b?c=document.getElementById(b):"object"==typeof b&&1===b.nodeType&&(c=b)),c||(c=document.body),c.appendChild(a),a},setTouchAction:function(a,b){return b=b||"none",a.style.msTouchAction=b,a.style["ms-touch-action"]=b,a.style["touch-action"]=b,a},setUserSelect:function(a,b){return b=b||"none",a.style["-webkit-touch-callout"]=b,a.style["-webkit-user-select"]=b,a.style["-khtml-user-select"]=b,a.style["-moz-user-select"]=b,a.style["-ms-user-select"]=b,a.style["user-select"]=b,a.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",a},setContextMenu:function(a,b){b?a.oncontextmenu=null:a.oncontextmenu=function(a){a.preventDefault()}},setSmoothingEnabled:function(a,b){var d=c.getSmoothingPrefix(a);return d&&(a[d]=b),a},getSmoothingPrefix:function(a){var b,c,d=["i","webkitI","msI","mozI","oI"];for(c in d)if(b=d[c]+"mageSmoothingEnabled",b in a)return b;return null}};b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(a,b,c){(function(c,d){var e=a("pixi"),f={android:!1,chromeOS:!1,iOS:!1,linux:!1,macOS:!1,windows:!1,windowsPhone:!1,desktop:!1,canvas:!1,file:!1,fileSystem:!1,webGL:!1,worker:!1,canvasBitBltShift:!1,audioData:!1,webAudio:!1,chrome:!1,chromeVersion:!1,arora:!1,epiphany:!1,firefox:!1,firefoxVersion:!1,safari:!1,mobileSafari:!1,ie:!1,ieVersion:!1,trident:!1,tridentVersion:!1,cocoonJS:!1,node:!1,nodeWebkit:!1,electron:!1,fullscreen:!1,requestFullscreen:"",cancelFullscreen:"",fullscreenKeyboard:!1,pointerLock:!1,quirksMode:!1,touch:!1,mspointer:!1,wheelEvent:"",whenReady:function(a,b,c){var e=this._readyCheck;this.deviceReadyAt||!e?a.call(b,this):e._monitor||c?(e._queue=e._queue||[],e._queue.push([a,b])):(e._monitor=e.bind(this),e._queue=e._queue||[],e._queue.push([a,b]),"complete"===d.document.readyState||"interactive"===d.document.readyState?d.setTimeout(e._monitor,0):(d.document.addEventListener("DOMContentLoaded",e._monitor,!1),d.addEventListener("load",e._monitor,!1)))},_readyCheck:function(){var a,b,c,e=this._readyCheck;if(d.document.body){if(!this.deviceReadyAt){for(this.deviceReadyAt=Date.now(),d.document.removeEventListener("DOMContentLoaded",e._monitor),d.removeEventListener("load",e._monitor),this._initialize(),this.initialized=!0;a=e._queue.shift();)b=a[0],c=a[1],b.call(c,this);this._readyCheck=null,this._initialize=null}}else d.setTimeout(e._monitor,20)},_initialize:function(){function b(){var a=d.navigator.userAgent;/Android/.test(a)?k.android=!0:/CrOS/.test(a)?k.chromeOS=!0:/iP[ao]d|iPhone/i.test(a)?k.iOS=!0:/Linux/.test(a)?k.linux=!0:/Mac OS/.test(a)?k.macOS=!0:/Windows/.test(a)&&(k.windows=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(k.android=!1,k.iOS=!1,k.macOS=!1,k.windows=!0,k.windowsPhone=!0),(k.windows||k.macOS||k.linux||k.chromeOS)&&(k.desktop=!0),(k.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(k.desktop=!1)}function f(){k.audioData=!!d.window.Audio,k.webAudio=!(!d.window.AudioContext&&!d.window.webkitAudioContext);var a=document.createElement("audio"),b=!1;try{(b=!!a.canPlayType)&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(k.ogg=!0),(a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||a.canPlayType("audio/opus;").replace(/^no$/,""))&&(k.opus=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(k.mp3=!0),a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(k.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(k.m4a=!0),a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(k.webm=!0))}catch(c){}}function g(){k.canvas=!!d.CanvasRenderingContext2D,k.file=!!(d.File&&d.FileReader&&d.FileList&&d.Blob),k.fileSystem=!!d.requestFileSystem,k.webGL=e.utils.isWebGLSupported(),k.worker=!!d.Worker,k.pointerLock="pointerLockElement"in d.document||"mozPointerLockElement"in d.document||"webkitPointerLockElement"in d.document,k.quirksMode="CSS1Compat"===d.document.compatMode?!1:!0,!k.iOS&&(k.ie||k.firefox||k.chrome)&&(k.canvasBitBltShift=!0),(k.safari||k.mobileSafari)&&(k.canvasBitBltShift=!1)}function h(){("ontouchstart"in document.documentElement||d.navigator.maxTouchPoints&&d.navigator.maxTouchPoints>=1)&&(k.touch=!0),(d.navigator.msPointerEnabled||d.navigator.pointerEnabled)&&(k.mspointer=!0),"onwheel"in d||k.ie&&"WheelEvent"in d?k.wheelEvent="wheel":"onmousewheel"in d&&(k.wheelEvent="mousewheel")}function i(){var a,b=document.createElement("div"),c=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],e=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];for(a=0;a<c.length;a++)if(b[c[a]]){k.fullscreen=!0,k.requestFullscreen=c[a];break}if(k.fullscreen)for(a=0;a<e.length;a++)if(document[e[a]]){k.cancelFullscreen=e[a];break}d.Element&&d.Element.ALLOW_KEYBOARD_INPUT&&(k.fullscreenKeyboard=!0)}function j(){var b=d.navigator.userAgent;if(/Arora/.test(b)?k.arora=!0:/Chrome\/(\d+)/.test(b)&&!k.windowsPhone?(k.chrome=!0,k.chromeVersion=parseInt(RegExp.$1,10)):/Epiphany/.test(b)?k.epiphany=!0:/Firefox\D+(\d+)/.test(b)?(k.firefox=!0,k.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(b)&&k.iOS?k.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(b)?(k.ie=!0,k.ieVersion=parseInt(RegExp.$1,10)):/Safari/.test(b)&&!k.windowsPhone?k.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(b)&&(k.ie=!0,k.trident=!0,k.tridentVersion=parseInt(RegExp.$1,10),k.ieVersion=parseInt(RegExp.$3,10)),void 0!==c&&void 0!==a&&(k.node=!0),k.node&&"object"==typeof c.versions&&(k.nodeWebkit=!!c.versions["node-webkit"],k.electron=!!c.versions.electron),navigator.isCocoonJS&&(k.cocoonJS=!0),k.cocoonJS)try{k.cocoonJSApp=void 0!==CocoonJS}catch(e){k.cocoonJSApp=!1}void 0!==window.ejecta&&(k.ejecta=!0)}var k=this;b(),f(),j(),g(),h(),i()},canPlayAudio:function(a){return"mp3"===a&&this.mp3?!0:"ogg"===a&&(this.ogg||this.opus)?!0:"m4a"===a&&this.m4a?!0:"opus"===a&&this.opus?!0:"wav"===a&&this.wav?!0:"webm"===a&&this.webm?!0:!1}};b.exports=f}).call(this,a(1),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{1:1,pixi:"pixi"}],57:[function(a,b,c){(function(a){function c(b,c){var d,e;for(void 0===c&&(c=!1),this.game=b,this.isRunning=!1,this.forceTimeout=c,d=["ms","moz","webkit","o"],e=0;e<d.length&&!a.requestAnimationFrame;e++)a.requestAnimationFrame=a[d[e]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[d[e]+"CancelAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null}c.prototype.constructor=c,c.prototype.start=function(){var b=this;this.isRunning=!0,!a.requestAnimationFrame||this.forceTimeout?(this._isSetTimeOut=!0,this._onLoop=function(){return b.updateSetTimeout()},this._timeOutID=a.setTimeout(this._onLoop,0)):(this._isSetTimeOut=!1,this._onLoop=function(a){return b.updateRequestAnimationFrame(a)},this._timeOutID=a.requestAnimationFrame(this._onLoop))},c.prototype.updateRequestAnimationFrame=function(b){this.game.update(Math.floor(b)),this._timeOutID=a.requestAnimationFrame(this._onLoop)},c.prototype.updateSetTimeout=function(){this.game.update(Date.now()),this._timeOutID=a.setTimeout(this._onLoop,this.game.clock.timeToCall)},c.prototype.stop=function(){this.isRunning=!1,this._isSetTimeOut?clearTimeout(this._timeOutID):a.cancelAnimationFrame(this._timeOutID)},c.prototype.isSetTimeOut=function(){return this._isSetTimeOut},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(a,b,c){(function(a){function c(b,c,d,e,f,g){this.layer=b,this.index=c,this.x=d,this.y=e,this.rotation=0,this.flipped=!1,this.worldX=d*f,this.worldY=e*g,this.width=f,this.height=g,this.centerX=a.Math.abs(f/2),this.centerY=a.Math.abs(g/2),this.alpha=1,this.properties={},this.scanned=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.collisionCallback=null,this.collisionCallbackContext=this}c.prototype={containsPoint:function(a,b){return!(a<this.worldX||b<this.worldY||a>this.right||b>this.bottom)},intersects:function(a,b,c,d){return c<=this.worldX?!1:d<=this.worldY?!1:a>=this.worldX+this.width?!1:b>=this.worldY+this.height?!1:!0},setCollisionCallback:function(a,b){this.collisionCallback=a,this.collisionCallbackContext=b},destroy:function(){this.collisionCallback=null,this.collisionCallbackContext=null,this.properties=null},setCollision:function(a,b,c,d){this.collideLeft=a,this.collideRight=b,this.collideUp=c,this.collideDown=d,this.faceLeft=a,this.faceRight=b,this.faceTop=c,this.faceBottom=d},resetCollision:function(){this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1},isInteresting:function(a,b){return a&&b?this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.faceTop||this.faceBottom||this.faceLeft||this.faceRight||this.collisionCallback:a?this.collideLeft||this.collideRight||this.collideUp||this.collideDown:b?this.faceTop||this.faceBottom||this.faceLeft||this.faceRight:!1},copy:function(a){this.index=a.index,this.alpha=a.alpha,this.properties=a.properties,this.collideUp=a.collideUp,this.collideDown=a.collideDown,this.collideLeft=a.collideLeft,this.collideRight=a.collideRight,this.collisionCallback=a.collisionCallback,this.collisionCallbackContext=a.collisionCallbackContext}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"collides",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}}),Object.defineProperty(c.prototype,"canCollide",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}}),Object.defineProperty(c.prototype,"left",{get:function(){return this.worldX}}),Object.defineProperty(c.prototype,"right",{get:function(){return this.worldX+this.width}}),Object.defineProperty(c.prototype,"top",{get:function(){return this.worldY}}),Object.defineProperty(c.prototype,"bottom",{get:function(){return this.worldY+this.height}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(a,b,c){function d(a,b,c){this.game=a,this.key=b;var d=this.parse(b,c);this.width=d.width,this.height=d.height,this.tileWidth=d.tileWidth,this.tileHeight=d.tileHeight,this.orientation=d.orientation,this.format=d.format,this.version=d.version,this.properties=d.properties,this.widthInPixels=d.widthInPixels,this.heightInPixels=d.heightInPixels,this.layers=d.layers,this.tilesets=d.tilesets,this.imagecollections=d.imagecollections,this.tiles=d.tiles,this.objects=d.objects,this.collideIndexes=[],this.collision=d.collision,this.images=d.images,this.currentLayer=0,this.debugMap=[],this._results=[],this._tempA=0,this._tempB=0}var e=a(61),f=a(58),g=a(60),h=a(63),i=a(29),j=a(73);d.NORTH=0,d.EAST=1,d.SOUTH=2,d.WEST=3,d.prototype={parse:function(a,b){return e.parse(this.game,a,b)},create:function(a,b,c,d,e,f){return void 0===f&&(f=this.game.world),this.width=b,this.height=c,this.setTileSize(d,e),this.layers.length=0,this.createBlankLayer(a,b,c,d,e,f)},setTileSize:function(a,b){this.tileWidth=a,this.tileHeight=b,this.widthInPixels=this.width*a,this.heightInPixels=this.height*b},addTilesetImage:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q;if(void 0===a)return null;if(void 0===c&&(c=this.tileWidth),void 0===d&&(d=this.tileHeight),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0),0===c&&(c=32),0===d&&(d=32),h=null,(void 0===b||null===b)&&(b=a),!this.game.cache.checkImageKey(b))return console.warn('Tilemap.addTilesetImage: Invalid image key given: "'+b+'"'),null;if(h=this.game.cache.getImage(b),i=this.getTilesetIndex(a),null===i)return console.warn('Tilemap.addTilesetImage: No data found in the JSON matching the tileset name: "'+b+'"'),null;if(this.tilesets[i])return this.tilesets[i].setImage(h),this.tilesets[i];for(j=new Tileset(a,g,c,d,e,f,{}),j.setImage(h),this.tilesets.push(j),k=this.tilesets.length-1,l=e,m=e,n=0,o=0,p=0,q=g;q<g+j.total&&(this.tiles[q]=[l,m,k],l+=c+f,n++,n!==j.total)&&(o++,o!==j.columns||(l=e,m+=d+f,o=0,p++,p!==j.rows));q++);return j},createFromObjects:function(a,b,c,d,e,f,g,h,j){var k,l,m,n,o;if(void 0===e&&(e=!0),void 0===f&&(f=!1),void 0===g&&(g=this.game.world),void 0===h&&(h=i),void 0===j&&(j=!0),!this.objects[a])return void console.warn("Tilemap.createFromObjects: Invalid objectgroup name given: "+a);for(n=0;n<this.objects[a].length;n++)if(k=!1,l=this.objects[a][n],void 0!==l.gid&&"number"==typeof b&&l.gid===b?k=!0:void 0!==l.id&&"number"==typeof b&&l.id===b?k=!0:void 0!==l.name&&"string"==typeof b&&l.name===b&&(k=!0),k){m=new h(this.game,parseFloat(l.x,10),parseFloat(l.y,10),c,d),m.name=l.name,m.visible=l.visible,m.autoCull=f,m.exists=e,l.width&&(m.width=l.width),l.height&&(m.height=l.height),l.rotation&&(m.angle=l.rotation),j&&(m.y-=m.height),g.add(m);for(o in l.properties)g.set(m,o,l.properties[o],!1,!1,0,!0)}},createFromTiles:function(a,b,c,d,e,f){var g,h,j,k,l,m,n;if("number"==typeof a&&(a=[a]),void 0===b||null===b?b=[]:"number"==typeof b&&(b=[b]),d=this.getLayer(d),void 0===e&&(e=this.game.world),void 0===f&&(f={}),void 0===f.customClass&&(f.customClass=i),void 0===f.adjustY&&(f.adjustY=!0),g=this.layers[d].width,h=this.layers[d].height,this.copy(0,0,g,h,d),this._results.length<2)return 0;for(j=0,l=1,m=this._results.length;m>l;l++)if(-1!==a.indexOf(this._results[l].index)){k=new f.customClass(this.game,this._results[l].worldX,this._results[l].worldY,c);for(n in f)k[n]=f[n];e.add(k),j++}if(1===b.length)for(l=0;l<a.length;l++)this.replace(a[l],b[0],0,0,g,h,d);else if(b.length>1)for(l=0;l<a.length;l++)this.replace(a[l],b[l],0,0,g,h,d);return j},createSprite:function(a,b,c,d){void 0===b&&(b=this.widthInPixels),void 0===c&&(c=this.heightInPixels),void 0===d&&(d=this.game.world);var e=a;return"string"==typeof a&&(e=this.getLayerIndex(a)),null===e||e>this.layers.length?void console.warn("Tilemap.createLayer: Invalid layer ID given: "+e):d.add(new h(this.game,this,e,b,c))},createLayer:function(a,b,c,d){void 0===b&&(b=this.game.width),void 0===c&&(c=this.game.height),void 0===d&&(d=this.game.world);var e=a;return"string"==typeof a&&(e=this.getLayerIndex(a)),null===e||e>this.layers.length?void console.warn("Tilemap.createLayer: Invalid layer ID given: "+e):d.add(new g(this.game,this,e,b,c))},createBlankLayer:function(a,b,c,d,e,h){var i,j,k,l,m,n,o;if(void 0===h&&(h=this.game.world),null!==this.getLayerIndex(a))return void console.warn("Tilemap.createBlankLayer: Layer with matching name already exists");for(i={name:a,x:0,y:0,width:b,height:c,widthInPixels:b*d,heightInPixels:c*e,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:null},k=[],l=0;c>l;l++){for(j=[],m=0;b>m;m++)j.push(new f(i,-1,m,l,d,e));k.push(j)}return i.data=k,this.layers.push(i),this.currentLayer=this.layers.length-1,n=i.widthInPixels,o=i.heightInPixels,n>this.game.width&&(n=this.game.width),o>this.game.height&&(o=this.game.height),k=new g(this.game,this,this.layers.length-1,n,o),k.name=a,h.add(k)},getIndex:function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return c;return null},getLayerIndex:function(a){return this.getIndex(this.layers,a)},getTilesetIndex:function(a){return this.getIndex(this.tilesets,a)},getImageIndex:function(a){return this.getIndex(this.images,a)},getObjectIndex:function(a){return this.getIndex(this.objects,a)},setTileIndexCallback:function(a,b,c,d){if(d=this.getLayer(d),"number"==typeof a)this.layers[d].callbacks[a]={callback:b,callbackContext:c};else for(var e=0,f=a.length;f>e;e++)this.layers[d].callbacks[a[e]]={callback:b,callbackContext:c}},setTileLocationCallback:function(a,b,c,d,e,f,g){if(g=this.getLayer(g),this.copy(a,b,c,d,g),!(this._results.length<2))for(var h=1;h<this._results.length;h++)this._results[h].setCollisionCallback(e,f)},setCollision:function(a,b,c,d){if(void 0===b&&(b=!0),void 0===d&&(d=!0),c=this.getLayer(c),"number"==typeof a)return this.setCollisionByIndex(a,b,c,!0);if(Array.isArray(a)){for(var e=0;e<a.length;e++)this.setCollisionByIndex(a[e],b,c,!1);d&&this.calculateFaces(c)}},setCollisionBetween:function(a,b,c,d,e){if(void 0===c&&(c=!0),void 0===e&&(e=!0),d=this.getLayer(d),!(a>b)){for(var f=a;b>=f;f++)this.setCollisionByIndex(f,c,d,!1);e&&this.calculateFaces(d)}},setCollisionByExclusion:function(a,b,c,d){void 0===b&&(b=!0),void 0===d&&(d=!0),c=this.getLayer(c);for(var e=0,f=this.tiles.length;f>e;e++)-1===a.indexOf(e)&&this.setCollisionByIndex(e,b,c,!1);d&&this.calculateFaces(c)},setCollisionByIndex:function(a,b,c,d){var e,f,g,h;for(void 0===b&&(b=!0),void 0===c&&(c=this.currentLayer),void 0===d&&(d=!0),b?this.collideIndexes.push(a):(e=this.collideIndexes.indexOf(a),e>-1&&this.collideIndexes.splice(e,1)),f=0;f<this.layers[c].height;f++)for(g=0;g<this.layers[c].width;g++)h=this.layers[c].data[f][g],h&&h.index===a&&(b?h.setCollision(!0,!0,!0,!0):h.resetCollision(),h.faceTop=b,h.faceBottom=b,h.faceLeft=b,h.faceRight=b);return d&&this.calculateFaces(c),c},getLayer:function(a){return void 0===a?a=this.currentLayer:"string"==typeof a?a=this.getLayerIndex(a):a instanceof g&&(a=a.index),a},setPreventRecalculate:function(a){if(a===!0&&this.preventingRecalculate!==!0&&(this.preventingRecalculate=!0,this.needToRecalculate={}),a===!1&&this.preventingRecalculate===!0){this.preventingRecalculate=!1;for(var b in this.needToRecalculate)this.calculateFaces(b);this.needToRecalculate=!1}},calculateFaces:function(a){var b,c,d,e,f,g,h,i,j;if(this.preventingRecalculate)return void(this.needToRecalculate[a]=!0);for(b=null,c=null,d=null,e=null,f=0,g=this.layers[a].height;g>f;f++)for(h=0,i=this.layers[a].width;i>h;h++)j=this.layers[a].data[f][h],j&&(b=this.getTileAbove(a,h,f),c=this.getTileBelow(a,h,f),d=this.getTileLeft(a,h,f),e=this.getTileRight(a,h,f),j.collides&&(j.faceTop=!0,j.faceBottom=!0,j.faceLeft=!0,j.faceRight=!0),b&&b.collides&&(j.faceTop=!1),c&&c.collides&&(j.faceBottom=!1),d&&d.collides&&(j.faceLeft=!1),e&&e.collides&&(j.faceRight=!1))},getTileAbove:function(a,b,c){return c>0?this.layers[a].data[c-1][b]:null},getTileBelow:function(a,b,c){return c<this.layers[a].height-1?this.layers[a].data[c+1][b]:null},getTileLeft:function(a,b,c){return b>0?this.layers[a].data[c][b-1]:null},getTileRight:function(a,b,c){return b<this.layers[a].width-1?this.layers[a].data[c][b+1]:null},setLayer:function(a){a=this.getLayer(a),this.layers[a]&&(this.currentLayer=a)},hasTile:function(a,b,c){return c=this.getLayer(c),void 0===this.layers[c].data[b]||void 0===this.layers[c].data[b][a]?!1:this.layers[c].data[b][a].index>-1},removeTile:function(a,b,c){if(c=this.getLayer(c),a>=0&&a<this.layers[c].width&&b>=0&&b<this.layers[c].height&&this.hasTile(a,b,c)){var d=this.layers[c].data[b][a];return this.layers[c].data[b][a]=new f(this.layers[c],-1,a,b,this.tileWidth,this.tileHeight),this.layers[c].dirty=!0,this.calculateFaces(c),d}},removeTileWorldXY:function(a,b,c,d,e){return e=this.getLayer(e),a=this.game.math.snapToFloor(a,c)/c,b=this.game.math.snapToFloor(b,d)/d,this.removeTile(a,b,e)},putTile:function(a,b,c,d){if(null===a)return this.removeTile(b,c,d);if(d=this.getLayer(d),b>=0&&b<this.layers[d].width&&c>=0&&c<this.layers[d].height){var e;return a instanceof f?(e=a.index,this.hasTile(b,c,d)?this.layers[d].data[c][b].copy(a):this.layers[d].data[c][b]=new f(d,e,b,c,a.width,a.height)):(e=a,this.hasTile(b,c,d)?this.layers[d].data[c][b].index=e:this.layers[d].data[c][b]=new f(this.layers[d],e,b,c,this.tileWidth,this.tileHeight)),this.collideIndexes.indexOf(e)>-1?this.layers[d].data[c][b].setCollision(!0,!0,!0,!0):this.layers[d].data[c][b].resetCollision(),this.layers[d].dirty=!0,this.calculateFaces(d),this.layers[d].data[c][b]}return null},putTileWorldXY:function(a,b,c,d,e,f){return f=this.getLayer(f),b=this.game.math.snapToFloor(b,d)/d,c=this.game.math.snapToFloor(c,e)/e,this.putTile(a,b,c,f)},searchTileIndex:function(a,b,c,d){var e,f,g;if(void 0===b&&(b=0),void 0===c&&(c=!1),d=this.getLayer(d),e=0,c){for(f=this.layers[d].height-1;f>=0;f--)for(g=this.layers[d].width-1;g>=0;g--)if(this.layers[d].data[f][g].index===a){if(e===b)return this.layers[d].data[f][g];e++}}else for(f=0;f<this.layers[d].height;f++)for(g=0;g<this.layers[d].width;g++)if(this.layers[d].data[f][g].index===a){if(e===b)return this.layers[d].data[f][g];e++}return null},getTile:function(a,b,c,d){return void 0===d&&(d=!1),c=this.getLayer(c),a>=0&&a<this.layers[c].width&&b>=0&&b<this.layers[c].height?-1===this.layers[c].data[b][a].index?d?this.layers[c].data[b][a]:null:this.layers[c].data[b][a]:null},getTileWorldXY:function(a,b,c,d,e,f){return void 0===c&&(c=this.tileWidth),void 0===d&&(d=this.tileHeight),e=this.getLayer(e),a=this.game.math.snapToFloor(a,c)/c,b=this.game.math.snapToFloor(b,d)/d,this.getTile(a,b,e,f)},copy:function(a,b,c,d,e){var f,g;if(e=this.getLayer(e),!this.layers[e])return void(this._results.length=0);for(void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=this.layers[e].width),void 0===d&&(d=this.layers[e].height),0>a&&(a=0),0>b&&(b=0),c>this.layers[e].width&&(c=this.layers[e].width),d>this.layers[e].height&&(d=this.layers[e].height),this._results.length=0,this._results.push({x:a,y:b,width:c,height:d,layer:e}),f=b;b+d>f;f++)for(g=a;a+c>g;g++)this._results.push(this.layers[e].data[f][g]);return this._results},paste:function(a,b,c,d){var e,f,g;if(void 0===a&&(a=0),void 0===b&&(b=0),d=this.getLayer(d),c&&!(c.length<2)){for(e=a-c[1].x,f=b-c[1].y,g=1;g<c.length;g++)this.layers[d].data[f+c[g].y][e+c[g].x].copy(c[g]);this.layers[d].dirty=!0,this.calculateFaces(d)}},swap:function(a,b,c,d,e,f,g){g=this.getLayer(g),this.copy(c,d,e,f,g),this._results.length<2||(this._tempA=a,this._tempB=b,this._results.forEach(this.swapHandler,this),this.paste(c,d,this._results,g))},swapHandler:function(a){a.index===this._tempA?a.index=this._tempB:a.index===this._tempB&&(a.index=this._tempA)},forEach:function(a,b,c,d,e,f,g){g=this.getLayer(g),this.copy(c,d,e,f,g),this._results.length<2||(this._results.forEach(a,b),this.paste(c,d,this._results,g))},replace:function(a,b,c,d,e,f,g){if(g=this.getLayer(g),this.copy(c,d,e,f,g),!(this._results.length<2)){for(var h=1;h<this._results.length;h++)this._results[h].index===a&&(this._results[h].index=b);this.paste(c,d,this._results,g)}},random:function(a,b,c,d,e){var f,g,h,i;if(e=this.getLayer(e),this.copy(a,b,c,d,e),!(this._results.length<2)){for(f=[],g=1;g<this._results.length;g++)this._results[g].index&&(h=this._results[g].index,-1===f.indexOf(h)&&f.push(h));for(i=1;i<this._results.length;i++)this._results[i].index=this.game.rnd.pick(f);this.paste(a,b,this._results,e)}},shuffle:function(a,b,c,d,e){var f,g,h;if(e=this.getLayer(e),this.copy(a,b,c,d,e),!(this._results.length<2)){for(f=[],g=1;g<this._results.length;g++)this._results[g].index&&f.push(this._results[g].index);for(j.shuffle(f),h=1;h<this._results.length;h++)this._results[h].index=f[h-1];this.paste(a,b,this._results,e)}},fill:function(a,b,c,d,e,f){if(f=this.getLayer(f),this.copy(b,c,d,e,f),!(this._results.length<2)){for(var g=1;g<this._results.length;g++)this._results[g].index=a;this.paste(b,c,this._results,f)}},removeAllLayers:function(){this.layers.length=0,this.currentLayer=0},dump:function(){var a,b,c="",d=[""];for(a=0;a<this.layers[this.currentLayer].height;a++){for(b=0;b<this.layers[this.currentLayer].width;b++)c+="%c  ",this.layers[this.currentLayer].data[a][b]>1?this.debugMap[this.layers[this.currentLayer].data[a][b]]?d.push("background: "+this.debugMap[this.layers[this.currentLayer].data[a][b]]):d.push("background: #ffffff"):d.push("background: rgb(0, 0, 0)");c+="\n"}d[0]=c,console.log.apply(console,d)},destroy:function(){this.removeAllLayers(),this.game=null}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"layer",{get:function(){return this.layers[this.currentLayer]},set:function(a){a!==this.currentLayer&&this.setLayer(a)}}),b.exports=d},{29:29,58:58,60:60,61:61,63:63,73:73}],60:[function(a,b,c){(function(c){function d(a,b,c,j,k){j|=0,k|=0,g.call(this,a,0,0),this.map=b,this.index=c,this.layer=b.layers[c],this.type=f.TILEMAPLAYER,this.canvas=h.create(j,k),this.context=this.canvas.getContext("2d"),this.texture=new e.Texture(new e.BaseTexture(this.canvas)),this.renderSettings={enableScrollDelta:!0,overdrawRatio:.2,copyCanvas:null},this.debug=!1,this.exists=!0,this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)",forceFullRedraw:!0,debugAlpha:.5,facingEdgeStroke:"rgba(0,255,0,1)",collidingTileOverfill:"rgba(0,255,0,0.2)"},this.scrollFactorX=1,this.scrollFactorY=1,this.dirty=!0,this.rayStepRate=4,this._wrap=!1,this._mc={scrollX:0,scrollY:0,renderWidth:0,renderHeight:0,tileWidth:b.tileWidth,tileHeight:b.tileHeight,cw:b.tileWidth,ch:b.tileHeight,tilesets:[]},this._scrollX=0,this._scrollY=0,this._results=[],i.canvasBitBltShift||(this.renderSettings.copyCanvas=d.ensureSharedCopyCanvas()),this.fixedToCamera=!0}var e=a("pixi"),f=a(9),g=a(29),h=a(55),i=a(56);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.sharedCopyCanvas=null,d.ensureSharedCopyCanvas=function(){return this.sharedCopyCanvas||(this.sharedCopyCanvas=h.create(2,2)),this.sharedCopyCanvas},d.prototype.postUpdate=function(){var a=this.game.camera;g.prototype.postUpdate.call(this),this.scrollX=a.x,this.scrollY=a.y,this.render()},d.prototype.destroy=function(){h.remove(this),Destroy.prototype.destroy.call(this)},d.prototype.resize=function(a,b){this.canvas.width=a,this.canvas.height=b,this.texture.frame.width=a,this.texture.frame.height=b,this.texture.width=a,this.texture.height=b,this.texture.crop.width=a,this.texture.crop.height=b,this.texture.baseTexture.width=a,this.texture.baseTexture.height=b,this.texture.update(),this.texture.requiresUpdate=!0,this.texture._updateUvs(),this.dirty=!0},d.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.layer.widthInPixels*this.scale.x,this.layer.heightInPixels*this.scale.y)},d.prototype._fixX=function(a){return 0>a&&(a=0),1===this.scrollFactorX?a:this._scrollX+(a-this._scrollX/this.scrollFactorX)},d.prototype._unfixX=function(a){return 1===this.scrollFactorX?a:this._scrollX/this.scrollFactorX+(a-this._scrollX)},d.prototype._fixY=function(a){return 0>a&&(a=0),1===this.scrollFactorY?a:this._scrollY+(a-this._scrollY/this.scrollFactorY)},d.prototype._unfixY=function(a){return 1===this.scrollFactorY?a:this._scrollY/this.scrollFactorY+(a-this._scrollY)},d.prototype.getTileX=function(a){return c.Math.floor(this._fixX(a)/this._mc.tileWidth)},d.prototype.getTileY=function(a){return c.Math.floor(this._fixY(a)/this._mc.tileHeight)},d.prototype.getTileXY=function(a,b,c){return c.x=this.getTileX(a),c.y=this.getTileY(b),c},d.prototype.getRayCastTiles=function(a,b,c,d){var e,f,g,h,i,j,k;if(b||(b=this.rayStepRate),void 0===c&&(c=!1),void 0===d&&(d=!1),e=this.getTiles(a.x,a.y,a.width,a.height,c,d),0===e.length)return[];for(f=a.coordinatesOnLine(b),g=[],h=0;h<e.length;h++)for(i=0;i<f.length;i++)if(j=e[h],k=f[i],j.containsPoint(k[0],k[1])){g.push(j);break}return g},d.prototype.getTiles=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o;for(void 0===f&&(f=!1),void 0===g&&(g=!1),h=!(f||g),a=this._fixX(a),b=this._fixY(b),i=c.Math.floor(a/(this._mc.cw*this.scale.x)),j=c.Math.floor(b/(this._mc.ch*this.scale.y)),k=c.Math.ceil((a+d)/(this._mc.cw*this.scale.x))-i,l=c.Math.ceil((b+e)/(this._mc.ch*this.scale.y))-j;this._results.length;)this._results.pop();for(m=j;j+l>m;m++)for(n=i;i+k>n;n++)o=this.layer.data[m],o&&o[n]&&(h||o[n].isInteresting(f,g))&&this._results.push(o[n]);return this._results.slice()},d.prototype.resolveTileset=function(a){var b,c,d=this._mc.tilesets;if(2e3>a)for(;d.length<a;)d.push(void 0);return b=this.map.tiles[a]&&this.map.tiles[a][2],null!=b&&(c=this.map.tilesets[b],c&&c.containsTileIndex(a))?d[a]=c:d[a]=null},d.prototype.resetTilesetCache=function(){for(var a=this._mc.tilesets;a.length;)a.pop()},d.prototype.setScale=function(a,b){var c,d,e,f;for(a=a||1,b=b||a,c=0;c<this.layer.data.length;c++)for(d=this.layer.data[c],e=0;e<d.length;e++)f=d[e],f.width=this.map.tileWidth*a,f.height=this.map.tileHeight*b,f.worldX=f.x*f.width,f.worldY=f.y*f.height;this.scale.setTo(a,b)},d.prototype.shiftCanvas=function(a,b,d){var e,f,g=a.canvas,h=g.width-c.Math.abs(b),i=g.height-c.Math.abs(d),j=0,k=0,l=b,m=d;0>b&&(j=-b,l=0),0>d&&(k=-d,m=0),e=this.renderSettings.copyCanvas,e?((e.width<h||e.height<i)&&(e.width=h,e.height=i),f=e.getContext("2d"),f.clearRect(0,0,h,i),f.drawImage(g,j,k,h,i,0,0,h,i),a.clearRect(l,m,h,i),a.drawImage(e,0,0,h,i,l,m,h,i)):(a.save(),a.globalCompositeOperation="copy",a.drawImage(g,j,k,h,i,l,m,h,i),a.restore())},d.prototype.renderRegion=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this.context,w=this.layer.width,x=this.layer.height,y=this._mc.tileWidth,z=this._mc.tileHeight,A=this._mc.tilesets,B=NaN;for(this._wrap||(f>=d&&(d=c.Math.max(0,d),f=c.Math.min(w-1,f)),g>=e&&(e=c.Math.max(0,e),g=c.Math.min(x-1,g))),h=d*y-a,i=e*z-b,j=(d+(1<<20)*w)%w,k=(e+(1<<20)*x)%x,v.fillStyle=this.tileColor,o=k,q=g-e,m=i;q>=0;o++,q--,m+=z)for(o>=x&&(o-=x),r=this.layer.data[o],n=j,p=f-d,l=h;p>=0;n++,p--,l+=y)n>=w&&(n-=w),s=r[n],!s||s.index<0||(t=s.index,u=A[t],void 0===u&&(u=this.resolveTileset(t)),s.alpha===B||this.debug||(v.globalAlpha=s.alpha,B=s.alpha),u?s.rotation||s.flipped?(v.save(),v.translate(l+s.centerX,m+s.centerY),v.rotate(s.rotation),s.flipped&&v.scale(-1,1),u.draw(v,-s.centerX,-s.centerY,t),v.restore()):u.draw(v,l,m,t):this.debugSettings.missingImageFill&&(v.fillStyle=this.debugSettings.missingImageFill,v.fillRect(l,m,y,z)),s.debug&&this.debugSettings.debuggedTileOverfill&&(v.fillStyle=this.debugSettings.debuggedTileOverfill,v.fillRect(l,m,y,z)))},d.prototype.renderDeltaScroll=function(a,b){var d,e,f,g,h=this._mc.scrollX,i=this._mc.scrollY,j=this.canvas.width,k=this.canvas.height,l=this._mc.tileWidth,m=this._mc.tileHeight,n=0,o=-l,p=0,q=-m;0>a?(n=j+a,o=j-1):a>0&&(o=a),0>b?(p=k+b,q=k-1):b>0&&(q=b),this.shiftCanvas(this.context,a,b),n=c.Math.floor((n+h)/l),o=c.Math.floor((o+h)/l),p=c.Math.floor((p+i)/m),q=c.Math.floor((q+i)/m),o>=n&&(this.context.clearRect(n*l-h,0,(o-n+1)*l,k),d=c.Math.floor((0+i)/m),e=c.Math.floor((k-1+i)/m),this.renderRegion(h,i,n,d,o,e)),q>=p&&(this.context.clearRect(0,p*m-i,j,(q-p+1)*m),f=c.Math.floor((0+h)/l),g=c.Math.floor((j-1+h)/l),this.renderRegion(h,i,f,p,g,q))},d.prototype.renderFull=function(){var a=this._mc.scrollX,b=this._mc.scrollY,d=this.canvas.width,e=this.canvas.height,f=this._mc.tileWidth,g=this._mc.tileHeight,h=c.Math.floor(a/f),i=c.Math.floor((d-1+a)/f),j=c.Math.floor(b/g),k=c.Math.floor((e-1+b)/g);this.context.clearRect(0,0,d,e),this.renderRegion(a,b,h,j,i,k)},d.prototype.render=function(){var a,b,d,e,f,g,h,i=!1;if(this.visible&&((this.dirty||this.layer.dirty)&&(this.layer.dirty=!1,i=!0),a=this.canvas.width,b=this.canvas.height,d=0|this._scrollX,e=0|this._scrollY,f=this._mc,g=f.scrollX-d,h=f.scrollY-e,i||0!==g||0!==h||f.renderWidth!==a||f.renderHeight!==b))return this.context.save(),f.scrollX=d,f.scrollY=e,(f.renderWidth!==a||f.renderHeight!==b)&&(f.renderWidth=a,f.renderHeight=b),this.debug&&(this.context.globalAlpha=this.debugSettings.debugAlpha,this.debugSettings.forceFullRedraw&&(i=!0)),!i&&this.renderSettings.enableScrollDelta&&c.Math.abs(g)+c.Math.abs(h)<c.Math.min(a,b)?this.renderDeltaScroll(g,h):this.renderFull(),this.debug&&(this.context.globalAlpha=1,this.renderDebug()),this.texture.update(),this.dirty=!1,this.context.restore(),!0},d.prototype.renderDebug=function(){var a,b,d,e,f,g,h,i,j=this._mc.scrollX,k=this._mc.scrollY,l=this.context,m=this.canvas.width,n=this.canvas.height,o=this.layer.width,p=this.layer.height,q=this._mc.tileWidth,r=this._mc.tileHeight,s=c.Math.floor(j/q),t=c.Math.floor((m-1+j)/q),u=c.Math.floor(k/r),v=c.Math.floor((n-1+k)/r),w=s*q-j,x=u*r-k,y=(s+(1<<20)*o)%o,z=(u+(1<<20)*p)%p;for(l.strokeStyle=this.debugSettings.facingEdgeStroke,e=z,g=v-u,b=x;g>=0;e++,g--,b+=r)for(e>=p&&(e-=p),h=this.layer.data[e],d=y,f=t-s,a=w;f>=0;d++,f--,a+=q)d>=o&&(d-=o),i=h[d],!i||i.index<0||!i.collides||(this.debugSettings.collidingTileOverfill&&(l.fillStyle=this.debugSettings.collidingTileOverfill,l.fillRect(a,b,this._mc.cw,this._mc.ch)),this.debugSettings.facingEdgeStroke&&(l.beginPath(),i.faceTop&&(l.moveTo(a,b),l.lineTo(a+this._mc.cw,b)),i.faceBottom&&(l.moveTo(a,b+this._mc.ch),l.lineTo(a+this._mc.cw,b+this._mc.ch)),i.faceLeft&&(l.moveTo(a,b),l.lineTo(a,b+this._mc.ch)),i.faceRight&&(l.moveTo(a+this._mc.cw,b),l.lineTo(a+this._mc.cw,b+this._mc.ch)),l.stroke()))},Object.defineProperty(d.prototype,"wrap",{get:function(){return this._wrap},set:function(a){this._wrap=a,this.dirty=!0}}),Object.defineProperty(d.prototype,"scrollX",{get:function(){return this._scrollX},set:function(a){this._scrollX=a}}),Object.defineProperty(d.prototype,"scrollY",{get:function(){return this._scrollY},set:function(a){this._scrollY=a}}),Object.defineProperty(d.prototype,"collisionWidth",{get:function(){return this._mc.cw},set:function(a){this._mc.cw=0|a,this.dirty=!0}}),Object.defineProperty(d.prototype,"collisionHeight",{get:function(){return this._mc.ch},set:function(a){this._mc.ch=0|a,this.dirty=!0}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{29:29,55:55,56:56,9:9,pixi:"pixi"}],61:[function(a,b,c){var d=a(58),e=a(64),f=a(74),g={parse:function(a,b,c){if(void 0===b)return this.getEmptyData();void 0===c&&(c={});var d=a.cache.getTilemapData(b);if(d)return this.parseTiledJSON(f.mixin(c,d.data));throw Error("TilemapParser.parse - No map data found for key "+b)},getEmptyData:function(a,b,c,d){var e,f,g={};return g.width=0,g.height=0,g.tileWidth=0,g.tileHeight=0,void 0!==a&&null!==a&&(g.tileWidth=a),void 0!==b&&null!==b&&(g.tileHeight=b),void 0!==c&&null!==c&&(g.width=c),void 0!==d&&null!==d&&(g.height=d),g.orientation="orthogonal",g.version="1",g.properties={},g.widthInPixels=0,g.heightInPixels=0,e=[],f={name:"layer",x:0,y:0,width:0,height:0,widthInPixels:0,heightInPixels:0,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:[]},e.push(f),g.layers=e,g.images=[],g.objects={},g.collision={},g.tilesets=[],g.tiles=[],g},parseTiledJSON:function(a){var b,c,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;if("orthogonal"!==a.orientation)return console.warn("TilemapParser.parseTiledJSON - Only orthogonal map types are supported in this version of Phaser"),null;for(b={},b.width=a.width,b.height=a.height,b.tileWidth=a.tilewidth,b.tileHeight=a.tileheight,b.orientation=a.orientation,b.version=a.version,b.properties=a.properties,b.widthInPixels=b.width*b.tileWidth,b.heightInPixels=b.height*b.tileHeight,c=[],g=0;g<a.layers.length;g++)if("tilelayer"===a.layers[g].type){if(h=a.layers[g],!h.compression&&h.encoding&&"base64"===h.encoding){for(i=window.atob(h.data),j=i.length,k=Array(j),l=0;j>l;l+=4)k[l/4]=(i.charCodeAt(l)|i.charCodeAt(l+1)<<8|i.charCodeAt(l+2)<<16|i.charCodeAt(l+3)<<24)>>>0;h.data=k}for(m={name:a.layers[g].name,x:a.layers[g].x,y:a.layers[g].y,width:a.layers[g].width,height:a.layers[g].height,widthInPixels:a.layers[g].width*a.tilewidth,heightInPixels:a.layers[g].height*a.tileheight,alpha:a.layers[g].opacity,visible:a.layers[g].visible,properties:{},indexes:[],callbacks:[],bodies:[]},a.layers[g].properties&&(m.properties=a.layers[g].properties),n=0,o=[],p=[],u=0,j=a.layers[g].data.length;j>u;u++){if(q=0,r=!1,t=a.layers[g].data[u],t>536870912)switch(s=0,t>2147483648&&(t-=2147483648,s+=4),t>1073741824&&(t-=1073741824,s+=2),t>536870912&&(t-=536870912,s+=1),s){case 5:q=Math.PI/2;break;case 6:q=Math.PI;break;case 3:q=3*Math.PI/2;break;case 4:q=0,r=!0;break;case 7:q=Math.PI/2,r=!0;break;case 2:q=Math.PI,r=!0;break;case 1:q=3*Math.PI/2,r=!0}t>0?(o.push(new d(m,t,n,p.length,a.tilewidth,a.tileheight)),o[o.length-1].rotation=q,o[o.length-1].flipped=r):o.push(new d(m,-1,n,p.length,a.tilewidth,a.tileheight)),n++,n===a.layers[g].width&&(p.push(o),n=0,o=[])}m.data=p,c.push(m)}for(b.layers=c,v=[],g=0;g<a.layers.length;g++)"imagelayer"===a.layers[g].type&&(w={name:a.layers[g].name,image:a.layers[g].image,x:a.layers[g].x,y:a.layers[g].y,alpha:a.layers[g].opacity,visible:a.layers[g].visible,properties:{}},a.layers[g].properties&&(w.properties=a.layers[g].properties),v.push(w));for(b.images=v,x=[],y=[],g=0;g<a.tilesets.length;g++)z=a.tilesets[g],z.image&&(A=new e(z.name,z.firstgid,z.tilewidth,z.tileheight,z.margin,z.spacing,z.properties),z.tileproperties&&(A.tileProperties=z.tileproperties),A.updateTileData(z.imagewidth,z.imageheight),x.push(A));for(b.tilesets=x,b.imagecollections=y,B={},C={},D=function(a,b){var c,d,e={};for(c in b)d=b[c],void 0!==a[d]&&(e[d]=a[d]);return e},g=0;g<a.layers.length;g++)if("objectgroup"===a.layers[g].type)for(B[a.layers[g].name]=[],C[a.layers[g].name]=[],E=0,j=a.layers[g].objects.length;j>E;E++)if(a.layers[g].objects[E].gid)F={gid:a.layers[g].objects[E].gid,name:a.layers[g].objects[E].name,type:a.layers[g].objects[E].hasOwnProperty("type")?a.layers[g].objects[E].type:"",x:a.layers[g].objects[E].x,y:a.layers[g].objects[E].y,visible:a.layers[g].objects[E].visible,properties:a.layers[g].objects[E].properties},a.layers[g].objects[E].rotation&&(F.rotation=a.layers[g].objects[E].rotation),B[a.layers[g].name].push(F);else if(a.layers[g].objects[E].polyline){for(F={name:a.layers[g].objects[E].name,type:a.layers[g].objects[E].type,x:a.layers[g].objects[E].x,y:a.layers[g].objects[E].y,width:a.layers[g].objects[E].width,height:a.layers[g].objects[E].height,visible:a.layers[g].objects[E].visible,properties:a.layers[g].objects[E].properties},a.layers[g].objects[E].rotation&&(F.rotation=a.layers[g].objects[E].rotation),F.polyline=[],G=0;G<a.layers[g].objects[E].polyline.length;G++)F.polyline.push([a.layers[g].objects[E].polyline[G].x,a.layers[g].objects[E].polyline[G].y]);C[a.layers[g].name].push(F),B[a.layers[g].name].push(F)}else if(a.layers[g].objects[E].polygon){for(F=D(a.layers[g].objects[E],["name","type","x","y","visible","rotation","properties"]),F.polygon=[],G=0;G<a.layers[g].objects[E].polygon.length;G++)F.polygon.push([a.layers[g].objects[E].polygon[G].x,a.layers[g].objects[E].polygon[G].y]);
B[a.layers[g].name].push(F)}else a.layers[g].objects[E].ellipse?(F=D(a.layers[g].objects[E],["name","type","ellipse","x","y","width","height","visible","rotation","properties"]),B[a.layers[g].name].push(F)):(F=D(a.layers[g].objects[E],["name","type","x","y","width","height","visible","rotation","properties"]),F.rectangle=!0,B[a.layers[g].name].push(F));for(b.objects=B,b.collision=C,b.tiles=[],g=0;g<b.tilesets.length;g++)for(z=b.tilesets[g],n=z.tileMargin,H=z.tileMargin,I=0,J=0,K=0,u=z.firstgid;u<z.firstgid+z.total&&(b.tiles[u]=[n,H,g],n+=z.tileWidth+z.tileSpacing,I++,I!==z.total)&&(J++,J!==z.columns||(n=z.tileMargin,H+=z.tileHeight+z.tileSpacing,J=0,K++,K!==z.rows));u++);for(g=0;g<b.layers.length;g++)for(m=b.layers[g],l=0;l<m.data.length;l++)for(o=m.data[l],N=0;N<o.length;N++)L=o[N],L.index<0||(M=b.tiles[L.index][2],z=b.tilesets[M],z.tileProperties&&z.tileProperties[L.index-z.firstgid]&&(L.properties=f.mixin(z.tileProperties[L.index-z.firstgid],L.properties)));return b}};b.exports=g},{58:58,64:64,74:74}],62:[function(a,b,c){(function(a){function c(a,b,d){this._tilemap=a,this._layerIndex=this._tilemap.getLayerIndex(b),this._tilesetIndex=this._tilemap.getTilesetIndex(d),this._open,this._closed,this._visited,this._useDiagonal=!0,this._findClosest=!0,this._walkablePropName="walkable",this._distanceFunction=c.DISTANCE_EUCLIDIAN,this._lastPath=null,this._debug=!0}c.COST_ORTHOGONAL=1,c.COST_DIAGONAL=c.COST_ORTHOGONAL*a.Math.sqrt(2),c.DISTANCE_MANHATTAN="distManhattan",c.DISTANCE_EUCLIDIAN="distEuclidian",c.prototype.constructor=c,c.prototype.updateMap=function(){var a,b,d,e,f,g,h=this._tilemap.tilesets[this._tilesetIndex];for(f=0;f<this._tilemap.height;f++)for(g=0;g<this._tilemap.width;g++)a=this._tilemap.layers[this._layerIndex].data[f][g],b=a.index-h.firstgid,a.index<0||(e=h.tileProperties[b],d=e&&"true"===e.walkable?!0:!1,a.properties.astarNode=new c.TilemapPathingNode(g,f,d,e))},c.prototype.findPath=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q=new c.TilemapPathingPath,r=this._tilemap.layers[this._layerIndex].data[a.y][a.x].properties.astarNode,s=this._tilemap.layers[this._layerIndex].data[b.y][b.x].properties.astarNode;for(q.start=r,q.goal=s,this._open=[],this._closed=[],this._visited=[],this._open.push(r),r.g=0,r.h=this[this._distanceFunction](r,s),r.f=r.h,r.parent=null;this._open.length>0;){for(d=1/0,f=0;f<this._open.length;f++)this._open[f].f<d&&(e=this._open[f],d=e.f);if(e==s)return q.nodes=this.reconstructPath(s),this._lastPath=q,this._debug===!0&&(q.visited=this._visited),q;for(this._open.splice(this._open.indexOf(e),1),this._closed.push(e),g=this.neighbors(e),h=0;h<g.length;h++)i=g[h],-1==this._closed.indexOf(i)&&(j=e.g+i.travelCost,k=!1,-1==this._open.indexOf(i)?(this._open.push(i),k=!0,this._debug===!0&&this.visit(i)):j<i.g&&(k=!0),k&&(i.parent=e,i.g=j,i.h=this[this._distanceFunction](i,s),i.f=i.g+i.h))}if(this._findClosest===!0){for(l=1/0,f=0,p=this._closed.length;p>f;f++)n=this._closed[f],o=this[this._distanceFunction](s,n),l>o&&(l=o,m=n);q.nodes=this.reconstructPath(m),this._debug===!0&&(q.visited=this._visited)}return this._lastPath=q,q},c.prototype.reconstructPath=function(a){for(var b=[],c=a;c.parent;)b.push({x:c.x,y:c.y}),c=c.parent;return b},c.prototype.visit=function(a){for(var b in this._visited)if(this._visited[b]==a)return;this._visited.push(a)},c.prototype.neighbors=function(a){var b=a.x,d=a.y,e=null,f=[],g=a.properties||{},h=this._tilemap.layers[this._layerIndex].data;return b>0&&"false"===g.collisionLeft&&(e=h[d][b-1].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),b<this._tilemap.width-1&&"false"===g.collisionRight&&(e=h[d][b+1].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),d>0&&"false"===g.collisionTop&&(e=h[d-1][b].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),d<this._tilemap.height-1&&"false"===g.collisionBottom&&(e=h[d+1][b].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),this._useDiagonal===!1?f:(b>0&&d>0&&"false"===g.collisionTop&&"false"===g.collisionLeft&&(e=h[d-1][b-1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionRight&&"false"===e.properties.collisionBottom&&(e.travelCost=c.COST_DIAGONAL,f.push(e))),b<this._tilemap.width-1&&d>0&&"false"===g.collisionTop&&"false"===g.collisionRight&&(e=h[d-1][b+1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionLeft&&"false"===e.properties.collisionBottom&&(e.travelCost=c.COST_DIAGONAL,f.push(e))),b>0&&d<this._tilemap.height-1&&"false"===g.collisionBottom&&"false"===g.collisionLeft&&(e=h[d+1][b-1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionRight&&"false"===e.properties.collisionTop&&(e.travelCost=c.COST_DIAGONAL,f.push(e))),b<this._tilemap.width-1&&d<this._tilemap.height-1&&"false"===g.collisionRight&&"false"===g.collisionBottom&&(e=h[d+1][b+1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionTop&&"false"===e.properties.collisionLeft&&(e.travelCost=c.COST_DIAGONAL,f.push(e))),f)},c.prototype.distManhattan=function(b,c){return a.Math.abs(b.x-c.x)+a.Math.abs(b.y-c.y)},c.prototype.distEuclidian=function(b,c){return a.Math.sqrt(a.Math.pow(b.x-c.x,2)+a.Math.pow(b.y-c.y,2))},c.TilemapPathingNode=function(a,b,c,d){this.x=a,this.y=b,this.g=0,this.h=0,this.f=0,this.parent,this.walkable=c,this.properties=d,this.travelCost},c.TilemapPathingPath=function(a,b,c){this.nodes=a||[],this.start=b||null,this.goal=c||null,this.visited=[]},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],63:[function(a,b,c){(function(c){function d(a,b,c,d,i){d|=0,i|=0,g.call(this,a,0,0),this.map=b,this.index=c,this.layer=b.layers[c],this.type=f.TILEMAPSPRITE,this.canvas=h.create(d,i),this.context=this.canvas.getContext("2d"),this.texture=new e.Texture(new e.BaseTexture(this.canvas)),this.debug=!1,this.exists=!0,this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)"},this.dirty=!0,this.rayStepRate=4,this._mc={renderWidth:0,renderHeight:0,tileWidth:b.tileWidth,tileHeight:b.tileHeight,cw:b.tileWidth,ch:b.tileHeight,tilesets:[]},this._results=[]}var e=a("pixi"),f=a(9),g=a(29),h=a(55);a(56);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.update=function(){g.prototype.update.call(this),this.render()},d.prototype.destroy=function(){h.remove(this),g.prototype.destroy.call(this)},d.prototype.resize=function(a,b){},d.prototype.getTileX=function(a){return c.Math.floor(a/this._mc.tileWidth)},d.prototype.getTileY=function(a){return c.Math.floor(a/this._mc.tileHeight)},d.prototype.getTileXY=function(a,b,c){return c.x=this.getTileX(a),c.y=this.getTileY(b),c},d.prototype.getRayCastTiles=function(a,b,c,d){var e,f,g,h,i,j,k;if(b||(b=this.rayStepRate),void 0===c&&(c=!1),void 0===d&&(d=!1),e=this.getTiles(a.x,a.y,a.width,a.height,c,d),0===e.length)return[];for(f=a.coordinatesOnLine(b),g=[],h=0;h<e.length;h++)for(i=0;i<f.length;i++)if(j=e[h],k=f[i],j.containsPoint(k[0],k[1])){g.push(j);break}return g},d.prototype.getTiles=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o;for(void 0===f&&(f=!1),void 0===g&&(g=!1),h=!(f||g),i=c.Math.floor(a/(this._mc.cw*this.scale.x)),j=c.Math.floor(b/(this._mc.ch*this.scale.y)),k=c.Math.ceil((a+d)/(this._mc.cw*this.scale.x))-i,l=c.Math.ceil((b+e)/(this._mc.ch*this.scale.y))-j;this._results.length;)this._results.pop();for(m=j;j+l>m;m++)for(n=i;i+k>n;n++)o=this.layer.data[m],o&&o[n]&&(h||o[n].isInteresting(f,g))&&this._results.push(o[n]);return this._results.slice()},d.prototype.resolveTileset=function(a){var b,c,d=this._mc.tilesets;if(2e3>a)for(;d.length<a;)d.push(void 0);return c=this.map.tiles[a]&&this.map.tiles[a][2],null!=c&&(b=this.map.tilesets[c],b&&b.containsTileIndex(a))?d[a]=b:d[a]=null},d.prototype.resetTilesetCache=function(){for(var a=this._mc.tilesets;a.length;)a.pop()},d.prototype.renderRegion=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q=this.context,r=this.layer.width,s=this.layer.height,t=this._mc.tileWidth,u=this._mc.tileHeight,v=this._mc.tilesets,w=NaN,x=c*t-a,y=d*u-b,z=(c+(1<<20)*r)%r,A=(d+(1<<20)*s)%s;for(q.fillStyle=this.tileColor,j=A,l=f-d,h=y;l>=0;j++,l--,h+=u)for(j>=s&&(j-=s),m=this.layer.data[j],i=z,k=e-c,g=x;k>=0;i++,k--,g+=t)i>=r&&(i-=r),n=m[i],!n||n.index<0||(o=n.index,p=v[o],void 0===p&&(p=this.resolveTileset(o)),n.alpha===w||this.debug||(q.globalAlpha=n.alpha,w=n.alpha),p?n.rotation||n.flipped?(q.save(),q.translate(g+n.centerX,h+n.centerY),q.rotate(n.rotation),n.flipped&&q.scale(-1,1),p.draw(q,-n.centerX,-n.centerY,o),q.restore()):p.draw(q,g,h,o):this.debugSettings.missingImageFill&&(q.fillStyle=this.debugSettings.missingImageFill,q.fillRect(g,h,t,u)),n.debug&&this.debugSettings.debuggedTileOverfill&&(q.fillStyle=this.debugSettings.debuggedTileOverfill,q.fillRect(g,h,t,u)))},d.prototype.renderFull=function(){var a=0,b=0,d=this.canvas.width,e=this.canvas.height,f=this._mc.tileWidth,g=this._mc.tileHeight,h=0,i=0,j=c.Math.floor((d-1)/f),k=c.Math.floor((e-1)/g);this.context.clearRect(0,0,d,e),this.renderRegion(a,b,h,i,j,k)},d.prototype.render=function(){var a=!1;this.visible&&((this.dirty||this.layer.dirty)&&(this.layer.dirty=!1,a=!0),a&&(this.context.save(),this.renderFull(),this.texture.update(),this.dirty=!1,this.context.restore()))},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{29:29,55:55,56:56,9:9,pixi:"pixi"}],64:[function(a,b,c){(function(a){function c(a,b,c,d,e,f,g){(void 0===c||0>=c)&&(c=32),(void 0===d||0>=d)&&(d=32),void 0===e&&(e=0),void 0===f&&(f=0),this.name=a,this.firstgid=0|b,this.tileWidth=0|c,this.tileHeight=0|d,this.tileMargin=0|e,this.tileSpacing=0|f,this.properties=g||{},this.image=null,this.rows=0,this.columns=0,this.total=0,this.drawCoords=[]}c.prototype={draw:function(a,b,c,d){var e=d-this.firstgid<<1;e>=0&&e+1<this.drawCoords.length&&a.drawImage(this.image,this.drawCoords[e],this.drawCoords[e+1],this.tileWidth,this.tileHeight,b,c,this.tileWidth,this.tileHeight)},containsTileIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},setImage:function(a){this.image=a,this.updateTileData(a.width,a.height)},setSpacing:function(a,b){this.tileMargin=0|a,this.tileSpacing=0|b,this.image&&this.updateTileData(this.image.width,this.image.height)},updateTileData:function(b,c){var d,e,f,g,h=(c-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),i=(b-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);for((h%1!==0||i%1!==0)&&console.warn("Tileset - image tile area is not an even multiple of tile size"),h=a.Math.floor(h),i=a.Math.floor(i),(this.rows&&this.rows!==h||this.columns&&this.columns!==i)&&console.warn("Tileset - actual and expected number of tile rows and columns differ"),this.rows=h,this.columns=i,this.total=h*i,this.drawCoords.length=0,d=this.tileMargin,e=this.tileMargin,f=0;f<this.rows;f++){for(g=0;g<this.columns;g++)this.drawCoords.push(d),this.drawCoords.push(e),d+=this.tileWidth+this.tileSpacing;d=this.tileMargin,e+=this.tileHeight+this.tileSpacing}}},c.prototype.constructor=c,b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],65:[function(a,b,c){(function(c){function d(a){this.game=a,this.time=0,this.prevTime=0,this.now=0,this.previousDateNow=0,this.elapsed=0,this.elapsedMS=0,this.slowMotion=1,this.desiredFpsMult=1/d.DESIRED_FPS,this.advancedTiming=!0,this.suggestedFps=null,this.frames=0,this.fps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.pauseDuration=0,this.timeToCall=0,this.timeExpected=0,this.events=new e(this.game,!1),this._desiredFps=d.DESIRED_FPS,this._frameCount=0,this._elapsedAccumulator=0,this._started=0,this._timeLastSecond=0,this._pauseStarted=0,this._justResumed=!1,this._timers=[]}var e=a(66);d.DESIRED_FPS=60,d.prototype.constructor=d,d.prototype.boot=function(){this._started=c.Date.now(),this.time=c.Date.now(),this.events.start()},d.prototype.benchmark=function(){this.events.add(6e3,function(){this.advancedTiming=!1,this.suggestedFps<57.5&&this.game.emit("fpsProblem")},this)},d.prototype.add=function(a){return this._timers.push(a),a},d.prototype.create=function(a){void 0===a&&(a=!0);var b=new e(this.game,a);return this._timers.push(b),b},d.prototype.removeAll=function(){for(var a=0;a<this._timers.length;a++)this._timers[a].destroy();this._timers=[],this.events.removeAll()},d.prototype.update=function(a){this.previousDateNow=this.time,this.time=c.Date.now(),this.elapsedMS=this.time-this.previousDateNow,this.prevTime=this.now,this.now=a,this.elapsed=this.now-this.prevTime,this.game.raf&&this.game.raf._isSetTimeOut&&(this.timeToCall=c.Math.floor(c.Math.max(0,1e3/this._desiredFps-(this.timeExpected-a))),this.timeExpected=a+this.timeToCall),this.advancedTiming?this.updateAdvancedTiming():(this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=c.Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this._timeLastSecond=this.now,this.frames=0)),this.game.paused||(this.events.update(this.time),this._timers.length&&this.updateTimers())},d.prototype.refresh=function(){var a=this.time;this.time=c.Date.now(),this.elapsedMS=this.time-a},d.prototype.updateTimers=function(){for(var a=0,b=this._timers.length;b>a;)this._timers[a].update(this.time)?a++:(this._timers.splice(a,1),b--)},d.prototype.updateAdvancedTiming=function(){this._frameCount++,this._elapsedAccumulator+=this.elapsed,this._frameCount>=2*this._desiredFps&&(this.suggestedFps=2.5*c.Math.floor(400/(this._elapsedAccumulator/this._frameCount)),this._frameCount=0,this._elapsedAccumulator=0),this.msMin=c.Math.min(this.msMin,this.elapsed),this.msMax=c.Math.max(this.msMax,this.elapsed),this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=c.Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this.fpsMin=c.Math.min(this.fpsMin,this.fps),this.fpsMax=c.Math.max(this.fpsMax,this.fps),this._timeLastSecond=this.now,this.frames=0)},d.prototype.gamePaused=function(){this._pauseStarted=c.Date.now(),this.events.pause();for(var a=this._timers.length;a--;)this._timers[a]._pause()},d.prototype.gameResumed=function(){this.time=c.Date.now(),this.pauseDuration=this.time-this._pauseStarted,this.events.resume();for(var a=this._timers.length;a--;)this._timers[a]._resume()},d.prototype.totalElapsedSeconds=function(){return.001*(this.time-this._started)},d.prototype.elapsedSince=function(a){return this.time-a},d.prototype.elapsedSecondsSince=function(a){return.001*(this.time-a)},d.prototype.reset=function(){this._started=this.time,this.removeAll()},Object.defineProperty(d.prototype,"desiredFps",{get:function(){return this._desiredFps},set:function(a){this._desiredFps=a,this.desiredFpsMult=1/a}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{66:66}],66:[function(a,b,c){(function(c){function d(a,b){void 0===b&&(b=!0),this.game=a,this.running=!1,this.autoDestroy=b,this.expired=!1,this.elapsed=0,this.events=[],this.nextTick=0,this.timeCap=1e3,this.paused=!1,this._codePaused=!1,this._started=0,this._pauseStarted=0,this._pauseTotal=0,this._now=c.Date.now(),this._len=0,this._marked=0,this._i=0,this._diff=0,this._newTick=0,f.call(this)}var e=a(67),f=a(2);d.MINUTE=6e4,d.SECOND=1e3,d.HALF=500,d.QUARTER=250,d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.create=function(a,b,d,f,g,h){a=c.Math.round(a);var i,j=a;return j+=0===this._now?this.game.clock.time:this._now,i=new e(this,a,j,d,b,f,g,h),this.events.push(i),this.order(),this.expired=!1,i},d.prototype.add=function(a,b,c){return this.create(a,!1,0,b,c,Array.prototype.slice.call(arguments,3))},d.prototype.repeat=function(a,b,c,d){return this.create(a,!1,b,c,d,Array.prototype.slice.call(arguments,4))},d.prototype.loop=function(a,b,c){return this.create(a,!0,0,b,c,Array.prototype.slice.call(arguments,3))},d.prototype.start=function(a){if(!this.running){this._started=this.game.clock.time+(a||0),this.running=!0;for(var b=0;b<this.events.length;b++)this.events[b].tick=this.events[b].delay+this._started}},d.prototype.stop=function(a){if(this.running=!1,void 0===a&&(a=!0),a)for(var b=0;b<this.events.length;b++)this.events[b].pendingDelete=!0},d.prototype.remove=function(a){for(var b=0;b<this.events.length;b++)if(this.events[b]===a)return this.events[b].pendingDelete=!0,!0;return!1},d.prototype.order=function(){this.events.length>0&&(this.events.sort(this.sortHandler),this.nextTick=this.events[0].tick)},d.prototype.sortHandler=function(a,b){return a.tick<b.tick?-1:a.tick>b.tick?1:0},d.prototype.clearPendingEvents=function(){var a,b=this.events;for(this._i=b.length;this._i--;)a=b[this._i],a.pendingDelete&&(a.emit("complete",a.callbackContext),a.removeAllListeners(),b.splice(this._i,1));this._len=b.length,this._i=0},d.prototype.update=function(a){if(this.paused)return!0;this.elapsed=a-this._now,this._now=a,this.elapsed>this.timeCap&&(this.adjustEvents(a-this.elapsed),console.warn("Timer: elapsed > timeCap code branch executed, adjusted event timers")),this._marked=0,this.clearPendingEvents();var b;if(this.running&&this._now>=this.nextTick&&this._len>0){for(;this._i<this._len&&this.running&&(b=this.events[this._i],this._now>=b.tick&&!b.pendingDelete);)this._newTick=this._now+b.delay-(this._now-b.tick),this._newTick<0&&(this._newTick=this._now+b.delay),b.loop===!0?(b.tick=this._newTick,b.callback.apply(b.callbackContext,b.args)):b.repeatCount>0?(b.repeatCount--,b.tick=this._newTick,b.callback.apply(b.callbackContext,b.args)):(this._marked++,b.pendingDelete=!0,b.callback.apply(b.callbackContext,b.args)),this._i++;this.events.length>this._marked?this.order():(this.expired=!0,this.emit("complete",this))}return this.expired&&this.autoDestroy?!1:!0},d.prototype.pause=function(){this.running&&(this._codePaused=!0,this.paused||(this._pauseStarted=this.game.clock.time,this.paused=!0))},d.prototype._pause=function(){!this.paused&&this.running&&(this._pauseStarted=this.game.clock.time,this.paused=!0)},d.prototype.adjustEvents=function(a){var b,c,d;for(b=0;b<this.events.length;b++)this.events[b].pendingDelete||(c=this.events[b].tick-a,0>c&&(c=0),this.events[b].tick=this._now+c);d=this.nextTick-a,0>d?this.nextTick=this._now:this.nextTick=this._now+d},d.prototype.resume=function(){if(this.paused){var a=this.game.clock.time;this._pauseTotal+=a-this._now,this._now=a,this.adjustEvents(this._pauseStarted),this.paused=!1,this._codePaused=!1}},d.prototype._resume=function(){this._codePaused||this.resume()},d.prototype.removeAll=function(){this.removeAllListeners(),this.events.length=0,this._len=0,this._i=0},d.prototype.destroy=function(){this.removeAllListeners(),this.running=!1,this.events=[],this._len=0,this._i=0},Object.defineProperty(d.prototype,"next",{get:function(){return this.nextTick}}),Object.defineProperty(d.prototype,"duration",{get:function(){return this.running&&this.nextTick>this._now?this.nextTick-this._now:0}}),Object.defineProperty(d.prototype,"length",{get:function(){return this.events.length}}),Object.defineProperty(d.prototype,"ms",{get:function(){return this.running?this._now-this._started-this._pauseTotal:0}}),Object.defineProperty(d.prototype,"seconds",{get:function(){return this.running?.001*this.ms:0}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2,67:67}],67:[function(a,b,c){function d(a,b,c,d,f,g,h,i){this.timer=a,this.delay=b,this.tick=c,this.repeatCount=d-1,this.loop=f,this.callback=g,this.callbackContext=h,this.args=i,this.pendingDelete=!1,e.call(this)}var e=a(2);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{2:2}],68:[function(a,b,c){(function(a){var c={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}},Sinusoidal:{In:function(b){return 0===b?0:1===b?1:1-a.Math.cos(b*a.Math.PI/2)},Out:function(b){return 0===b?0:1===b?1:a.Math.sin(b*a.Math.PI/2)},InOut:function(b){return 0===b?0:1===b?1:.5*(1-a.Math.cos(a.Math.PI*b))}}};c.Default=c.Linear.None,b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],69:[function(a,b,c){function d(a,b,c){this.game=b,this.target=a,this.manager=c,this.timeline=[],this.reverse=!1,this.timeScale=1,this.repeatCounter=0,this.pendingDelete=!1,this.isRunning=!1,this.current=0,this.properties={},this.chainedTween=null,this.isPaused=!1,this.frameBased=c.frameBased,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,this._pausedTime=0,this._codePaused=!1,this._hasStarted=!1,h.call(this)}var e=a(70),f=a(68),g=a(76),h=a(2);d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.to=function(a,b,c,d,g,h,i){return(void 0===b||0>=b)&&(b=1e3),(void 0===c||null===c)&&(c=f.Default),void 0===d&&(d=!1),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=!1),"string"==typeof c&&this.manager.easeMap[c]&&(c=this.manager.easeMap[c]),this.isRunning?(console.warn("Tween.to cannot be called after Tween.start"),this):(this.timeline.push(new e(this).to(a,b,c,g,h,i)),d&&this.start(),this)},d.prototype.from=function(a,b,c,d,g,h,i){return void 0===b&&(b=1e3),(void 0===c||null===c)&&(c=f.Default),void 0===d&&(d=!1),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=!1),"string"==typeof c&&this.manager.easeMap[c]&&(c=this.manager.easeMap[c]),this.isRunning?(console.warn("Tween.from cannot be called after Tween.start"),this):(this.timeline.push(new e(this).from(a,b,c,g,h,i)),d&&this.start(),this)},d.prototype.start=function(a){var b,c;if(void 0===a&&(a=0),null===this.game||null===this.target||0===this.timeline.length||this.isRunning)return this;for(b=0;b<this.timeline.length;b++)for(c in this.timeline[b].vEnd)this.properties[c]=this.target[c]||0,Array.isArray(this.properties[c])||(this.properties[c]*=1);for(b=0;b<this.timeline.length;b++)this.timeline[b].loadValues();return this.manager.add(this),this.isRunning=!0,(0>a||a>this.timeline.length-1)&&(a=0),this.current=a,this.timeline[this.current].start(),this},d.prototype.stop=function(a){return void 0===a&&(a=!1),this.isRunning=!1,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,a&&(this.emit("complete",this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start()),this.manager.remove(this),this},d.prototype.updateTweenData=function(a,b,c){if(0===this.timeline.length)return this;if(void 0===c&&(c=0),-1===c)for(var d=0;d<this.timeline.length;d++)this.timeline[d][a]=b;else this.timeline[c][a]=b;return this},d.prototype.delay=function(a,b){return this.updateTweenData("delay",a,b)},d.prototype.repeat=function(a,b,c){return void 0===b&&(b=0),this.updateTweenData("repeatCounter",a,c),this.updateTweenData("repeatDelay",b,c)},d.prototype.repeatDelay=function(a,b){return this.updateTweenData("repeatDelay",a,b)},d.prototype.yoyo=function(a,b,c){return void 0===b&&(b=0),this.updateTweenData("yoyo",a,c),this.updateTweenData("yoyoDelay",b,c)},d.prototype.yoyoDelay=function(a,b){return this.updateTweenData("yoyoDelay",a,b)},d.prototype.easing=function(a,b){return"string"==typeof a&&this.manager.easeMap[a]&&(a=this.manager.easeMap[a]),this.updateTweenData("easingFunction",a,b)},d.prototype.interpolation=function(a,b,c){return void 0===b&&(b=g),this.updateTweenData("interpolationFunction",a,c),this.updateTweenData("interpolationContext",b,c)},d.prototype.repeatAll=function(a){return void 0===a&&(a=0),this.repeatCounter=a,this},d.prototype.chain=function(){for(var a=arguments.length;a--;)a>0?arguments[a-1].chainedTween=arguments[a]:this.chainedTween=arguments[a];return this},d.prototype.loop=function(a){return void 0===a&&(a=!0),a?this.repeatAll(-1):this.repeatCounter=0,this},d.prototype.onUpdateCallback=function(a,b){return this._onUpdateCallback=a,this._onUpdateCallbackContext=b,this},d.prototype.pause=function(){this.isPaused=!0,this._codePaused=!0,this._pausedTime=this.game.time.time},d.prototype._pause=function(){this._codePaused||(this.isPaused=!0,this._pausedTime=this.game.time.time)},d.prototype.resume=function(){if(this.isPaused){this.isPaused=!1,this._codePaused=!1;for(var a=0;a<this.timeline.length;a++)this.timeline[a].isRunning||(this.timeline[a].startTime+=this.game.time.time-this._pausedTime)}},d.prototype._resume=function(){this._codePaused||this.resume()},d.prototype.update=function(a){var b,c;return this.pendingDelete?!1:this.isPaused?!0:(b=this.timeline[this.current].update(a),b===e.PENDING?!0:b===e.RUNNING?(this._hasStarted||(this.emit("start",this),this._hasStarted=!0),null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._onUpdateCallbackContext,this,this.timeline[this.current].value,this.timeline[this.current]),this.isRunning):b===e.LOOPED?(this.emit("loop",this),!0):b===e.COMPLETE?(c=!1,this.reverse?(this.current--,this.current<0&&(this.current=this.timeline.length-1,c=!0)):(this.current++,this.current===this.timeline.length&&(this.current=0,c=!0)),c?-1===this.repeatCounter?(this.timeline[this.current].start(),this.emit("repeat",this),!0):this.repeatCounter>0?(this.repeatCounter--,this.timeline[this.current].start(),this.emit("repeat",this),!0):(this.isRunning=!1,this.emit("complete",this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start(),!1):(this.emit("childComplete",this),this.timeline[this.current].start(),!0)):void 0)},d.prototype.generateData=function(a,b){var c,d;if(null===this.game||null===this.target)return null;for(void 0===a&&(a=60),void 0===b&&(b=[]),c=0;c<this.timeline.length;c++)for(d in this.timeline[c].vEnd)this.properties[d]=this.target[d]||0,Array.isArray(this.properties[d])||(this.properties[d]*=1);for(c=0;c<this.timeline.length;c++)this.timeline[c].loadValues();for(c=0;c<this.timeline.length;c++)b=b.concat(this.timeline[c].generateData(a));return b},Object.defineProperty(d.prototype,"totalDuration",{get:function(){var a,b=0;for(a=0;a<this.timeline.length;a++)b+=this.timeline[a].duration;return b}}),d.prototype.constructor=d,b.exports=d},{2:2,68:68,70:70,76:76}],70:[function(a,b,c){function d(a){this.parent=a,this.game=a.game,this.vStart={},this.vStartCache={},this.vEnd={},this.vEndCache={},this.duration=1e3,this.percent=0,this.value=0,this.repeatCounter=0,this.repeatDelay=0,this.interpolate=!1,this.yoyo=!1,this.yoyoDelay=0,this.inReverse=!1,this.delay=0,this.dt=0,this.startTime=null,this.easingFunction=e.Default,this.interpolationFunction=f.linearInterpolation,this.interpolationContext=f,this.isRunning=!1,this.isFrom=!1}var e=a(68),f=a(76);d.PENDING=0,d.RUNNING=1,d.LOOPED=2,d.COMPLETE=3,d.prototype={to:function(a,b,c,d,e,f){return this.vEnd=a,this.duration=b,this.easingFunction=c,this.delay=d,this.repeatCounter=e,this.yoyo=f,this.isFrom=!1,this},from:function(a,b,c,d,e,f){return this.vEnd=a,this.duration=b,this.easingFunction=c,this.delay=d,this.repeatCounter=e,this.yoyo=f,this.isFrom=!0,this},start:function(){if(this.startTime=this.game.clock.time+this.delay,this.parent.reverse?this.dt=this.duration:this.dt=0,this.delay>0?this.isRunning=!1:this.isRunning=!0,this.isFrom)for(var a in this.vStartCache)this.vStart[a]=this.vEndCache[a],this.vEnd[a]=this.vStartCache[a],this.parent.target[a]=this.vStart[a];return this.value=0,this.yoyoCounter=0,this},loadValues:function(){for(var a in this.parent.properties){if(this.vStart[a]=this.parent.properties[a],Array.isArray(this.vEnd[a])){if(0===this.vEnd[a].length)continue;0===this.percent&&(this.vEnd[a]=[this.vStart[a]].concat(this.vEnd[a]))}void 0!==this.vEnd[a]?("string"==typeof this.vEnd[a]&&(this.vEnd[a]=this.vStart[a]+parseFloat(this.vEnd[a],10)),this.parent.properties[a]=this.vEnd[a]):this.vEnd[a]=this.vStart[a],this.vStartCache[a]=this.vStart[a],this.vEndCache[a]=this.vEnd[a]}return this},update:function(a){var b,c,e,g;if(this.isRunning){if(a<this.startTime)return d.RUNNING}else{if(!(a>=this.startTime))return d.PENDING;this.isRunning=!0}b=this.parent.frameBased?this.game.time.physicsElapsedMS:this.game.clock.elapsedMS,this.parent.reverse?(this.dt-=b*this.parent.timeScale,this.dt=f.max(this.dt,0)):(this.dt+=b*this.parent.timeScale,this.dt=f.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent);for(c in this.vEnd)e=this.vStart[c],g=this.vEnd[c],Array.isArray(g)?this.parent.target[c]=this.interpolationFunction.call(this.interpolationContext,g,this.value):this.parent.target[c]=e+(g-e)*this.value;return!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent?this.repeat():d.RUNNING},generateData:function(a){var b,c,d,e,g,h,i,j;this.parent.reverse?this.dt=this.duration:this.dt=0,b=[],c=!1,d=1/a*1e3;do{this.parent.reverse?(this.dt-=d,this.dt=f.max(this.dt,0)):(this.dt+=d,this.dt=f.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent),e={};for(g in this.vEnd)h=this.vStart[g],i=this.vEnd[g],Array.isArray(i)?e[g]=this.interpolationFunction(i,this.value):e[g]=h+(i-h)*this.value;b.push(e),(!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent)&&(c=!0)}while(!c);return this.yoyo&&(j=b.slice(),j.reverse(),b=b.concat(j)),b},repeat:function(){var a;if(this.yoyo){if(this.inReverse&&0===this.repeatCounter)return d.COMPLETE;this.inReverse=!this.inReverse}else if(0===this.repeatCounter)return d.COMPLETE;if(this.inReverse)for(a in this.vStartCache)this.vStart[a]=this.vEndCache[a],this.vEnd[a]=this.vStartCache[a];else{for(a in this.vStartCache)this.vStart[a]=this.vStartCache[a],this.vEnd[a]=this.vEndCache[a];this.repeatCounter>0&&this.repeatCounter--}return this.startTime=this.game.clock.time,this.yoyo&&this.inReverse?this.startTime+=this.yoyoDelay:this.inReverse||(this.startTime+=this.repeatDelay),this.parent.reverse?this.dt=this.duration:this.dt=0,d.LOOPED}},d.prototype.constructor=d,b.exports=d},{68:68,76:76}],71:[function(a,b,c){function d(a){this.game=a,this.frameBased=!1,this._tweens=[],this._add=[],this.easeMap={Linear:f.Linear.None,Quad:f.Quadratic.Out,"Quad.easeIn":f.Quadratic.In,"Quad.easeOut":f.Quadratic.Out,"Quad.easeInOut":f.Quadratic.InOut}}var e=a(9),f=a(68),g=a(69);d.prototype={getAll:function(){return this._tweens},removeAll:function(){for(var a=0;a<this._tweens.length;a++)this._tweens[a].pendingDelete=!0;this._add=[]},removeFrom:function(a,b){var c,d;if(void 0===b&&(b=!0),Array.isArray(a))for(c=0,d=a.length;d>c;c++)this.removeFrom(a[c]);else if(a.type===e.GROUP&&b)for(c=0,d=a.children.length;d>c;c++)this.removeFrom(a.children[c]);else{for(c=0,d=this._tweens.length;d>c;c++)a===this._tweens[c].target&&this.remove(this._tweens[c]);for(c=0,d=this._add.length;d>c;c++)a===this._add[c].target&&this.remove(this._add[c])}},add:function(a){a._manager=this,this._add.push(a)},create:function(a){return new g(a,this.game,this)},remove:function(a){var b=this._tweens.indexOf(a);-1!==b?this._tweens[b].pendingDelete=!0:(b=this._add.indexOf(a),-1!==b&&(this._add[b].pendingDelete=!0))},update:function(){var a,b=this._add.length,c=this._tweens.length;if(0===c&&0===b)return!1;for(a=0;c>a;)this._tweens[a].update(this.game.clock.time)?a++:(this._tweens.splice(a,1),c--);return b>0&&(this._tweens=this._tweens.concat(this._add),this._add.length=0),!0},isTweening:function(a){return this._tweens.some(function(b){return b.target===a})},_pauseAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a]._pause()},_resumeAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a]._resume()},pauseAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a].pause()},resumeAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a].resume(!0)}},d.prototype.constructor=d,b.exports=d},{68:68,69:69,9:9}],72:[function(a,b,c){function d(a){this.position=0,this.list=a||[]}d.prototype={add:function(a){return this.exists(a)||this.list.push(a),a},getIndex:function(a){
return this.list.indexOf(a)},getByKey:function(a,b){for(var c=this.list.length;c--;)if(this.list[c][a]===b)return this.list[c];return null},exists:function(a){return this.list.indexOf(a)>-1},reset:function(){this.list.length=0},remove:function(a){var b=this.list.indexOf(a);return b>-1?(this.list.splice(b,1),a):void 0},setAll:function(a,b){for(var c=this.list.length;c--;)this.list[c]&&(this.list[c][a]=b)},callAll:function(a){for(var b=Array.prototype.slice.call(arguments,1),c=this.list.length;c--;)this.list[c]&&this.list[c][a]&&this.list[c][a].apply(this.list[c],b)},removeAll:function(a){var b,c;for(void 0===a&&(a=!1),b=this.list.length;b--;)this.list[b]&&(c=this.remove(this.list[b]),a&&c.destroy());this.position=0,this.list=[]}},Object.defineProperty(d.prototype,"total",{get:function(){return this.list.length}}),Object.defineProperty(d.prototype,"first",{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}}),Object.defineProperty(d.prototype,"next",{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}}),d.prototype.constructor=d,b.exports=d},{}],73:[function(a,b,c){(function(c){var d=a(76),e={getRandomItem:function(a,b,e){if(null==a)return null;void 0===b&&(b=0),void 0===e&&(e=a.length);var f=b+c.Math.floor(d.random()*e);return void 0===a[f]?null:a[f]},removeRandomItem:function(a,b,e){var f,g;return null==a?null:(void 0===b&&(b=0),void 0===e&&(e=a.length),f=b+c.Math.floor(d.random()*e),f<a.length?(g=a.splice(f,1),void 0===g[0]?null:g[0]):null)},shuffle:function(a){var b,e,f;for(b=a.length-1;b>0;b--)e=c.Math.floor(d.random()*(b+1)),f=a[b],a[b]=a[e],a[e]=f;return a},transposeMatrix:function(a){var b,c,d=a.length,e=a[0].length,f=Array(e);for(b=0;e>b;b++)for(f[b]=Array(d),c=d-1;c>-1;c--)f[b][c]=a[c][b];return f},rotateMatrix:function(a,b){if("string"!=typeof b&&(b=(b%360+360)%360),90===b||-270===b||"rotateLeft"===b)a=e.transposeMatrix(a),a=a.reverse();else if(-90===b||270===b||"rotateRight"===b)a=a.reverse(),a=e.transposeMatrix(a);else if(180===d.abs(b)||"rotate180"===b){for(var c=0;c<a.length;c++)a[c].reverse();a=a.reverse()}return a},findClosest:function(a,b){var c,d,e;if(!b.length)return NaN;if(1===b.length||a<b[0])return b[0];for(c=1;b[c]<a;)c++;return d=b[c-1],e=c<b.length?b[c]:Number.POSITIVE_INFINITY,a-d>=e-a?e:d},rotate:function(a){var b=a.shift();return a.push(b),b},numberArray:function(a,b){var c,d=[];for(c=a;b>=c;c++)d.push(c);return d},numberArrayStep:function(a,b,e){var f,g,h;for((void 0===a||null===a)&&(a=0),(void 0===b||null===b)&&(b=a,a=0),void 0===e&&(e=1),f=[],g=c.Math.max(d.roundAwayFromZero((b-a)/(e||1)),0),h=0;g>h;h++)f.push(a),a+=e;return f}};b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{76:76}],74:[function(a,b,c){var d={isPlainObject:function(a){if("object"!=typeof a||a.nodeType||a===a.window)return!1;try{if(a.constructor&&!{}.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},extend:function(){var a,b,c,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(b in a)c=h[b],e=a[b],h!==e&&(k&&e&&(d.isPlainObject(e)||(f=Array.isArray(e)))?(f?(f=!1,g=c&&Array.isArray(c)?c:[]):g=c&&d.isPlainObject(c)?c:{},h[b]=d.extend(k,g,e)):void 0!==e&&(h[b]=e));return h},mixinPrototype:function(a,b,c){var d,e,f,g;for(void 0===c&&(c=!1),d=Object.keys(b),e=0;e<d.length;e++)f=d[e],g=b[f],!c&&f in a||(!g||"function"!=typeof g.get&&"function"!=typeof g.set?a[f]=g:"function"==typeof g.clone?a[f]=g.clone():Object.defineProperty(a,f,g))},mixin:function(a,b){var c,e,f;if(!a||"object"!=typeof a)return b;if(Array.isArray(a))return a;for(c in a)e=a[c],e&&(e.childNodes||e.cloneNode)||(f=typeof a[c],a[c]&&"object"===f?typeof b[c]===f?b[c]=d.mixin(a[c],b[c]):b[c]=d.mixin(a[c],new e.constructor):b[c]=a[c]);return b}};b.exports=d},{}],75:[function(a,b,c){var d={getColor:function(a,b,c){return a<<16|b<<8|c},getRGB:function(a){return a>16777215?{alpha:a>>>24,red:a>>16&255,green:a>>8&255,blue:255&a,a:a>>>24,r:a>>16&255,g:a>>8&255,b:255&a}:{alpha:255,red:a>>16&255,green:a>>8&255,blue:255&a,a:255,r:a>>16&255,g:a>>8&255,b:255&a}},interpolateColor:function(a,b,c,e){var f=d.getRGB(a),g=d.getRGB(b),h=(g.red-f.red)*e/c+f.red,i=(g.green-f.green)*e/c+f.green,j=(g.blue-f.blue)*e/c+f.blue;return d.getColor(h,i,j)},interpolateColorWithRGB:function(a,b,c,e,f,g){var h=d.getRGB(a),i=(b-h.red)*g/f+h.red,j=(c-h.green)*g/f+h.green,k=(e-h.blue)*g/f+h.blue;return d.getColor(i,j,k)},interpolateRGB:function(a,b,c,e,f,g,h,i){var j=(e-a)*i/h+a,k=(f-b)*i/h+b,l=(g-c)*i/h+c;return d.getColor(j,k,l)}};b.exports=d},{}],76:[function(a,b,c){(function(a){var c=a.Math.PI/180,d=180/a.Math.PI;b.exports={PI2:2*a.Math.PI,degToRad:function(a){return a*c},radToDeg:function(a){return a*d},fuzzyEqual:function(b,c,d){return void 0===d&&(d=1e-4),a.Math.abs(b-c)<d},fuzzyLessThan:function(a,b,c){return void 0===c&&(c=1e-4),b+c>a},fuzzyGreaterThan:function(a,b,c){return void 0===c&&(c=1e-4),a>b-c},fuzzyCeil:function(b,c){return void 0===c&&(c=1e-4),a.Math.ceil(b-c)},fuzzyFloor:function(b,c){return void 0===c&&(c=1e-4),a.Math.floor(b+c)},average:function(){var a,b=0,c=arguments.length;for(a=0;c>a;a++)b+=+arguments[a];return b/c},shear:function(a){return a%1},snapTo:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.round(b/c),d+b)},snapToFloor:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.floor(b/c),d+b)},snapToCeil:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.ceil(b/c),d+b)},roundTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,c);return a.Math.round(b*e)/e},floorTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,c);return a.Math.floor(b*e)/e},ceilTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,c);return a.Math.ceil(b*e)/e},angleBetween:function(b,c,d,e){return a.Math.atan2(e-c,d-b)},angleBetweenY:function(b,c,d,e){return a.Math.atan2(d-b,e-c)},angleBetweenPoints:function(b,c){return a.Math.atan2(c.y-b.y,c.x-b.x)},angleBetweenPointsY:function(b,c){return a.Math.atan2(c.x-b.x,c.y-b.y)},reverseAngle:function(b){return this.normalizeAngle(b+a.Math.PI,!0)},normalizeAngle:function(b){return b%=2*a.Math.PI,b>=0?b:b+2*a.Math.PI},maxAdd:function(b,c,d){return a.Math.min(b+c,d)},minSub:function(b,c,d){return a.Math.max(b-c,d)},wrap:function(a,b,c){var d,e=c-b;return 0>=e?0:(d=(a-b)%e,0>d&&(d+=e),d+b)},wrapValue:function(b,c,d){var e;return b=a.Math.abs(b),c=a.Math.abs(c),d=a.Math.abs(d),e=(b+c)%d},isOdd:function(a){return!!(1&a)},isEven:function(a){return!(1&a)},min:function(){var a,b,c,d;for(a=1===arguments.length&&"object"==typeof arguments[0]?arguments[0]:arguments,b=1,c=0,d=a.length;d>b;b++)a[b]<a[c]&&(c=b);return a[c]},max:function(){var a,b,c,d;for(a=1===arguments.length&&"object"==typeof arguments[0]?arguments[0]:arguments,b=1,c=0,d=a.length;d>b;b++)a[b]>a[c]&&(c=b);return a[c]},minProperty:function(a){var b,c,d,e;for(b=2===arguments.length&&"object"==typeof arguments[1]?arguments[1]:arguments.slice(1),c=1,d=0,e=b.length;e>c;c++)b[c][a]<b[d][a]&&(d=c);return b[d][a]},maxProperty:function(a){var b,c,d,e;for(b=2===arguments.length&&"object"==typeof arguments[1]?arguments[1]:arguments.slice(1),c=1,d=0,e=b.length;e>c;c++)b[c][a]>b[d][a]&&(d=c);return b[d][a]},wrapAngle:function(b,c){return c?this.wrap(b,-a.Math.PI,a.Math.PI):this.wrap(b,-180,180)},linearInterpolation:function(b,c){var d=b.length-1,e=d*c,f=a.Math.floor(e);return 0>c?this.linear(b[0],b[1],e):c>1?this.linear(b[d],b[d-1],d-e):this.linear(b[f],b[f+1>d?d:f+1],e-f)},bezierInterpolation:function(b,c){var d,e=0,f=b.length-1;for(d=0;f>=d;d++)e+=a.Math.pow(1-c,f-d)*a.Math.pow(c,d)*b[d]*this.bernstein(f,d);return e},catmullRomInterpolation:function(b,c){var d=b.length-1,e=d*c,f=a.Math.floor(e);return b[0]===b[d]?(0>c&&(f=a.Math.floor(e=d*(1+c))),this.catmullRom(b[(f-1+d)%d],b[f],b[(f+1)%d],b[(f+2)%d],e-f)):0>c?b[0]-(this.catmullRom(b[0],b[0],b[1],b[1],-e)-b[0]):c>1?b[d]-(this.catmullRom(b[d],b[d],b[d-1],b[d-1],e-d)-b[d]):this.catmullRom(b[f?f-1:0],b[f],b[f+1>d?d:f+1],b[f+2>d?d:f+2],e-f)},linear:function(a,b,c){return(b-a)*c+a},bernstein:function(a,b){return this.factorial(a)/this.factorial(b)/this.factorial(a-b)},factorial:function(a){if(0===a)return 1;for(var b=a;--a;)b*=a;return b},catmullRom:function(a,b,c,d,e){var f=.5*(c-a),g=.5*(d-b),h=e*e,i=e*h;return(2*b-2*c+f+g)*i+(-3*b+3*c-2*f-g)*h+f*e+b},difference:function(b,c){return a.Math.abs(b-c)},roundAwayFromZero:function(b){return b>0?a.Math.ceil(b):a.Math.floor(b)},sinCosGenerator:function(b,c,d,e){var f,g,h,i,j,k;for(void 0===c&&(c=1),void 0===d&&(d=1),void 0===e&&(e=1),f=c,g=d,h=e*a.Math.PI/b,i=[],j=[],k=0;b>k;k++)g-=f*h,f+=g*h,i[k]=g,j[k]=f;return{sin:j,cos:i,length:b}},distance:function(b,c,d,e){var f=b-d,g=c-e;return a.Math.sqrt(f*f+g*g)},distanceSq:function(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f},distancePow:function(b,c,d,e,f){return void 0===f&&(f=2),a.Math.sqrt(a.Math.pow(d-b,f)+a.Math.pow(e-c,f))},clamp:function(a,b,c){return b>a?b:a>c?c:a},clampBottom:function(a,b){return b>a?b:a},within:function(b,c,d){return a.Math.abs(b-c)<=d},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(b,c,d){return b=a.Math.max(0,a.Math.min(1,(b-c)/(d-c))),b*b*(3-2*b)},smootherstep:function(b,c,d){return b=a.Math.max(0,a.Math.min(1,(b-c)/(d-c))),b*b*b*(b*(6*b-15)+10)},sign:function(a){return 0>a?-1:a>0?1:0},percent:function(a,b,c){return void 0===c&&(c=0),a>b||c>b?1:c>a||c>a?0:(a-c)/b}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],77:[function(a,b,c){(function(a){function c(a){void 0===a&&(a=[]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.sow(a)}c.prototype={rnd:function(){var a=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|a,this.s0=this.s1,this.s1=this.s2,this.s2=a-this.c,this.s2},sow:function(a){var b,c;if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,a)for(c=0;c<a.length&&null!=a[c];c++)b=a[c],this.s0-=this.hash(b),this.s0+=~~(this.s0<0),this.s1-=this.hash(b),this.s1+=~~(this.s1<0),this.s2-=this.hash(b),this.s2+=~~(this.s2<0)},hash:function(a){var b,c,d;for(d=4022871197,a=""+a,c=0;c<a.length;c++)d+=a.charCodeAt(c),b=.02519603282416938*d,d=b>>>0,b-=d,b*=d,d=b>>>0,b-=d,d+=4294967296*b;return 2.3283064365386963e-10*(d>>>0)},integer:function(){return 4294967296*this.rnd.apply(this)},frac:function(){return this.rnd.apply(this)+1.1102230246251565e-16*(2097152*this.rnd.apply(this)|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(b,c){return a.Math.floor(this.realInRange(0,c-b+1)+b)},between:function(a,b){return this.integerInRange(a,b)},realInRange:function(a,b){return this.frac()*(b-a)+a},normal:function(){return 1-2*this.frac()},uuid:function(){var a="",b="";for(b=a="";a++<36;b+=~a%5|3*a&4?(15^a?8^this.frac()*(20^a?16:4):4).toString(16):"-");return b},pick:function(a){return a[this.integerInRange(0,a.length-1)]},weightedPick:function(b){return b[~~(a.Math.pow(this.frac(),2)*(b.length-1)+.5)]},timestamp:function(a,b){return this.realInRange(a||9466848e5,b||1577862e6)},angle:function(){return this.integerInRange(-180,180)}},c.prototype.constructor=c,b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],engine:[function(a,b,c){var d=a(56),e=a(19),f=a(23),g=a(17),h=a(20),i=a(29),j=a(27),k=a(26),l=a(28),m=a(30),n=a(76),o=a(75),p=a(14),q=a(15),r=a(16),s=a(12),t=a(74),u=a(45),v=a(44),w=a(46),x=a(42),y=a(43),z=a(51),A=a(68),B=a(59),C=a(60),D=a(63),E=a(62),F=a(64),G=a(58);b.exports=Object.assign(a(9),{Device:d,Game:e,State:f,Batch:g,Group:h,Sprite:i,Particle:j,Graphics:k,RetroFont:l,Strip:m,Point:u,Line:v,Rectangle:w,Circle:x,Ellipse:y,Keyboard:p,Mouse:q,Pointer:r,InputHandler:s,Emitter:z,Easing:A,Tilemap:B,TilemapLayer:C,TilemapSprite:D,TilemapPathing:E,Tileset:F,Tile:G,Math:n,Class:t,Color:o})},{12:12,14:14,15:15,16:16,17:17,19:19,20:20,23:23,26:26,27:27,28:28,29:29,30:30,42:42,43:43,44:44,45:45,46:46,51:51,56:56,58:58,59:59,60:60,62:62,63:63,64:64,68:68,74:74,75:75,76:76,9:9}]},{},[]),require=function a(b,c,d){function e(f,h){var i,j,k;if(!c[f]){if(!b[f]){if(i="function"==typeof require&&require,!h&&i)return i(f,!0);if(g)return g(f,!0);throw j=Error("Cannot find module '"+f+"'"),j.code="MODULE_NOT_FOUND",j}k=c[f]={exports:{}},b[f][0].call(k.exports,function(a){var c=b[f][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[f].exports}var f,g="function"==typeof require&&require;for(f=0;f<d.length;f++)e(d[f]);return e}({1:[function(a,b,c){"use strict";function d(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function e(){}var f="function"!=typeof Object.create?"~":!1;e.prototype._events=void 0,e.prototype.listeners=function(a,b){var c,d,e,g=f?f+a:a,h=this._events&&this._events[g];if(b)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(c=0,d=h.length,e=Array(d);d>c;c++)e[c]=h[c].fn;return e},e.prototype.emit=function(a,b,c,d,e,g){var h,i,j,k,l,m,n=f?f+a:a;if(!this._events||!this._events[n])return!1;if(h=this._events[n],i=arguments.length,"function"==typeof h.fn){switch(h.once&&this.removeListener(a,h.fn,void 0,!0),i){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,b),!0;case 3:return h.fn.call(h.context,b,c),!0;case 4:return h.fn.call(h.context,b,c,d),!0;case 5:return h.fn.call(h.context,b,c,d,e),!0;case 6:return h.fn.call(h.context,b,c,d,e,g),!0}for(k=1,j=Array(i-1);i>k;k++)j[k-1]=arguments[k];h.fn.apply(h.context,j)}else for(l=h.length,k=0;l>k;k++)switch(h[k].once&&this.removeListener(a,h[k].fn,void 0,!0),i){case 1:h[k].fn.call(h[k].context);break;case 2:h[k].fn.call(h[k].context,b);break;case 3:h[k].fn.call(h[k].context,b,c);break;default:if(!j)for(m=1,j=Array(i-1);i>m;m++)j[m-1]=arguments[m];h[k].fn.apply(h[k].context,j)}return!0},e.prototype.on=function(a,b,c){var e=new d(b,c||this),g=f?f+a:a;return this._events||(this._events=f?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],e]:this._events[g].push(e):this._events[g]=e,this},e.prototype.once=function(a,b,c){var e=new d(b,c||this,!0),g=f?f+a:a;return this._events||(this._events=f?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],e]:this._events[g].push(e):this._events[g]=e,this},e.prototype.removeListener=function(a,b,c,d){var e,g,h,i,j=f?f+a:a;if(!this._events||!this._events[j])return this;if(e=this._events[j],g=[],b)if(e.fn)(e.fn!==b||d&&!e.once||c&&e.context!==c)&&g.push(e);else for(h=0,i=e.length;i>h;h++)(e[h].fn!==b||d&&!e[h].once||c&&e[h].context!==c)&&g.push(e[h]);return g.length?this._events[j]=1===g.length?g[0]:g:delete this._events[j],this},e.prototype.removeAllListeners=function(a){return this._events?(a?delete this._events[f?f+a:a]:this._events=f?{}:Object.create(null),this):this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prototype.setMaxListeners=function(){return this},e.prefixed=f,void 0!==b&&(b.exports=e)},{}],2:[function(a,b,c){function d(a,b,c){var d,g=a.cache.getImage("space",!0).base;g.mipmap=!0,d=this.tex=new f.Texture(g),f.Sprite.call(this,d),this.game=a,this.filter=new e(a),this.filter.setResolution(b,c),this.filter.setTexture(d),this.filters=[this.filter],this.cache()}var e=a(4),f=a("pixi");d.prototype=Object.create(f.Sprite.prototype),d.prototype.constructor=d,d.prototype.update=function(){},d.prototype.resize=function(a,b){this.filter.setResolution(a,b),this.cached&&this.cache()},d.prototype.cache=function(){this.uncache(),this.backgroundTexture&&this.backgroundTexture.destroy(),this.backgroundTexture=new f.RenderTexture(this.game.renderer,this.game.width,this.game.height),this.backgroundTexture.render(this),this.texture=this.backgroundTexture,this.filters=void 0,this.cached=!0},d.prototype.uncache=function(){this.cached=!1,this.texture=this.tex,this.filters=[this.filter]},d.prototype.destroy=function(){f.Sprite.prototype.destroy.call(this),this.game=this.filter=this.filters=this.tex=this.backgroundTexture=void 0},b.exports=d},{4:4,pixi:"pixi"}],3:[function(a,b,c){function d(a,b){var c=new e.Texture(this.getMipmapTexture(b)),d=new e.Texture(this.getMipmapTexture("clouds"));e.Sprite.call(this,c),this.game=a,this.pivot.set(512,512),this.planetShader=new f(a),this.planetShader.setTexture(c,d),this.glowSprite=new e.Sprite(c),this.glowSprite.shader=new g(a),this.glowTexture=new e.RenderTexture(a.renderer,c.width,c.height),this.glowTexture.render(this.glowSprite),this.glowSprite.texture=this.glowTexture,this.glowSprite.shader=void 0,this.addChild(this.glowSprite),this.shader=this.planetShader,this.game.on("fpsProblem",this.cache,this)}var e=a("pixi"),f=a(6),g=a(5);d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.update=function(){this.shader&&this.shader.update()},d.prototype.getMipmapTexture=function(a){var b=game.cache.getImage(a,!0).base;return b.mipmap=!0,b},d.prototype.cache=function(){this.planetTexture&&this.planetTexture.destroy(),this.planetTexture=new e.RenderTexture(this.game.renderer,this.width,this.height),this.planetTexture.render(this),this.texture=this.planetTexture,this.shader=void 0,this.removeChild(this.glowSprite)},d.prototype.uncache=function(){},d.prototype.destroy=function(){},b.exports=d},{5:5,6:6,pixi:"pixi"}],4:[function(a,b,c){function d(a,b,c){this.game=a,this.uniforms={channel0:{type:"sampler2D",value:0,textureData:{wrapS:33071,wrapT:33071}},resolution:{type:"v2",value:{x:b,y:c}},transform:{type:"v2",value:{x:0,y:0}},time:{type:"f",value:0},scale:{type:"f",value:1}},e.AbstractFilter.call(this,"\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n  vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",'\nprecision lowp float;\n\nuniform sampler2D channel0;\n\nuniform float scale;\nuniform float time;\nuniform vec2 resolution;\nuniform vec2 transform;\n\n// varying vec2 vTextureCoord;\n// varying vec4 vColor;\n// uniform sampler2D uSampler;\n// void main(void) {\n//   vec4 color = vec4(0.25, 0.5, 0.75, 1.);\n//   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor + color;\n// };\n\n// "const vec3 c1 = vec3(0.0, 0.0, 0.1);",\n// "const vec3 c2 = vec3(0.45, 0.35, 0.4);",\n// "const vec3 c3 = vec3(0.2, 0.0, 0.0);",\n// "const vec3 c4 = vec3(0.2, 0.2, 0.2);",\n// "const vec3 c5 = vec3(0.1);",\n// "const vec3 c6 = vec3(0.9);",\n\n// nebula settings\n// const int niterations = 6;\n// const vec3 c1 = vec3(0.0, 0.0, 0.2);\n// const vec3 c2 = vec3(0.2, 0.2, 0.3);\n// const vec3 c3 = vec3(0.3, 0.0, 0.0);\n// const vec3 c4 = vec3(0.0, 0.2, 0.22);\n// const vec3 c5 = vec3(0.22);\n// const vec3 c6 = vec3(0.44);\n//.. blue ^\n\n// const int niterations = 6;\n// const vec3 c1 = vec3(0.0, 0.0, 0.2);\n// const vec3 c2 = vec3(0.2, 0.1, 0.1);\n// const vec3 c3 = vec3(0.2, 0.0, 0.1);\n// const vec3 c4 = vec3(0.24, 0.1, 0.1);\n// const vec3 c5 = vec3(0.00);\n// const vec3 c6 = vec3(0.32);\n//.. red ^\n\nconst int niterations = 6;\nconst vec3 c1 = vec3(0.0, 0.2, 0.2);\nconst vec3 c2 = vec3(0.0, 0.3, 0.3);\nconst vec3 c3 = vec3(0.0, 0.2, 0.0);\nconst vec3 c4 = vec3(0.0, 0.2, 0.22);\nconst vec3 c5 = vec3(0.22);\nconst vec3 c6 = vec3(0.52);\n//.. blue green ^\n\nfloat rand(vec2 n) {\n  return fract(sin(dot(n.xy, vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat noise(vec2 n) {\n  const vec2 d = vec2(0.0, 1.0);\n  vec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n  return mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n}\n\nfloat fbm(vec2 n) {\n  float total = 0.0, amplitude = 1.0;\n  for(int i = 0; i < niterations; i++) {\n    total += noise(n) * amplitude;\n    n += n;\n    amplitude *= 0.5;\n  }\n  return total;\n}\n\n// const int iterations = 4;\n// const float formuparam = 0.801;\n\n// const int volsteps = 3;\n// const float stepsize = 0.1;\n\n// const float brightness = 0.04;\n// const float distfading = 1.0; //0.2;\n// const float saturation = 0.8;\n\n// vec3 starnest(vec2 position) {\n//   float s = 0.1, fade = 1.0;\n\n//   vec3 dir = vec3(position, 1.);\n//   vec3 from = vec3(1.0, 1.0, 1.0);\n//        from += vec3(-transform * 0.00003, -2.0);\n\n//   vec3 v = vec3(0.0);\n//   for(int r=0; r<volsteps; r++) {\n//     vec3 p = from + s * dir;\n\n//     float pa, a = pa = 0.0;\n//     float n = noise(p.xy);\n    \n//     for(int i=0; i<iterations; i++) {\n//       p = abs(p)/dot(p,p)-formuparam; // the magic formula\n//       a += abs(length(p)-pa); // absolute sum of average change\n//       pa = length(p);\n//     }\n        \n//     a *= a*a; // add contrast\n//     //v += fade;\n//     v += vec3(s, s/2., s/3.) * a * (brightness * pow(n, 3.)); // * fade; // coloring based on distance\n//     //fade *= distfading; // distance fading\n//     s += stepsize;\n//   }\n  \n//   return mix(vec3(length(v)), v, saturation);\n// }\n\nvec3 nebula(vec2 position) {\n  float ntime = time * 0.01;\n  float q = fbm(position - ntime);\n  vec2 r = vec2(fbm(position + q + ntime * 3.6 - position.x - position.y), fbm(position + q - ntime * 0.4));\n  return mix(c1, c2, fbm(position + r)) + mix(c3, c4, r.x) - mix(c5, c6, r.y);\n}\n\nvoid main(void) {\n  // zoom control\n  // float s = 1. / (scale * 10.) + 0.75;\n  vec2 pos = (-resolution.xy + 2. * (gl_FragCoord.xy)) / resolution.y;\n  vec2 position1 = (0.25 * 1.) * pos - (transform.xy / 48000.);  \n  vec2 position2 = (1.0 * 1.) * pos - (transform.xy / 6000.);\n\n  vec3 color = vec3(0.0, 0.0, 0.0);\n\n  // create starfield\n  // color += vec3(starfield(position1)) * 2.0;\n  color += texture2D(channel0, position1).rgb;\n\n  // starnest\n  // color += starnest(position2) * 0.005;\n  \n  // create nebula\n  color += nebula(position2) * 2.;\n\n  // output\n  gl_FragColor = vec4(color, 1.);\n}\n',this.uniforms)}var e=a("pixi"),f=a("engine");d.prototype=Object.create(e.AbstractFilter.prototype),d.prototype.constructor=d,d.prototype.setResolution=function(a,b){this.uniforms.resolution.value.x=a,this.uniforms.resolution.value.y=b},d.prototype.setTexture=function(a){this.uniforms.channel0.value=a},d.prototype.applyFilter=function(a,b,c){var d=this.getShader(a),e=a.filterManager,g=this.game.camera.view;this.uniforms.time.value=this.game.clock.totalElapsedSeconds(),this.uniforms.transform.value.x=f.Math.roundTo(-g.x,4),this.uniforms.transform.value.y=f.Math.roundTo(g.y,4),this.uniforms.scale.value=f.Math.roundTo(this.game.world.scale.x,4),e.applyFilter(d,b,c)},b.exports=d},{engine:"engine",pixi:"pixi"}],5:[function(a,b,c){function d(a){var b,c,d;this.game=a,b={projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}},c="\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n  vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",d="precision lowp float;\n\nvarying vec2 vTextureCoord;\n\n// rendering params\nconst float sphsize = 0.8; // planet size\nconst float dist = 0.08; // distance for glow and distortion\nconst float glow = 3.2; // glow amount, mainly on hit side\n\nconst float start = 120.0;\nconst float steps = 292.0; // number of steps for the volumetric rendering\nconst float stepsize = 0.01;\n\nfloat wind(vec3 p) {\n  float d = max(0.0, dist - max(0.0, length(p) - sphsize) / sphsize) / dist; // for distortion and glow area\n  float x = max(1.0, p.x * 2.0); // to increase glow on left side\n  return length(p) * (d * glow * x)+ d * glow * x; // return the result with glow applied\n}\n\nvoid main() {\n  vec2 uv = vTextureCoord - vec2(0.5, 0.5);\n  vec3 dir = vec3(uv, 1.0);\n  vec3 from = vec3(0., 0., -2.);\n  vec3 col = vec3(0.0, 0.0, 0.0);\n  \n  float v = 0.0;\n  for(float r=start; r<steps; r++) {\n    vec3 p = from + r * dir * stepsize;\n    if(length(p)-sphsize > 0.0) {\n      v += wind(p);\n    } else {\n      v += min(1.0, wind(p));\n    }\n  }\n\n  // average values and\n  // apply bright factor\n  v /= steps;\n  v *= pow(v, 1.8);\n\n  // green - vec3(v/4.2, v/1.8, v/3.2);\n  // red - vec3(v/1.2, v/3.6, v/3.6);\n  // blue - vec3(v/4., v/3., v/0.8);\n  col += vec3(v/3.0, v/1.8, v/1.0);\n\n  gl_FragColor = vec4(col, 0.); \n}\n",e.Shader.call(this,a.renderer.shaderManager,c,d,b,{aVertexPosition:0,aTextureCoord:0,aColor:0})}var e=a("pixi");d.prototype=Object.create(e.Shader.prototype),d.prototype.constructor=d,b.exports=d},{pixi:"pixi"}],6:[function(a,b,c){function d(a){var b,c,d;this.game=a,b={time:{type:"f",value:0},channel0:{type:"sampler2D",value:0},channel1:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}},c="\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n  vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",d="precision lowp float;\n\nuniform sampler2D channel0;\nuniform sampler2D channel1;\n\nuniform float time;\nvarying vec2 vTextureCoord;\n\nvoid main() {\n  vec2 uv = vTextureCoord - vec2(0.5, 0.5);\n  vec3 ro = vec3(0.0, 0.0, 2.5);\n  vec3 rd = normalize(vec3(uv, -1.0));\n  vec3 col = vec3(0.0, 0.0, 0.0);\n  vec3 clouds = vec3(0.0, 0.0, 0.0);\n\n  // intersect sphere\n  float alpha = 0.0;\n  float b = dot(ro, rd);\n  float c = dot(ro, ro) - 1.0;\n  float h = b * b - c;\n\n  if(h > 0.0) {\n    float t = -b - sqrt(h);\n    vec3 pos = ro + t * rd;\n    vec3 nor = pos;\n\n    // texture mapping\n    vec2 uv;\n         uv.x = atan(nor.x, nor.z) / .7853 - 0.01 * time;\n         uv.y = acos(nor.y) / .7853;\n    \n    col = texture2D(channel0, uv).rgb;\n    col *= 0.06 + 1.0 * pow(max(0.5, dot(pos, normalize(vec3(2., 0.0, 4.)))), 8.);\n\n    uv.x -= 0.016 * time;\n\n    clouds += texture2D(channel1, uv).rgb;\n    clouds *= 0.05 + 0.2 * pow(max(0.0, dot(pos, normalize(vec3(2., 0.0, 4.)))), 2.);\n\n    col += vec3(pow(clouds.r, 2.0), clouds.b, clouds.g);\n\n    // alpha\n    alpha += 1.0;\n  }\n\n  // contrast\n  col = (col - 0.5) * 1.08 + 0.5;\n  \n  gl_FragColor = vec4(col, alpha); \n}\n",e.Shader.call(this,a.renderer.shaderManager,c,d,b,{aVertexPosition:0,aTextureCoord:0,aColor:0})}var e=a("pixi");d.prototype=Object.create(e.Shader.prototype),d.prototype.constructor=d,d.prototype.setTexture=function(a,b){this.uniforms.channel0.value=a,this.uniforms.channel1.value=b},d.prototype.update=function(){this.uniforms.time.value=this.game.clock.totalElapsedSeconds()},b.exports=d},{pixi:"pixi"}],7:[function(a,b,c){(function(c){function d(a){this.game=a,this.user={},this.socket=a.net.socket,this.socket.on("user",this._session.bind(this)),this.socket.on("connect",this._login.bind(this)),this.socket.on("disconnect",this._disconnected.bind(this)),this.game.on("gui/loggedin",this._login,this),this.game.on("gui/logout",this._logout,this),a.net.connected&&this._login(),e.call(this)}var e=(a("engine"),a(1));d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.isUser=function(){return this.user.uid?!0:!1},d.prototype.isGuest=function(){return 0===this.user.uid?!0:!1},d.prototype._session=function(a){if(void 0===a)throw Error("[Auth] An empty user object was detected");this.user=a.user,this.emit("user",this.user)},d.prototype._login=function(){this.socket.emit("user")},d.prototype._logout=function(){c.location.reload()},d.prototype._loggedin=function(a){this.session({user:a})},d.prototype._disconnected=function(){this.emit("disconnected")},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,engine:"engine"}],8:[function(a,b,c){(function(c){function d(a,b,c){void 0===c&&(c=0),this.game=a,this.parent=b,this.lastFrame=void 0,this.currentFrame=void 0,this.isFinished=!1,this.isPlaying=!1,this._paths=[],this._delay=c,this._duration=0,this._startTime=0,this._endTime=0,this._currentTime=0,this._frameIndex=0,e.call(this)}var e=a(1);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.play=function(a,b){void 0!==a&&(this._delay=a),this.isPlaying=!0,this.isFinished=!1,this._paths=b,this._frameIndex=0,this._duration=this._paths[this._frameIndex].duration,this._startTime=this.game.clock.time+this._delay,this._endTime=this.game.clock.time+this._duration+this._delay,this._currentTime=0,this.updateCurrentFrame(0),this.emit("start",this)},d.prototype.stop=function(a){void 0===a&&(a=!1),this.isPlaying=!1,this.isFinished=!0,a||this.emit("complete",this)},d.prototype.update=function(){var a,b=this.game.clock.time;this.isPlaying&&b>=this._startTime&&(this._currentTime=b-this._startTime,percent=c.Math.max(0,this._currentTime/this._duration),percent<1?this.updateCurrentFrame(percent):this._frameIndex<this._paths.length-1?(a=b-this._endTime,this._frameIndex++,this._duration=this._paths[this._frameIndex].duration,this._startTime=b-a,this._endTime=b+this._duration-a,this._currentTime=b-this._startTime,this.updateCurrentFrame(this._currentTime/this._duration)):this.complete())},d.prototype.updateCurrentFrame=function(a){var b,c,d,e,f=this.parent;b=this._paths[this._frameIndex],c=b.easing(a),d=b.start+(b.end-b.start)*c,e=b.interpolate(f.movement,d),this.lastFrame=this.currentFrame,this.currentFrame={x:e.x,y:e.y},f.interpolate(this.currentFrame,.05,f.position)},d.prototype.destroy=function(){this._paths&&(this.isPlaying=!1,this.game=this.parent=this._paths=this.lastFrame=this.currentFrame=void 0)},d.prototype.complete=function(){this._frameIndex=this._paths.length-1,this.isPlaying=!1,this.isFinished=!0,this.updateCurrentFrame(1),this.emit("complete",this)},Object.defineProperty(d.prototype,"frameIndex",{get:function(){return this._frameIndex}}),Object.defineProperty(d.prototype,"frameTotal",{get:function(){return this._paths.length}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],9:[function(a,b,c){function d(a,b){this.parent=a,this.game=a.game,this.config=b,this.easing=f.Easing.Default,this.start=new f.Point,this.end=new f.Point,this._start=new f.Point,this._end=new f.Point,this.glowSprite=new f.Sprite(this.game,"texture-atlas","laser-piercing.png"),this.glowSprite.scale.set(1.25,1.25),this.glowSprite.pivot.set(32,32),this.glowSprite.tint=16737894,this.glowSprite.blendMode=f.BlendMode.ADD,this.redTexture=new e.Texture(this.game.cache.getImage("laser-red",!0).base),this.blueTexture=new e.Texture(this.game.cache.getImage("laser-blue",!0).base),this.strip=new f.Strip(this.game,this.blueTexture,[this._start,this._end]),this.startTween=this.game.tweens.create(this._start),this.endTween=this.game.tweens.create(this._end)}var e=a("pixi"),f=a("engine");d.prototype.constructor=d,d.prototype.isRunning=function(){return this.endTween.isRunning||this.startTween.isRunning},d.prototype.fire=function(a,b,c){if(!this.isRunning()){var d,e=f.Line.pointAtDistance(this.start,this.end,14),g=this.start.distance(this.end)/4,h=this.parent;this._start.copyFrom(e),this._end.copyFrom(e),this.startTween=game.tweens.create(this._start),this.endTween=game.tweens.create(this._end),b&&b.piercing?(d=500,this.strip.texture=this.redTexture,this.glowSprite.position.copy(e),
this.glowTween&&this.glowTween.stop(),this.glowTween=game.tweens.create(this.glowSprite.position),this.glowTween.to({x:this.end.x,y:this.end.y},(g+d)/2,this.easing,!1),this.glowTween.repeat(1),this.glowTween.start(),this.glowTween.once("complete",function(){h.flashEmitter.at({center:this._end}),h.flashEmitter.explode(2),h.glowEmitter.color(16737894),h.glowEmitter.at({center:this._end}),h.glowEmitter.explode(1),h.explosionEmitter.at({center:this._end}),h.explosionEmitter.explode(1),h.fxGroup.removeChild(this.glowSprite)},this),h.fxGroup.addChild(this.glowSprite)):(d=250,this.strip.texture=this.blueTexture),this.startTween.to({x:this.end.x,y:this.end.y},g,this.easing,!1,d),this.endTween.to({x:this.end.x,y:this.end.y},g,this.easing,!1),this.startTween.start(),this.endTween.start(),this.startTween.once("complete",function(){h.fxGroup.removeChild(this.strip)},this),this.endTween.once("complete",function(){h.flashEmitter.at({center:this._end}),h.flashEmitter.explode(2),a||(h.glowEmitter.color(c?3368601:16737894),h.glowEmitter.at({center:this._end}),h.glowEmitter.explode(2),c||(h.explosionEmitter.at({center:this._end}),h.explosionEmitter.explode(3),h.ship.target&&h.ship.target.damage.inflict(h.target)))},this),h.fxGroup.addChild(this.strip)}},d.prototype.update=function(){var a,b=this.end;this.isRunning()&&(a=f.Line.pointAtDistance(this.start,b,14),this._start.copyFrom(a),this.startTween.updateTweenData("vStart",{x:a.x,y:a.y},0),this.startTween.updateTweenData("vEnd",{x:b.x,y:b.y},0),this._end.copyFrom(b),this.endTween.updateTweenData("vStart",{x:a.x,y:a.y},0),this.endTween.updateTweenData("vEnd",{x:b.x,y:b.y},0)),this.glowSprite.parent&&(a=f.Line.pointAtDistance(this.start,b,14),this.glowTween.updateTweenData("vStart",{x:a.x,y:a.y},0),this.glowTween.updateTweenData("vEnd",{x:b.x,y:b.y},0),this.glowSprite.rotation+=.5)},d.prototype.destroy=function(){this.startTween.stop(),this.endTween.stop(),this.startTween.removeAllListeners(),this.endTween.removeAllListeners(),this.strip&&this.strip.destroy(),this.redTexture.destroy(),this.blueTexture.destroy(),this.parent=this.game=this.config=this.easing=this.start=this.end=this._start=this._end=this.strip=this.redTexture=this.blueTexture=this.glowSprite=this.glowTween=this.startTween=this.endTween=void 0},b.exports=d},{engine:"engine",pixi:"pixi"}],10:[function(a,b,c){function d(a,b){}a("engine");d.prototype.constructor=d,d.prototype.fire=function(){},b.exports=d},{engine:"engine"}],11:[function(a,b,c){(function(c){function d(a,b){this.parent=a,this.game=a.game,this.ship=a.parent,this.config=b,this.circle=new e.Circle,this.target=new e.Point,this.position=new e.Point,this.apos=new e.Point,this._tempPoint=new e.Point,this.sprite=new e.Sprite(this.game,"texture-atlas",b.sprite+".png"),this.sprite.position.set(b.position.x,b.position.y),this.sprite.pivot.set(b.pivot.x,b.pivot.y),this.sprite.scale.set(b.scale.x,b.scale.y),this.manager=this.create(b.type)}var e=a("engine"),f=a(9),g=a(10);d.prototype.constructor=d,d.prototype.create=function(a){var b=this.config[a];switch(a){case"missile":return new g(this,b);case"laser":default:return new f(this,b)}},d.prototype.fire=function(a,b){var c=75*a+100,d=b?this.miss:this.discharge;this.timer=this.game.clock.events.add(c,d,this)},d.prototype.miss=function(){var a,b=this.ship,d=b.target,e=this.parent.enhancements;d&&(a=this.circle.setTo(d.position.x,d.position.y,d.width/2),this.target=a.circumferencePoint(c.Math.random()*c.Math.PI,!1,!0,this._tempPoint),this.manager.fire(!0,e))},d.prototype.discharge=function(){var a,b=this.ship,d=b.target,e=this.parent.enhancements;d&&(a=this.circle.setTo(d.position.x,d.position.y,c.Math.sqrt(d.getBounds().perimeter)),this.target=a.random(!0),this.manager.fire(!1,e,d.shields),d.isPlayer&&!d.shields&&this.game.camera.shake())},d.prototype.update=function(){var a,b=this.sprite,c=this.game,d=this.position,f=this.manager;d.copyFrom(c.world.worldTransform.applyInverse(b.worldTransform.apply(b.pivot))),b.rotation=e.Point.angle(d,a=this.absoluteTargetPosition())-this.ship.rotation,f.start.copyFrom(d),f.end.copyFrom(a),f.update()},d.prototype.absoluteTargetPosition=function(){return e.Point.add(this.ship.target.position,this.target,this.apos)},d.prototype.destroy=function(){this.timer&&this.game.clock.events.remove(this.timer),this.sprite&&this.sprite.destroy(),this.manager&&this.manager.destroy(),this.parent=this.game=this.ship=this.config=this.circle=this.target=this.position=this.apos=this.sprite=this.manager=this.timer=this._tempPoint=void 0},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{10:10,9:9,engine:"engine"}],12:[function(a,b,c){(function(c){function d(a){this.parent=a,this.game=a.game,this.config=a.config,this.throttle=a.throttle,this.valid=!0,this.anticlockwise=!1,this.destination=new e.Point,this.animation=new f(a.game,a),this._tempPoint=new e.Point,i.call(this)}var e=a("engine"),f=a(8),g=a(25),h=a(26),i=a(1);d.FRAMERATE=60,d.SPEED_CONSTANT=30,d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.prototype.reset=function(){this._linearSpeed=null,this._arcSpeed=null},d.prototype.update=function(){var a,b,d=this.parent,e=this.animation,f=this.lastFrame=d.position.clone(this._tempPoint);this.animation.update(),e.isPlaying&&f&&(a=f.y-d.position.y,b=f.x-d.position.x,0!==a&&0!==b?d.rotation=c.Math.atan2(a,b):d.rotation=0)},d.prototype.plot=function(a,b,c,d){var f=b?b:this.current,i=c?c:this.previous,a=a||this.destination,j=this._findTangentCircle(f,i,a);j?(this.valid=!0,this.oribital=j,this.currentPosition=f,this.previousPosition=i,this.destination.copyFrom(a),this.tangentPoint=this._findTangentPoint(this.destination,this.oribital),this.startAngle=this.oribital.circumferenceAngle(this.currentPosition),this.endAngle=this.oribital.circumferenceAngle(this.tangentPoint),this.arcLength=this._findArcLength(this.currentPosition,this.tangentPoint,this.oribital),this.linearLength=this.tangentPoint.distance(this.destination),this.animation.stop(!0),this.animation.play(d||0,[new g(this,0,1),new h(this,0,.5),new h(this,.5,1,e.Easing.Quadratic.Out)])):this.valid=!1},d.prototype.destroy=function(){this.animation.stop(),this.animation.destroy(),this.removeAllListeners(),this.parent=this.game=this.config=this.destination=this.animation=this.currentPosition=this.previousPosition=this.oribital=this.tangentPoint=void 0},d.prototype.drawDebug=function(){this.parent.isPlayer&&this.trajectoryGraphics&&(this.trajectoryGraphics.lineStyle(0),this.trajectoryGraphics.beginFill(65535,.5),this.trajectoryGraphics.drawCircle(this.destination.x,this.destination.y,10),this.trajectoryGraphics.endFill(),this.trajectoryGraphics.lineStyle(5,65535,.5),this.trajectoryGraphics.arc(this.oribital.x,this.oribital.y,this.oribital.radius,this.startAngle,this.endAngle,this.anticlockwise),this.trajectoryGraphics.moveTo(this.tangentPoint.x,this.tangentPoint.y),this.trajectoryGraphics.lineTo(this.destination.x,this.destination.y))},d.prototype._findTangentCircle=function(a,b,d){var f=this.config.oribit.radius,g=new e.Point,h=g.copyFrom(b).rotate(a.x,a.y,-c.Math.PI/2),i=e.Line.pointAtDistance(a,h,f),j=e.Line.pointAtDistance(a,h,-f),k=i.distance(d),l=j.distance(d),m=new e.Circle(i.x,i.y,f);return circle2=new e.Circle(j.x,j.y,f),k>l&&!circle2.contains(d.x,d.y)?(this.anticlockwise=!0,circle2):l>k&&!m.contains(d.x,d.y)?(this.anticlockwise=!1,m):!1},d.prototype._findTangentPoint=function(a,b){var d,f=new e.Point,g=b.x-a.x,h=b.y-a.y,i=c.Math.sqrt(g*g+h*h),j=c.Math.asin(b.radius/i),k=c.Math.atan2(h,g);return this.anticlockwise?(d=k-j,f.setTo(b.x+b.radius*c.Math.sin(d),b.y+b.radius*-c.Math.cos(d))):(d=k+j,f.setTo(b.x+b.radius*-c.Math.sin(d),b.y+b.radius*c.Math.cos(d))),f},d.prototype._findArcLength=function(a,b,d){var e=a.y-d.y,f=a.x-d.x,g=b.y-d.y,h=b.x-d.x,i=c.Math.atan2(e,f)-c.Math.atan2(g,h);return 0>i&&(i+=2*c.Math.PI),this.anticlockwise||(i=2*c.Math.PI-i),i*d.radius},d.prototype._generatePreviousPosition=function(){var a=this.parent.rotation,b=this.current;return new e.Point(b.x+1*c.Math.cos(a),b.y+1*c.Math.sin(a))},Object.defineProperty(d.prototype,"current",{get:function(){var a,b=this.animation.currentFrame;return b||(a=this.parent.position.clone(),b={x:a.x,y:a.y}),b}}),Object.defineProperty(d.prototype,"previous",{get:function(){var a,b=this.animation.lastFrame;return b||(a=this._generatePreviousPosition(),b={x:a.x,y:a.y}),b}}),Object.defineProperty(d.prototype,"throttle",{get:function(){return this._throttle},set:function(a){this._linearSpeed=null,this._arcSpeed=null,this._throttle=a,this._linearSpeed=this.linearSpeed,this._arcSpeed=this.arcSpeed}}),Object.defineProperty(d.prototype,"linearSpeed",{get:function(){return this._linearSpeed||this._throttle*(d.SPEED_CONSTANT/this.parent.speed)}}),Object.defineProperty(d.prototype,"arcSpeed",{get:function(){return this._arcSpeed||this.config.oribit.radius/this.linearSpeed}}),Object.defineProperty(d.prototype,"maxSpeed",{get:function(){return this._maxSpeed?this._maxSpeed:this._maxSpeed=1/(d.SPEED_CONSTANT/this.config.stats.speed)}}),Object.defineProperty(d.prototype,"speed",{get:function(){var a,b,e,f,g,h=0,i=this.parent,j=(this.animation,this.lastFrame);return j&&this.animation.isPlaying&&(a=i.position,b=j.x,f=j.y,e=a.x,g=a.y,h=c.Math.sqrt((e-b)*(e-b)+(g-f)*(g-f)),h/=1/d.FRAMERATE*1e3),h}}),Object.defineProperty(d.prototype,"vector",{get:function(){var a=this.parent,b=(this.animation,this.lastFrame),c=y1=x2=y2=0;return b&&(frame=a.position,c=b.x,y1=b.y,x2=frame.x,y2=frame.y),new e.Point(x2-c,y2-y1)}}),Object.defineProperty(d.prototype,"angle",{get:function(){var a=this.animation,b=a.lastFrame,d=y1=x2=y2=0;return b&&(frame=a.frame,d=b.x,y1=b.y,x2=frame.x,y2=frame.y),c.Math.atan2(y1-y2,d-x2)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,25:25,26:26,8:8,engine:"engine"}],13:[function(a,b,c){(function(c){function d(a){this.manager=a,this.game=a.game,this.socket=this.game.net.socket,this.shipsGroup=a.shipManager.shipsGroup,this.trajectoryGraphics=a.shipManager.trajectoryGraphics,this.pixelPerfectAlpha=1,this._tempPoint=new e.Point,this.game.on("gui/selected",this._selected,this),this.game.input.on("onTap",this._tap,this)}var e=a("engine");d.prototype.constructor=d,d.prototype.destroy=function(){this.game.removeListener("gui/selected",this._selected),this.game.input.removeListener("onTap",this._tap),this.manager=this.game=this.socket=this.shipsGroup=this.trajectoryGraphics=void 0},d.prototype._tap=function(a,b){b&&(a.button=e.Mouse.RIGHT_BUTTON,this._selected(a,new e.Rectangle(a.x,a.y,1,1)))},d.prototype._selected=function(a,b){var d,f,g,h,i,j,k=c.Number.MAX_VALUE,l=[],m=[],n=[],o=[];if(this.shipsGroup.forEach(function(c){a.button===e.Mouse.LEFT_BUTTON&&(c.overlap(b)&&l.push(c),c.isPlayer&&(m.push(c),c.target&&n.push(c.target))),a.button===e.Mouse.RIGHT_BUTTON&&c.selected&&b.volume<=300&&o.push(c)}),a.button===e.Mouse.LEFT_BUTTON){if(b.volume<=300){for(i in l)this._checkPixel(l[i],a)&&l[i].renderOrderID<k&&(d=l[i],k=l[i].renderOrderID);l=d?[d].concat(n):l}this.game.emit("ships/selected",l.concat(m))}if(o.length>0){for(g=game.world.worldTransform.applyInverse(b),this.trajectoryTween&&this.trajectoryTween.stop(),this.trajectoryGraphics.clear(),this.trajectoryGraphics.alpha=1,j=0;j<o.length;j++)h=o[j],h.isPlayer&&!h.destroyed&&(f=h.movement,this.socket.emit("ship/plot",{uuid:h.uuid,destination:g,current:f.current,previous:f.previous,rotation:h.rotation}),f.plot(g),h.movement.valid&&h.movement.drawDebug());this.trajectoryTween=this.game.tweens.create(this.trajectoryGraphics),this.trajectoryTween.to({alpha:0},500,e.Easing.Quadratic.InOut),this.trajectoryTween.start()}},d.prototype._checkPixel=function(a,b){var c,d,e,f=this.game.input;if(a.texture.baseTexture.source){if(f.getLocalPosition(a,b,this._tempPoint),c=this._tempPoint.x,d=this._tempPoint.y,0!==a.anchor.x&&(c-=-a.texture.frame.width*a.anchor.x),0!==a.anchor.y&&(d-=-a.texture.frame.height*a.anchor.y),c+=a.texture.frame.x,d+=a.texture.frame.y,a.texture.trim&&(c-=a.texture.trim.x,d-=a.texture.trim.y,c<a.texture.crop.x||c>a.texture.crop.right||d<a.texture.crop.y||d>a.texture.crop.bottom))return this._dx=c,this._dy=d,!1;if(this._dx=c,this._dy=d,f.hitContext.clearRect(0,0,1,1),f.hitContext.drawImage(a.texture.baseTexture.source,c,d,1,1,0,0,1,1),e=f.hitContext.getImageData(0,0,1,1),e.data[3]>=this.pixelPerfectAlpha)return!0}return!1},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],14:[function(a,b,c){(function(c){function d(a){this.ship=a,this.game=a.game,this.explosionEmitter=a.manager.explosionEmitter,this.flashEmitter=a.manager.flashEmitter,this.glowEmitter=a.manager.glowEmitter,this.shockwaveEmitter=a.manager.shockwaveEmitter}var e=a("engine");d.prototype.constructor=d,d.prototype.inflict=function(a){if("vessel-x04"!==this.ship.name&&"vessel-x05"!==this.ship.name&&!(c.Math.random()>.25)){var b,d=(this.game,this.ship),f=c.Math.random()*c.Math.PI,g=.5*c.Math.random()+.5,h=new e.Sprite(this.game,"texture-atlas","damage-a.png");h.pivot.set(32,32),h.position.set(d.pivot.x-a.x,d.pivot.y-a.y),h.scale.set(g,g),h.rotation=f,h.tint=0,b=this.game.tweens.create(h),b.to({alpha:0},5e3,e.Easing.Default,!1,5e3),b.once("complete",function(){h.destroy()},this),b.start(),d.addChild(h)}},d.prototype.shockwave=function(){this.shockwaveEmitter.at({center:this.ship.position}),this.shockwaveEmitter.explode(2)},d.prototype.destroyed=function(){var a,b,d=this.game,e=this.ship;e.destroyed=!0,e.engineCore.destroy(),e.movement.animation.stop(),this.shockwave(),e.tint=4473924;for(b in e.children)e.children[b].tint=4473924;d.clock.events.repeat(100,20,function(){e.worldTransform&&(a=d.world.worldTransform.applyInverse(e.worldTransform.apply(e.circle.random())),this.explosionEmitter.at({center:a}),this.explosionEmitter.explode(2),this.glowEmitter.color(null),this.glowEmitter.at({center:a}),this.glowEmitter.explode(1))},this),d.clock.events.repeat(200,25,function(){c.Math.random()>.5&&e.worldTransform&&(a=d.world.worldTransform.applyInverse(e.worldTransform.apply(e.circle.random())),this.explosionEmitter.at({center:a}),this.explosionEmitter.explode(2),this.glowEmitter.color(null),this.glowEmitter.at({center:a}),this.glowEmitter.explode(1))},this)},d.prototype.destroy=function(){this.ship=this.game=this.explosionEmitter=this.flashEmitter=this.glowEmitter=this.shockwaveEmitter=void 0},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],15:[function(a,b,c){(function(c){function d(a){this.parent=a,this.game=a.game,this.booster=!1,this.glows=[],this.highlights=[]}var e=a("engine");d.flicker=[.045*c.Math.random(),.025*c.Math.random(),.015*c.Math.random(),.025*c.Math.random(),.035*c.Math.random(),.025*c.Math.random()],d.prototype.constructor=d,d.prototype.create=function(){var a,b,d,f,g=this.glows,h=this.highlights,i=this.parent,j=i.config.engine.glows;for(f in j)d=j[f],b=new e.Sprite(i.game,"texture-atlas","engine-highlight.png"),b.pivot.set(32,32),b.position.set(d.position.x,d.position.y),b.scale.set(1,1),b.tint=d.tint,b.blendMode=e.BlendMode.ADD,b.alpha=0,a=new e.Sprite(i.game,"texture-atlas",d.sprite+".png"),a.pivot.set(128,64),a.rotation=c.Math.PI+e.Math.degToRad(d.rotation),a.position.set(d.position.x,d.position.y),a.scale.set(.1*d.scale.startX,.1*d.scale.startY),a.tint=d.tint,a.blendMode=e.BlendMode.ADD,i.addChild(a),i.addChild(b),g.push(a),h.push(b)},d.prototype.update=function(a){var b,e,f,g,h,i=this.glows,j=this.highlights,k=this.game,l=this.parent,m=l.config.engine.glows,n=d.flicker[k.clock.frames%6],o=c.Math.max(c.Math.min(a,1.5),.25);for(g in i)b=m[g].scale,i[g].scale.set(o*b.endX+n,o*b.endY+3*n);for(h in j)f=j[h],f.alpha=c.Math.min(1,o),this.booster&&c.Math.random()>.5&&(e=k.world.worldTransform.applyInverse(f.worldTransform.apply(f.pivot)),l.manager.flashEmitter.at({center:e}),l.manager.flashEmitter.explode(1))},d.prototype.destroy=function(){var a,b,c=this.glows,d=this.highlights;for(a in c)c[a].destroy();for(b in d)d[b].destroy();this.parent=this.game=this.glows=this.highlights=void 0},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],16:[function(a,b,c){(function(c){function d(a){this.parent=a,this.game=a.game}var e=a("engine");d.prototype.constructor=d,d.prototype.create=function(){this.shieldSprite=new e.Sprite(this.game,"texture-atlas",this.parent.name+"-shields.png"),this.shieldSprite.blendMode=e.BlendMode.ADD,this.shieldSprite.tint=65280,this.electricitySprite=new e.Sprite(this.game,"texture-atlas","reactor-electricity.png"),this.electricitySprite.blendMode=e.BlendMode.ADD,this.electricitySprite.pivot.set(32,32),this.electricitySprite.position.copy(this.parent.pivot),this.electricitySprite.tint=65280},d.prototype.start=function(){this.shieldSprite.alpha=1,this.animeTween=this.game.tweens.create(this.shieldSprite),this.animeTween.to({alpha:.5},1e3,e.Easing.Quadratic.InOut),this.animeTween.repeat(),this.animeTween.start(),this.timer=this.game.clock.events.repeat(50,200,this._update,this),this.timer.once("completed",this.stop,this),this.parent.addChild(this.shieldSprite),this.parent.addChild(this.electricitySprite)},d.prototype.stop=function(){this.game.clock.events.remove(this.timer),this.animeTween&&this.animeTween.stop(),this.parent.removeChild(this.shieldSprite),this.parent.removeChild(this.electricitySprite)},d.prototype.destroy=function(){this.stop(),this.parent=this.game=this.timer=this.electricitySprite=void 0},d.prototype._update=function(){var a=.75*c.Math.random()+1,b=this.electricitySprite,d=this.parent,e=d.manager.glowEmitter;c.Math.random()>.75?(b.alpha=c.Math.random(),b.rotation=c.Math.random()*c.Math.PI,b.scale.set(a,a),e.color(65280),e.at({center:d.position}),e.explode(c.Math.floor(2*c.Math.random())+1)):b.alpha=.25},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],17:[function(a,b,c){function d(a){this.parent=a,this.game=a.game}var e=a("engine");d.prototype.constructor=d,d.prototype.create=function(){this.shieldSprite=new e.Sprite(this.game,"texture-atlas",this.parent.name+"-shields.png"),this.shieldSprite.blendMode=e.BlendMode.ADD,this.shieldSprite.tint=3368703},d.prototype.start=function(){this.shieldSprite.alpha=1,this.fadeTween=this.game.tweens.create(this.shieldSprite),this.fadeTween.to({alpha:.8},100,e.Easing.Quadratic.InOut),this.fadeTween.repeat(),this.fadeTween.yoyo(!0,0),this.fadeTween.start(),this.parent.addChild(this.shieldSprite)},d.prototype.stop=function(){this.fadeTween&&this.fadeTween.stop(),this.parent.removeChild(this.shieldSprite)},d.prototype.destroy=function(){this.stop(),this.parent=this.game=this.shieldSprite=this.fadeTween=void 0},b.exports=d},{engine:"engine"}],18:[function(a,b,c){function d(a,b){this.parent=a,this.game=a.game,this.config=b,this.enhancements={},this.hardpoints=[]}var e=(a("engine"),a(11));d.prototype.constructor=d,d.prototype.enadd=function(a){this.enhancements[a]=!0},d.prototype.enremove=function(a){delete this.enhancements[a]},d.prototype.create=function(){var a,b,c=this.parent,d=this.hardpoints,f=this.config.hardpoints;for(b in f)a=new e(this,f[b]),a.fxGroup=c.manager.fxGroup,a.flashEmitter=c.manager.flashEmitter,a.explosionEmitter=c.manager.explosionEmitter,a.glowEmitter=c.manager.glowEmitter,d.push(a),c.addChild(a.sprite)},d.prototype.fire=function(a){var b,c=this.parent,d=c.target,e=this.hardpoints;if(d&&e.length>0)for(b in e)e[b].fire(b,a)},d.prototype.cancel=function(a){var b,c,d=this.game,e=this.parent,f=e.target,g=this.hardpoints;if(f&&g.length>0)for(c in g)b=g[c],b.timer&&d.clock.events.remove(b.timer)},d.prototype.update=function(){var a,b=this.parent,c=b.target,d=this.hardpoints;if(c&&d.length>0)for(a in d)d[a].update()},d.prototype.destroy=function(){var a,b;this.parent=this.game=this.enhancements=this.config=void 0;for(b in this.hardpoints)a=this.hardpoints[b],a.fxGroup=a.flashEmitter=a.explosionEmitter=a.glowEmitter=void 0,a.destroy();this.hardpoints=[]},b.exports=d},{11:11,engine:"engine"}],19:[function(a,b,c){(function(c){function d(a,b){e.Sprite.call(this,a.game,"texture-atlas",b+".png"),this.name=b,this.target=null,this.targeted=[],this.manager=a,this.game=a.game,this.config=a.game.cache.getJSON("ship-configuration",!1)[b],this.rotation=0,this.position=new e.Point(0,0),this.pivot.set(this.texture.frame.width/2,this.texture.frame.height/2),this.scale.set(this.config.size,this.config.size),this.hud=new l(this),this.damage=new k(this),this.movement=new f(this),this.circle=new e.Circle(this.pivot.x,this.pivot.y,this.texture.frame.width/2),this._selected=!1,this.autoCull=!0,this.checkWorldBounds=!0,this.reactor=new g(this),this.engineCore=new h(this),this.targetingComputer=new i(this,this.config.targeting),this.shieldGenerator=new j(this),this.graphics=new e.Graphics(a.game),this.graphics.blendMode=e.BlendMode.ADD,this.addChild(this.graphics)}var e=a("engine"),f=a(12),g=a(16),h=a(15),i=a(18),j=a(17),k=a(14),l=a(30);d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.reactor.create(),this.engineCore.create(),this.targetingComputer.create(),this.hud.create(),this.details.systems.shield&&this.shieldGenerator.create(),this.details.on("data",this.data,this)},d.prototype.interpolate=function(a,b){this.position.interpolate(a,b,this.position)},d.prototype.data=function(a){a.speed&&(this.movement.reset(),this.movement.animation.isPlaying&&this.movement.plot()),void 0!==a.health&&this.hud.healthBar.setProgressBar(c.Math.min(1,a.health/this.config.stats.health))},d.prototype.update=function(){var a=this.movement;a.update(),this.destroyed||(this.targetingComputer.update(),this.renderable&&this.engineCore.update(a.speed/a.maxSpeed)),e.Sprite.prototype.update.call(this)},d.prototype.select=function(){this._selected=!0,this.hud.healthBar.renderable=!0,this.graphics.clear(),this.graphics.lineStyle(3/this.scale.x,this.isPlayer?3407718:3368601,this.isPlayer?.25:.5),this.graphics.drawCircle(this.pivot.x,this.pivot.y,this.width/this.scale.x/1.8)},d.prototype.deselect=function(){this._selected=!1,this.hud.healthBar.renderable=!1,this.graphics.clear(),this.isPlayer&&(this.graphics.lineStyle(2/this.scale.x,3407718,.4),this.graphics.drawCircle(this.pivot.x,this.pivot.y,this.width/this.scale.x/1.8))},d.prototype.destroy=function(){this.targeted=[],this.reactor.destroy(),this.hud.destroy(),this.damage.destroy(),this.movement.destroy(),this.shieldGenerator.destroy(),this.targetingComputer.destroy(),this.details.removeListener("data",this.data),e.Sprite.prototype.destroy.call(this),this.manager=this.game=this.config=this.movement=this.circle=this.hud=this.damage=this.details=void 0},d.prototype.activate=function(a){switch(a){case"piercing":this.targetingComputer.enadd(a);break;case"overload":this.reactor.start();break;case"booster":this.engineCore.booster=!0;break;case"shield":this.shieldGenerator.start()}},d.prototype.deactivate=function(a){switch(a){case"piercing":this.targetingComputer.enremove(a);break;case"overload":this.reactor.stop();break;case"booster":this.engineCore.booster=!1;break;case"shield":this.shieldGenerator.stop()}},Object.defineProperty(d.prototype,"isPlayer",{get:function(){return this.user&&this.game.auth.user.uuid===this.user}}),Object.defineProperty(d.prototype,"speed",{get:function(){return this.details?this.details.speed:this.config.stats.speed}}),Object.defineProperty(d.prototype,"shields",{get:function(){return this.shieldGenerator&&this.shieldGenerator.fadeTween&&this.shieldGenerator.fadeTween.isRunning}}),Object.defineProperty(d.prototype,"selected",{get:function(){return this._selected}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{12:12,14:14,15:15,16:16,17:17,18:18,30:30,engine:"engine"}],20:[function(a,b,c){(function(c){function d(a){f.call(this),this.game=a,this.net=a.net,this.socket=a.net.socket,this.shipNetManager=a.shipNetManager,this.forceReposition=!1,this.hudGroup=null,this.shipsGroup=new e.Group(a),this.trajectoryGroup=new e.Group(a),this.fxGroup=new e.Group(a),this.fxGroup.blendMode=e.BlendMode.ADD,this.trajectoryGraphics=new e.Graphics(a),this.trajectoryGroup.addChild(this.trajectoryGraphics),this.explosionEmitter=new h(this.game),this.flashEmitter=new i(this.game),this.glowEmitter=new j(this.game),this.shockwaveEmitter=new k(this.game),this.game.particles.add(this.explosionEmitter),this.game.particles.add(this.flashEmitter),this.game.particles.add(this.glowEmitter),this.game.particles.add(this.shockwaveEmitter),this.ships={},this.game.world.add(this.trajectoryGroup),this.game.world.add(this.shipsGroup),this.game.world.add(this.fxGroup),this.game.world.add(this.explosionEmitter),this.game.world.add(this.shockwaveEmitter),this.game.world.add(this.glowEmitter),this.game.world.add(this.flashEmitter),this.game.auth.on("disconnected",this._reset,this),this.socket.on("ship/sync",this._syncBind=this._sync.bind(this)),this.socket.on("ship/plotted",this._plottedBind=this._plotted.bind(this)),this.game.on("ships/selected",this._select,this),this.game.on("ship/follow",this._follow,this),this.game.on("ship/targeted",this._targeted,this),this.game.on("ship/attack",this._attack,this),this.game.on("ship/destroyed",this._destroyed,this),this.game.on("enhancement/started",this._enstarted,this),this.game.on("enhancement/stopped",this._enstopped,this),this.game.on("game/pause",this._reset,this),this.game.on("game/resume",this._resume,this)}var e=a("engine"),f=a(1),g=a(19),h=a(21),i=a(22),j=a(23),k=a(24);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype._sync=function(a){var b,c,d,f,g,h,i=a.ships,j=i.length;for(h=0;j>h;h++)b=i[h],f=this.shipNetManager.getShipDataByUuid(b.uuid),f&&(g=!this.ships[b.uuid],c=this.ships[b.uuid]?this.ships[b.uuid]:this.ships[b.uuid]=this.create(b,f),d=e.Point.distance(b.current,c.movement.current),g&&c.isPlayer&&(this.game.emit("ship/follow",c),this.game.emit("ships/selected",[c])),this.forceReposition&&c.position.set(b.current.x,b.current.y),(d>64||g)&&(c.movement.animation.stop(),b.moving?c.movement.plot(b.destination,b.current,b.previous):c.position.set(b.current.x,b.current.y)));this.forceReposition=!1},d.prototype.create=function(a,b){var c=(this.game,new g(this,b.chasis));return c.uuid=a.uuid,c.user=b.user,c.username=b.username,c.details=b,c.position.set(a.current.x,a.current.y),c.rotation=a.rotation,c.movement.throttle=a.throttle,c.movement.trajectoryGraphics=this.trajectoryGraphics,this.shipsGroup.add(c),c.boot(),c},d.prototype.remove=function(a){var b=this.game,c=b.camera,d=this.ships[a.uuid];void 0!==d&&(c.target===d&&c.unfollow(),delete this.ships[a.uuid]&&d.destroy())},d.prototype.removeAll=function(){var a,b=this.ships;for(a in b)this.remove(b[a])},d.prototype.destroy=function(){var a=this.game,b=this.game.auth,c=this.socket;b.removeListener("disconnected",this._disconnected),c.removeListener("ship/sync",this._syncBind),c.removeListener("ship/plotted",this._plottedBind),a.removeListener("ships/selected",this._select),a.removeListener("ship/follow",this._follow),a.removeListener("ship/targeted",this._targeted),a.removeListener("ship/attack",this._attack),a.removeListener("ship/destroyed",this._destroyed),a.removeListener("enhancement/started",this._enstarted),a.removeListener("enhancement/stopped",this._enstopped),a.removeListener("game/pause",this._reset),a.removeListener("game/resume",this._resume),this.game.particles.remove(this.explosionEmitter),this.game.particles.remove(this.flashEmitter),this.game.particles.remove(this.glowEmitter),this.game.particles.remove(this.shockwaveEmitter),this.game.world.remove(this.trajectoryGroup),this.game.world.remove(this.shockwaveEmitter),this.game.world.remove(this.shipsGroup),this.game.world.remove(this.fxGroup),this.game.world.remove(this.explosionEmitter),this.game.world.remove(this.flashEmitter),this.game.world.remove(this.glowEmitter),this.game=this.socket=this._syncBind=this._plottedBind=void 0,this.removeAll()},d.prototype._plotted=function(a){var b=(this.game.auth,this.ships[a.uuid]);this.net.rtt;void 0===b||b.isPlayer||b.movement.plot(a.destination,a.current,a.previous)},d.prototype._targeted=function(a){var b=this.ships[a.origin],c=this.ships[a.target];b&&c&&(b.target=c,b.targetingComputer.cancel(),c.targeted.push(b))},d.prototype._untargeted=function(a){var b,c,d=this.ships[a.uuid];if(void 0!==d){a=d.targeted;for(c in a)b=a[c],b.target===d&&(b.target=null)}},d.prototype._attack=function(a){var b=this.ships[a.origin],c=this.ships[a.target];b&&c&&(b.target||this._targeted(a),"evade"===a.type?c.renderable&&c.hud.flash("evading",16777215,300,5):"miss"===a.type?c.renderable&&c.hud.flash("evading",16777215,300,5):(c.renderable&&c.hud.flash(""+a.damage,16711680,200,30,!0),(b.renderable||c.renderable)&&b.targetingComputer.fire()))},d.prototype._enstarted=function(a){var b=this.ships[a.ship];b&&b.activate(a.enhancement)},d.prototype._enstopped=function(a){var b=this.ships[a.ship];b&&b.deactivate(a.enhancement)},d.prototype._select=function(a){var b,c,d,e=this.ships;for(c in e)b=e[c],b.deselect();for(d in a)b=e[a[d].uuid],b&&b.select()},d.prototype._follow=function(a){var b=this.game,c=this.ships[a.uuid];void 0!==c&&(b.camera.follow(c),b.input.once("keydown",function(){b.camera.unfollow()},this))},d.prototype._destroyed=function(a){var b,d=this.game,f=this.ships[a.uuid];void 0!==f&&(f.isPlayer&&(this.game.emit("gui/message","destroyed",2e3,2e3),this.game.clock.events.add(5e3,function(){c.location.reload()})),f.target=null,f.damage.destroyed(),f.data({health:0}),b=d.tweens.create(f),b.to({alpha:0},2500,e.Easing.Default,!1,12500),b.once("complete",function(){this.remove(a)},this),b.start(),this.game.clock.events.add(800,function(){this._untargeted(a)},this))},d.prototype._resume=function(){this.forceReposition=!0},d.prototype._reset=function(){this.removeAll()},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,19:19,21:21,22:22,23:23,24:24,engine:"engine"}],21:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0),this.minRotation=-30,this.maxRotation=30,this.setScale(.25,.8,.25,.8,2e3),this.setAlpha(1,0,3e3),this.setTint(16737894,0,750),this.makeParticles("texture-atlas",["explosion-flash.png","explosion-a.png","explosion-a.png","explosion-b.png","explosion-c.png","explosion-a.png","explosion-d.png","explosion-d.png","explosion-d.png","explosion-b.png","explosion-b.png","explosion-b.png"])}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,b.exports=d},{engine:"engine"}],22:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0),this.blendMode=e.BlendMode.ADD,this.setScale(.35,1,.35,1,250),this.minRotation=0,this.maxRotation=0,this.setAlpha(1,0,500),this.setTint(3368601,6710886,500),this.makeParticles("texture-atlas","explosion-flash.png")}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,d.prototype.color=function(a){this.setTint(3368601,a||6724027,100)},b.exports=d},{engine:"engine"}],23:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0),this.blendMode=e.BlendMode.ADD,this.setScale(1,1.5,1,1.5,250),this.setAlpha(1,0,1e3),this.setTint(16777215,16737894,250),this.makeParticles("texture-atlas","explosion-d.png")}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,d.prototype.color=function(a){this.setTint(16777215,a||16737894,100)},b.exports=d},{engine:"engine"}],24:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0),this.blendMode=e.BlendMode.ADD,this.setScale(.5,2,.5,2,6e3),
this.minRotation=-15,this.maxRotation=15,this.setAlpha(1,0,6e3),this.makeParticles("texture-atlas",["explosion-d.png","explosion-d.png","explosion-d.png","explosion-e.png"])}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,b.exports=d},{engine:"engine"}],25:[function(a,b,c){(function(c){function d(a,b,c,d){void 0===b&&(b=0),void 0===c&&(c=1),void 0===d&&(d=e.Easing.Default),this.duration=a.arcLength*a.linearSpeed*(c-b),d!==e.Easing.Default&&(this.duration*=2),this.start=this.getStartAngle(a,b),this.end=this.getEndAngle(a,c),this.easing=d}var e=a("engine");d.prototype.constructor=d,d.prototype.interpolate=function(a,b){return a.oribital.circumferencePoint(b)},d.prototype.getStartAngle=function(a,b){var d;return a.anticlockwise&&a.startAngle<=a.endAngle?(d=a.arcLength*b/a.oribital.radius,a.startAngle+2*c.Math.PI-d):(d=a.arcLength*b/a.oribital.radius*(a.anticlockwise?-1:1),a.startAngle+d)},d.prototype.getEndAngle=function(a,b){var d;return!a.anticlockwise&&a.endAngle<=a.startAngle?(d=a.arcLength*(1-b)/a.oribital.radius,a.endAngle+2*c.Math.PI-d):(d=a.arcLength*(1-b)/a.oribital.radius*(a.anticlockwise?-1:1),a.endAngle-d)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],26:[function(a,b,c){function d(a,b,c,d){void 0===b&&(b=0),void 0===c&&(c=1),void 0===d&&(d=e.Easing.Default),this.duration=a.linearLength*a.linearSpeed*(c-b),d!==e.Easing.Default&&(this.duration*=2),this.start=0+a.linearLength*b,this.end=a.linearLength-a.linearLength*(1-c),this.easing=d}var e=a("engine");d.prototype.constructor=d,d.prototype.interpolate=function(a,b){return e.Line.pointAtDistance(a.tangentPoint,a.destination,b)},b.exports=d},{engine:"engine"}],27:[function(a,b,c){function d(){}d.NONE=0,d.LEFT=1,d.RIGHT=2,d.TOP=4,d.BOTTOM=8,d.CENTER=16,d.HORIZONTAL=32,d.VERTICAL=64,d.TEMPORARY=128,d.STRETCH=256,d.UsePsSize=d.USE_PS_SIZE=512,d.TopLeft=d.LEFT|d.TOP,d.TopRight=d.RIGHT|d.TOP,d.BottomLeft=d.LEFT|d.BOTTOM,d.BottomRight=d.RIGHT|d.prototype.BOTTOM,b.exports=d},{}],28:[function(a,b,c){function d(a,b,c){e.Group.call(this,a),this.layout=b||new f,this.constraint=c,this.cachedHeight=0,this.psWidth=this.psHeight=this.cachedWidth=-1,this.size={width:0,height:0},this.border={top:0,left:0,bottom:0,right:0},this.padding={top:0,left:0,bottom:0,right:0},this.views=[],this.panels=[],this.isValid=!1,this.isLayoutValid=!1}var e=a("engine"),f=a(34);d.prototype=Object.create(e.Group.prototype),d.prototype.constructor=d,d.prototype.addPanel=function(a,b){null!=b.constraint?constr=b.constraint:b.constraint=a,this.panels.push(b),this.add(b)},d.prototype.removePanel=function(a){this.panels.splice(this.panels.indexOf(a),1),this.remove(a)},d.prototype.removeAll=function(){var a,b,c=this.panels,d=c.length;for(b=0;d>b;b++)a=c[b],this.remove(a,!1)},d.prototype.addView=function(a){this.views.push(a),this.add(a)},d.prototype.invalidate=function(a){if(this.isValid=!1,this.isLayoutValid=!1,this.cachedWidth=-1,a){for(var b=0;b<this.panels.length;b++)this.panels[b].invalidate(a);this.validate(),this.repaint()}else this.parent&&this.parent.invalidate?this.parent.invalidate():this.parent&&!this.parent.invalidate&&(this.validate(),this.repaint())},d.prototype.validate=function(){if(this.validateMetric(),this.size.width>0&&this.size.height>0&&this.isLayoutValid===!1&&this.visible===!0){this.layout.doLayout(this);for(var a=0;a<this.panels.length;a++)this.panels[a].isLayoutValid||this.panels[a].validate();this.isLayoutValid=!0}},d.prototype.validateMetric=function(){this.isValid===!1&&this.recalc&&this.recalc()},d.prototype.repaint=function(){if(this.paint(),this.visible===!0)for(var a=0;a<this.panels.length;a++)this.panels[a].isValid||this.panels[a].repaint();this.isValid=!0},d.prototype.paint=function(){for(var a=0;a<this.views.length;a++)this.views[a].paint(this.top,this.left,this.bottom,this.right)},d.prototype.resize=function(a,b){},d.prototype.setBorder=function(a,b,c,d){return 1==arguments.length&&(b=c=d=a),2==arguments.length&&(c=a,d=b),(this.border.top!=a||this.border.left!=b||this.border.bottom!=c||this.border.right!=d)&&(this.border.top=a,this.border.left=b,this.border.bottom=c,this.border.right=d),this},d.prototype.setPadding=function(a,b,c,d){return 1==arguments.length&&(b=c=d=a),2==arguments.length&&(c=a,d=b),(this.padding.top!=a||this.padding.left!=b||this.padding.bottom!=c||this.padding.right!=d)&&(this.padding.top=a,this.padding.left=b,this.padding.bottom=c,this.padding.right=d),this},d.prototype.setSize=function(a,b){return(a!=this.size.width||b!=this.size.height)&&(this.size.width=a,this.size.height=b,this.isValid=!1,this.isLayoutValid=!1,this.resize(a,b)),this},d.prototype.setLocation=function(a,b){(a!=this.x||this.y!=b)&&(this.position.x=a,this.position.y=b,null!=this.relocated&&this.relocated(a,b))},d.prototype.setPreferredSize=function(a,b){(a!=this.psWidth||b!=this.psHeight)&&(this.psWidth=a,this.psHeight=b)},d.prototype.getPreferredSize=function(){if(this.validateMetric(),this.cachedWidth<0){var a=this.psWidth<0||this.psHeight<0?this.layout.calcPreferredSize(this):{width:0,height:0};return a.width=this.psWidth>=0?this.psWidth:a.width+this.left+this.right,a.height=this.psHeight>=0?this.psHeight:a.height+this.top+this.bottom,this.cachedWidth=a.width,this.cachedHeight=a.height,a}return{width:this.cachedWidth,height:this.cachedHeight}},d.prototype.destroy=function(){e.Group.prototype.destroy.call(this),this.layout=this.border=this.padding=void 0,this.views=[],this.panels=[]},Object.defineProperty(d.prototype,"top",{get:function(){return this.padding.top+this.border.top}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.padding.left+this.border.left}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.padding.bottom+this.border.bottom}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.padding.right+this.border.right}}),b.exports=d},{34:34,engine:"engine"}],29:[function(a,b,c){function d(){this.gap=0}d.prototype.constructor=d,d.prototype.paint=function(){},Object.defineProperty(d.prototype,"top",{get:function(){return this.gap}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.gap}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.gap}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.gap}}),b.exports=d},{}],30:[function(a,b,c){function d(a,b){f.call(this,a.game,!0),this.settings=k.mixin(b,{width:128,height:64,padding:[0],border:[0],layout:{ax:i.CENTER,ay:i.TOP,direction:i.VERTICAL,gap:0},label:{text:{fontName:"medium"},bg:{fillAlpha:0,borderSize:0}},message:{text:{fontName:"medium"},bg:{fillAlpha:0,borderSize:0}},health:{width:80,height:4,label:!1,bg:{fillAlpha:1,color:0,borderSize:0},progress:{fillAlpha:1,color:65331,borderSize:0}}}),this.ship=a,this.layout=new j(this.settings.layout.ax,this.settings.layout.ay,this.settings.layout.direction,this.settings.layout.gap),this.setSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border)}var e=a("engine"),f=a(28),g=a(31),h=a(32),i=a(27),j=a(33),k=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.create=function(){var a=this.game,b=this.ship;this.ship.manager.hudGroup.addChild(this),this.ship.username&&(this.label=new g(a,b.username,this.settings.label),this.label.tint=b.isPlayer?3407667:3381759,this.addPanel(i.CENTER,this.label)),this.healthBar=new h(this.game,this.settings.health),this.healthBar.setProgressBar(b.details.health/b.config.stats.health),this.healthBar.renderable=!1,this.addPanel(i.CENTER,this.healthBar),this.validate(),this.repaint()},d.prototype.update=function(){var a=this.ship,b=this.game.world,c=b.worldTransform.apply(a.position);this.pivot.set(this.settings.width/2,-a.height/2*b.scale.x-12),this.position.set(c.x,c.y)},d.prototype.flash=function(a,b,c,d,f){void 0===b&&(b=16777215),void 0===d&&(d=15),void 0===f&&(f=!1);var h=this.ship,i=new g(this.game,a,this.settings.message),j=e.Easing.Quadratic.InOut,k=this.game.tweens.create(i.position),l=this.game.tweens.create(i);i.tint=b,i.alpha=0,i.pivot.set(i.width/2,i.height/2),i.position.set(this.size.width/2,-h.height/2-12),f&&i.scale.set(1.5,1.5),this.add(i),k.to({y:i.y-d},2*c||500,j,!0),l.to({alpha:1},c||250,j,!0,0,0,!0),l.once("complete",function(){this.remove(i)},this)},d.prototype.destroy=function(){this.ship.manager.hudGroup.removeChild(this),this.label=this.game=this.ship=this.layout=this.settings=void 0},b.exports=d},{27:27,28:28,31:31,32:32,33:33,engine:"engine"}],31:[function(a,b,c){(function(c){function d(a,b,c){f.call(this,a,this),b=b||"",this.settings=i.mixin(c,{padding:[6,12],border:[0],color:16777215,bg:{},text:{},align:"left"}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.align=this.settings.align,this.settings.bg&&(this.bg=new h(a,this.settings.bg),this.addView(this.bg)),this.textView=new g(a,b,this.settings.text),this.textView.tint=this.settings.color,this.addView(this.textView)}var e=a("engine"),f=a(28),g=a(36),h=a(35),i=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.calcPreferredSize=function(a){return{width:this.textView.width,height:this.textView.height}},d.prototype.doLayout=function(){var a=this.left;"right"===this.align?a=this.size.width-this.textView.width-this.right:"center"===this.align&&(a=c.Math.floor(this.size.width/2-this.textView.width/2)),this.textView.position.set(a,this.top)},Object.defineProperty(d.prototype,"blendMode",{get:function(){return this.textView.blendMode},set:function(a){this.textView.blendMode=a}}),Object.defineProperty(d.prototype,"tint",{get:function(){return this.textView.tint},set:function(a){this.textView.tint=a}}),Object.defineProperty(d.prototype,"text",{get:function(){return this.textView.fontTexture.text},set:function(a){this.textView.fontTexture.text=""+a}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{28:28,35:35,36:36,engine:"engine"}],32:[function(a,b,c){(function(c){function d(a,b){if(f.call(this,a,this),this.value=0,this.settings=j.mixin(b,{width:256,height:16,padding:[1],border:[0],label:{padding:[0],border:[0],bg:!1,text:{fontName:"small"},align:"center"},bg:{fillAlpha:1,color:4157375,borderSize:0},progress:{fillAlpha:1,color:0,borderSize:0}}),!this.settings.width&&!this.settings.height)throw Error("ProgressBar component must set a preferred size");this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.background=new i(a,this.settings.bg),this.progress=new i(a,j.mixin(this.settings.progress,{size:{width:0,height:this.settings.height-this.top-this.bottom}})),this.addView(this.background),this.addView(this.progress),this.settings.label&&(this.label=new h(a,"",this.settings.label),this.addPanel(g.NONE,this.label))}var e=a("engine"),f=a(28),g=a(27),h=a(31),i=(a(33),a(35)),j=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.calcPreferredSize=function(a){return{width:this.settings.width,height:this.settings.height}},d.prototype.doLayout=function(){this.settings.label&&(this.label.setSize(this.size.width-this.right-this.left,this.size.height-this.top-this.bottom),this.label.setLocation(this.left,this.top),this.label.doLayout()),this.progress.position.set(this.left,this.top)},d.prototype.setMinMax=function(a,b){this.min=a,this.max=b},d.prototype.setProgressBar=function(a){var b=this.progress,c=this.label,d=this.min,f=this.max;b.settings.size.width=(this.settings.width-this.left-this.right)*a,b.paint(this.top,this.left,this.bottom,this.right),this.value=a,c&&void 0!==d&&void 0!==f&&(c.text=e.Math.roundTo(this.max*this.value,1)+"/"+this.max,c.blendMode=a>.5?e.BlendMode.MULTIPLY:e.BlendMode.ADD,c.doLayout())},Object.defineProperty(f.prototype,"percentage",{get:function(){return c.Math.floor(100*this.value)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{27:27,28:28,31:31,33:33,35:35,engine:"engine"}],33:[function(a,b,c){function d(a,b,c,d){this.ax=a||e.LEFT,this.ay=b||e.TOP,this.direction=c||e.HORIZONTAL,this.gap=d||0,this.stretchLast=!1}var e=a(27);d.prototype.calcPreferredSize=function(a){var b,c,d,f,g={width:0,height:0},h=0;for(f=0;f<a.panels.length;f++)c=a.panels[f],c.visible===!0&&(d=c.getPreferredSize(),this.direction===e.HORIZONTAL?(g.width+=d.width,g.height=d.height>g.height?d.height:g.height):(g.width=d.width>g.width?d.width:g.width,g.height+=d.height),h++);return b=this.gap*(h>0?h-1:0),this.direction===e.HORIZONTAL?g.width+=b:g.height+=b,g},d.prototype.doLayout=function(a){var b,c,d,f,g=0,h=this.calcPreferredSize(a),i=a.top,j=a.left,k=null,l=a.size.width-j-a.right,m=a.size.height-i-a.bottom,n=(this.ax==e.RIGHT?l-h.width:this.ax==e.CENTER?~~((l-h.width)/2):0)+j,o=(this.ay==e.BOTTOM?m-h.height:this.ay==e.CENTER?~~((m-h.height)/2):0)+i;for(f=0;f<a.panels.length;f++)b=a.panels[f],b.visible===!0&&(c=b.getPreferredSize(),d=b.constraint,this.direction===e.HORIZONTAL?(d===e.STRETCH?c.height=a.size.height-i-a.bottom:d===e.CENTER?g=~~((h.height-c.height)/2):d===e.BOTTOM&&(g=h.height-c.height),b.setLocation(n,o+g),n+=c.width+this.gap):(d===e.STRETCH?c.width=a.size.width-j-a.right:d===e.CENTER?g=~~((h.width-c.width)/2):d===e.RIGHT&&(g=h.width-c.width),b.setLocation(n+g,o),o+=c.height+this.gap),b.setSize(c.width,c.height),k=b);null!==k&&this.stretchLast===!0&&(this.direction===e.HORIZONTAL?k.setSize(a.size.width-k.x-a.right,k.size.height):k.setSize(k.width,a.size.height-k.y-a.bottom))},b.exports=d},{27:27}],34:[function(a,b,c){function d(){}var e=a(27);d.prototype.calcPreferredSize=function(a){var b,c,d,e=0,f=0;for(d=0;d<a.panels.length;d++)b=a.panels[d],b.visible===!0&&(c=b.getPreferredSize(),c.width>e&&(e=c.width),c.height>f&&(f=c.height));return{width:e,height:f}},d.prototype.doLayout=function(a){var b,c,d,f=a.top,g=a.size.height-a.bottom-f,h=a.left,i=a.size.width-a.right-h;for(d=0;d<a.panels.length;d++)b=a.panels[d],b.visible===!0&&(constraint=b.constraint,constraint==e.USE_PS_SIZE?(c=b.getPreferredSize(),b.setSize(c.width,c.height),b.setLocation(h+~~((i-c.width)/2),f+~~((g-c.height)/2))):(b.setSize(i,g),b.setLocation(h,f)))},b.exports=d},{27:27}],35:[function(a,b,c){function d(a,b){g.call(this,a),f.call(this),this.settings=h.mixin(b,{color:3355443,fillAlpha:1,blendMode:e.BlendMode.NORMAL,radius:0,borderSize:1,borderColor:0,borderAlpha:1}),this.fillAlpha=this.settings.fillAlpha,this.blendMode=this.settings.blendMode}var e=a("engine"),f=a(29),g=e.Graphics,h=e.Class;d.prototype=Object.create(g.prototype),d.prototype.mixinPrototype(f.prototype),d.prototype.constructor=d,d.prototype.paint=function(a,b,c,d){var e=this.settings.size?this.settings.size:this.parent.size,f=this.settings.offset?this.settings.offset:{x:0,y:0},g=this.settings,h=g.radius>0?"drawRoundedRect":"drawRect";this.clear(),g.highlight&&(this.lineStyle(0),this.beginFill(g.highlight,g.highlightAlpha?g.highlightAlpha:1),this[h](f.x,f.y,e.width,e.height/2,g.radius),this.endFill()),g.borderSize>0&&g.borderAlpha>0&&this.lineStyle(g.borderSize,g.borderColor,g.borderAlpha),g.fillAlpha>0&&this.beginFill(g.color,g.fillAlpha),(g.fillAlpha>0||g.borderSize>0&&g.borderAlpha>0)&&this[h](f.x,f.y,e.width,e.height,g.radius),g.fillAlpha>0&&this.endFill()},b.exports=d},{29:29,engine:"engine"}],36:[function(a,b,c){function d(a,b,c){g.call(this,a),f.call(this),this.defaultFont=c&&c.fontName?c.fontName:"vt323",this.fonts={vt323:{fontName:"vt323",characterWidth:8,characterHeight:10,xSpacing:2,ySpacing:0,xOffset:1,yOffset:1,tint:16777215},medium:{fontName:"medium",characterWidth:8,characterHeight:7,xSpacing:0,ySpacing:0,xOffset:0,yOffset:0,tint:16777215},small:{fontName:"small",characterWidth:5,characterHeight:5,xSpacing:0,ySpacing:0,xOffset:0,yOffset:0,tint:16777215}},this.settings=h.mixin(c,this.fonts[this.defaultFont]),this.fontTexture=new e.RetroFont(a,this.settings.fontName,this.settings),this.fontTexture.multiLine=!0,this.fontTexture.text=b,this.fontTexture.customSpacingX=this.settings.characterSpacing||0,this.fontTexture.customSpacingY=this.settings.lineSpacing||0,this.tint=this.settings.tint,this.texture=this.fontTexture}var e=a("engine"),f=a(29),g=e.Sprite,h=e.Class;d.prototype=Object.create(e.Sprite.prototype),d.prototype.mixinPrototype(f.prototype),d.prototype.constructor=d,b.exports=d},{29:29,engine:"engine"}],solar:[function(a,b,c){var d=a(7),e=a(19),f=a(20),g=a(13),h=a(2),i=a(3);b.exports={Auth:d,sector:{Ship:e,ShipManager:f,Selection:g},fx:{Background:h,Planet:i}}},{13:13,19:19,2:2,20:20,3:3,7:7}]},{},[]);